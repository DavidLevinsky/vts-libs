<html>
<head>
    <title>Melown Maps Viewer</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <style/>

#vadstena-engine-tools {
    font-family: helvetica, arial, sans-serif;
    font-size: 14px;
    position:absolute;
    right:10px;
    top:10px;
    cursor: default;
    background-color: rgba(255,255,255,0.95);
    border-radius: 5px;
    border: solid 1px #ccc;
    text-align: left;
    z-index: 4;
}

.vadstena-engine-tools * { margin: 0; padding: 0; }

#vadstena-engine-tools-menu {
    width:100%;
    height: 29px;
    text-align: right;
    border-bottom: 1px solid #ccc;
}

#vadstena-engine-tools-menu ul {
    display: inline-block;
    margin-right: 20px;
    margin-left: 20px;
    top: -3px;
    position: relative;
}

#vadstena-engine-tools-menu ul li {
    list-style-type: none;
    display: inline;
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
    border: solid 1px #ccc;
    padding: 2px 4px;
    margin-right: 2px;
    background-color: rgba(0,0,0,0.1);
    cursor: pointer;
}

#vadstena-engine-tools-menu ul li.vadstena-engine-tools-tab-selected {
    background-color: rgba(250,250,250,0.5);
    border-bottom: solid 1px #f0f0f0;
}

#vadstena-engine-tools-close {
    display: inline-block;
    position: relative;
    top: -6px;
    right: -4px;
    float: right;
    cursor: pointer;
}

#vadstena-engine-tools-button {
    position: absolute;
    right: 10px;
    top: 10px;
    cursor: pointer;
    border-radius: 3px;
    width: 34px;
    float: right;
    background-color: rgba(255,255,255,0.95);
    padding: 4px;
    z-index: 4;
    display:none;
}

#vadstena-engine-canvas-2d {
    cursor: none;
    position: absolute;
    top:0px;
    left:0px;
    width:100%;
    height:100%;
    z-index:3;
}


#vadstena-engine-canvas-3d {
    width:100%;
    height:100%;
}

#vadstena-engine-gallery {
    position: absolute;
    top:0px;
    left:0px;
    width:100%;
    height:100%;
}

#vadstena-engine-logo {
    font-family: helvetica, arial, sans-serif;
    font-size:14px;
    position:fixed;left:5px;top:5px;
    color:#fff;
    text-shadow: 0 0 2px #000;
}

#vadstena-engine-credits {
    position:absolute;
    left:3px;
    top:3px;
    z-index: 4;
}

#vadstena-engine-credits ul {
    padding: 7px 0px;
    margin: 0px;
    text-align: left;
}

#vadstena-engine-credits ul li {
    color: #FFFFFF;
    font-family: Verdana, Tahoma, Geneva, Arial, Sans-serif;
    font-size: 11px;
    display: inline;
    list-style-type: none;
    padding-right: 10px;
    padding-left: 10px;
    border-right: 1px solid rgba(255,255,255,0.3);
    padding-top: 2px;
    padding-bottom: 2px;
    text-shadow: 0 0 2px #000;
}

#vadstena-engine-credits ul li a {
    color: #FFFFFF;
}

#vadstena-engine-plus {
    position:absolute;
    left:23px;
    bottom:20px;
    cursor: pointer;
    z-index: 4;
}

#vadstena-engine-minus {
    position:absolute;
    left:70px;
    bottom:20px;
    cursor: pointer;
    z-index: 4;
}

#vadstena-engine-compass-main {
    position:absolute;
    left:21px;
    bottom:64px;
    cursor: move;
    overflow: hidden;

    width: 99px;
    height: 99px;
    z-index: 50;
}

#vadstena-engine-compass-frame {
    position:absolute;
    right:0px;
    bottom:2px;
    width: 99px;
    height: 99px;
    z-index: 10;
    -webkit-perspective:200px;
    perspective:200px;
    pointer-events:none;
}

#vadstena-engine-compass {
    z-index: 0;
    max-width:120px;
    max-height:120px;
}

#vadstena-engine-compass-frame2 {
    position:absolute;
    right:0px;
    bottom:1px;
    width: 99px;
    height: 99px;
    z-index: 11;
    -webkit-perspective:200px;
    perspective:200px;
    pointer-events:none;
    opacity: 0.25;
}

#vadstena-engine-compass-frame3 {
    position:absolute;
    right:0px;
    bottom:0px;
    width: 99px;
    height: 99px;
    z-index: 12;
    -webkit-perspective:200px;
    perspective:200px;
    pointer-events:none;
    opacity: 0.25;
}


#vadstena-engine-toolbar {
    position: absolute;
    bottom: 0px;
    left: 50%;
}


#vadstena-engine-toolbar-bottons {
    background-color: rgba(255, 255, 255, 0.95);
    display: inline-block;
    padding: 5px 5px;
    border-top-left-radius: 4px;
    border-top-right-radius: 4px;
    z-index: 4;
    position: relative;
    left: -50%;
}

#vadstena-engine-toolbar-bottons div {
    margin: 5px;
}

#vadstena-engine-toolbar-break {
    width: 1px; height: 28px; background-color: #CCCCCC; display: inline-block;
}

#vadstena-engine-toolbar-break2 {
    width: 1px; height: 28px; background-color: #CCCCCC; display: inline-block;
}

#vadstena-engine-toolbar-view {
    background: no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAA4CAYAAADuMJi0AAADBklEQVRYw+3XwW8VVRTH8c8UEyWY4EY3SqIuibjwLWQlMbgg0b9BIsSrJdJqN0XWQjdi0sZSPRgU/gMXJiw0wMZQk9lYo+4wqW50RUKUmOK4ePc93rzOq9PXEI15v+W9Z85vzsw9Z+bLRBP911W0CUopPYAX8BKewaN56zd8hy9xPSLu7sgwpbQbJzGDx/EXfspGsvGTmMLPWMRyRPyxbcOU0mF8khN+hQu4EhG3huL24ghex2HcxLGIuNbKMKVUYB7v4XvMRsTVvPcwXsXBHH4DlyPidt5/MVe5H/MRcW5Lw2z2ERI+w3RE3Ml7B/AF9g3lWMfLEbGW4x7CebyGZZyMiKoXvGvwyk6ns4w3sRARM2VZbuQke/B1gxnsxSudTudCWZZ/lmW5UZbl551O50HM4ZGyLK/0gqcGqpvDCaxExOmhpEdHmPW0L8f0lXOsYDal9EbNMKX0HBbwje6JHNZB/6znG9ZmsIrFlNKzgxX+jruoWiTekaZy+T/irXyXSw1xN1rkWm1YW8o5ZyPi28EKRcRF3cc6nVI6O3ThZd3TOErruDS4kFI6g2ksRcTHvfWmPvwA7+BTnBizLZZxTENbNE6alNI8zmhu/KPuHZBVXBrR+Kci4v3h3FuNtkO4iKdtf7Qd791ka8OcbLfuIJjDE7rD+yZ+zSGP4Snds/BLru7DsYb3kPEuHNL9PB1Q/zyt5SdwPSI22uSbaKKJJppoZ2o1vKWqFVuIYmdsIVVjsYUoxvg8paqRLURxayiukS1Eca2dYao2sYUorua9RrYQxe28X2MLUWzNFtmsxhaiuJP3tvyJEsVajtvEFqKoRhku6/7uL4ji9MD6Hvxg9O/+Ovb3K+1ecxbvYlEUb/eWpwYC+mxRM+tq22yRc6xgVqrqbCFV950tpOpfZAtR3He2EEWdLUTRZ4v8wge1bbaQqj5biGI0W0hVjS3GbIsaW4xui3umNbYYavxNbDGi8U+Joj1bSFUjW7Qcbcf7N9nasJtsLLYYb3jXjVuxhSgmbDHR/0B/A4VuaqgKMKNFAAAAAElFTkSuQmCC);
    width: 28px; height: 28px; background-position: 0 0px; display: inline-block; cursor: pointer;
}

#vadstena-engine-toolbar-view.selected {
    background-position: 0 -28px;
}

#vadstena-engine-toolbar-length {
    background: no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAA4CAYAAADuMJi0AAADy0lEQVRYw+2XTWhdRRTHf/c9QfCjaKAlusnCj4WWCj1VsYsKClEiiqBWqlKLi4NIWxNd1C5rBQ2CBXVRDqhpI9Vis1CDH0UQP8CqjCCWSndBUakbKUQxfo2Lmbx37829LzfvTRXEWd533vz4nzlz5vzhv77aVR9VdaOIfCQi3zrnvk4JbFXBgLeAb4BXVPWOM6YwB5sG7gbmgf0iciKV0o7CEmwnsMbM9gG7Uipt1cDWAxMAqaFtVR0CPgNmAY2wzcBu5xwAzrljIpIkvS3gpwgbBe6LsMeAi/OBqZS2nXOIyOvAOmB3TOkocIlz7st8cAql7biRj9DLgSeBE8DzIrJXRI45535PBW3nNlqEXgncA1wKHAS+F5H1zrkfVHVYRDaZ2XS/0MI9zEHXAbcAL8dz+0REzgIeB8w591u/Spe0thL0WWAfcBLYAzxqZvODpLeyl+aglxGKaAQYB9aKyIXOuR/7hbbrfigpvRn4DrgOeFVERpxzp/uBtuixzOxP4H7gKLAfOAw8CFydj1PVVU3vabZczuOGbeAAcBuw18yeVtVxQhWfH0HbzewvVZ0AJoEtZjbTOKU16b0C2Coiq4EvgNOErjRhZn80SW+rCbAivQ/Ez7sIxbS6FFub3sbAEvQd4A3gReBeYFNFbCV0RcAS9BDwHnARcFhVJ1X17FL4C4TJ4aG+gTnoNuBN4GFCBR8EvKpugFC5hDd2gdAqgYZVWrdi9U4BNwFjwFbgOeAU8DZwAXCDmZ0aSGGF0neBT4H3e8EGVlijdA44twqWDJiDvkQYUW6sgv2//sGlfiPq51CfdMyHqmuhvuAtUkOLwC5sGrie2AtTQrvAImwnsAbLOg04FbRVA+t4i9TQFuqHImw2B9tMmMJJDW3sLVJBs5jSxZnlLuAa4Cogw7IDS/6hvjOzYNlMY1JOIVi2+Ki+BnxAmEOnUf8E6s9JqbSV22gROgvsIDyqM8AC6iWqG0b92CDQ4j3sQo8Ct8evzwC/oH6Y4C0+HETp0k5ThH4OfEworD3AI1g2n4tdMbT+PewW0ijh2mwH1gI/Y9lXpdjGhVQ/YhSVjgF3ArcCx1E/UoptrLT3TFOE1noL1K9qCl1+iOpCjxDO8zwsO4L6cdQPRbVPob7VBNp8pime6RThvh4ndKVxLFvIxdaeafMxsZjent6il9KVT21dpVuAawmG9VcsO1QRu0TpygfhrtKCt0D9JOrPjLeI0G1UeAvUb4jq0nuLmN4plvEWWJbGW+SU1nqLPGxwhdVK54jeogxLB+xCO96iCvavrL8B+TYqHX3cmUMAAAAASUVORK5CYII=);
    width: 28px; height: 28px; background-position: 0 0px; display: inline-block; cursor: pointer;
}

#vadstena-engine-toolbar-length.selected {
    background-position: 0 -28px;
}

#vadstena-engine-toolbar-distance {
    background: no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAA4CAYAAADuMJi0AAAB8UlEQVRYw+2XPU8bQRCGnzMtrQmV+whRXR+J9FCGHwCaJoiKLrW7VHw0I/kHUDpJbQt6lxE9FQllRL0UvsDKXt/O7p0RsvyW5xk/N3u7s/PCqmsjJ0lE+mVZDsuy3JxMJqOU3E7mi54Bm8BpamIu8DvwBJynJhbWQBHpAgPgRFXvvee7wCXwRVX/tFJhBRsD+9Wf+7oEPgFjEfnQGOjBdoDfwNFMyCFwB3y0QGuXNADbU9XHQNw2MKqgd1VccHk7NbAtCwxAVR+Az5ZKOzWwkQUWgW5bKxykwGqg11bgV+BXCiwAvQVOZn9/2TQi0mfaOc5V9VsKJEV+hdntKheY3a5SFDyHItIDLoDj1G+YUqGvK+CA6dbuvgXwiOmR2GkburC15Rz+RsBlQaP3YdvQ6PWkqn+Zdo7/33TQpELTBexBfxJoVykyjxi+mrTB1Z/a1nonEtdH3D/E9VNT17v0VeK6iPuBuN7M813E3SAuOubbKxRn8hYWaBz4CjN5ixi0vpfOw/bQ4jEQN+ct0CLNWyBuywQD0GJuzF9UaacGNjLB6qF53iIKWwxN9xZm2Dw06C38ZcxuVylafW8Rlrge4obVOVxahb5evEXbUJO3aBO6uLXlHP5GwCVB44Nwy9D49aTF23sLD9rYW+RpPbW9Jz0D92oLFy0I4qkAAAAASUVORK5CYII=);
    width: 28px; height: 28px; background-position: 0 0px; display: inline-block; cursor: pointer;
}

#vadstena-engine-toolbar-distance.selected {
    background-position: 0 -28px;
}

#vadstena-engine-toolbar-position {
    background: no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAA4CAYAAADuMJi0AAADeklEQVRYw+2XvY9VRRjGf2NQaXRjbdzVSiAkFkLQ0oqNi4loIq0f5KGTAgMJGBuzklVJkNj4yP4BbqEmqKGzk0RjJS50yEeA2IAfhajJWMzcyz3nnnvO7N17iVHe5uaeec/7zDtn5p33B/91C10Oku4HngGeB54G5oAZ4BfgInAG+Bz42vatsQUlbQBeBd4CzgGf5uA/ATeAh4BH8yReALYC7wEf2v5zTYKSHgdWgEvAIdurtfFoO9SebQGWgFlgj+3zRWssabuka5L2tfjEljFJui5pR9P4PTXnTcCXwCu2PyqaYc1sG3gZOJXjNQtKuhf4BDhi+/Q4YgOip4HDwEqO25jhfuCy7Y8LAnbubtsnSbt4/5CgpI3AAeDQejJrsIPAgRy/kuEu4KztHyepZvsc8APwXF1wgXTOpmGfAc/WBZ8EvpmS4BlgW+/Phvw7S/rAnSZpEXgdOGH7SMErF4BH6oIzwA1JFc8Ru/EN4L4sOiTYVhQGBX8F5mzfLJjx+6StfqJpsKHkzZBKZEXwMukW6BTMy1iylD17DLjS+9PbNN+Rqv407Cng27rgV8CLUxLcneNXBE8BWyVtnqRSjvdEjn9b0PYfwDHg3QlntwQcy/ErGQJ8AMxK2lsw81jg8xqpIzg++LwvaPsvYA/wjqT5dS7lTuAo8FKOOyyYRc+T6t7JkkxbMlsGFprajFE9zSyp6F4FDuaqX1nShgO+mbQHHgZ2224slV1d217gTWCV213bBVKLOEM61L2ubQvwNrBs++9RcUv60o2k+3KBdKvMAQ+SyuFF4HtSH/TF4G68a3fMOr8hisVsgcP4bIHi2GyBw9rYAsUKW+CwWhuPOITaswpb4FDGFihuR/EaivtafGLLmFC8juIOOk1xE4o/ozjf4Rc7xudznNFsgWKfLXBYF1vk9w8DKzlug2BmCxw62WLo+zX7jGYLFKfKFjl+JcNdwFkcJsoWOPwP2aInWMwWKC6i+BuKi4WCFbYIOUjzuWrajYq3SGzxOw4PNIy3xqqwBQ43C2bcyhYNJW99bIHDXbao22i2QHGibJHjDbMFDlNlixy/kiFktkCxu+Puup6STztb4NBni877sFuszxY5boNgEu2zRVGmozNbBhaa2oxRPU2FLXLVry7p8AGvsAUOa2OL3LWNxRY4jM8W+fIsYovB3fivsX8AdEF+n/MLnzQAAAAASUVORK5CYII=);
    width: 28px; height: 28px; background-position: 0 0px; display: inline-block; cursor: pointer;
}

#vadstena-engine-toolbar-position.selected {
    background-position: 0 -28px;
}

#vadstena-engine-toolbar-stats {
    background: no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAA4CAYAAADuMJi0AAAAeElEQVRYw+2XMQ7AIAhFv03PyqG4rB26tOlCDTFK3tsc5MkPA0rVaZnFzKw/z+7+qX/M7nC68By9GIlvzQ5HXx6FoZGUG3P9SBEiRIgQ4YZC2J/UFVDWX7uPvPG3+EEgvkU7HHx5FIbmJjHm+pEiRIgQIcINhfW5ADlzHGsx8ngzAAAAAElFTkSuQmCC);
    width: 28px; height: 28px; background-position: 0 0px; display: none; cursor: pointer;
}

#vadstena-engine-toolbar-stats.selected {
    background-position: 0 -28px;
}

#vadstena-engine-toolbar-link {
    background: no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAA4CAYAAADuMJi0AAADDklEQVRYw+3XO4hdVRTG8d/OKD4KU6UaFBXURo04nSIGxkfEwiCksZABcVU+QhTsJMHOF4MW6vIBilU6BUXIGNAmTjEk+CDNIGghomJIUMcEx2Nx9lxn7tyZuZl7r1jcr9mcvfY+31n7rLXhz1hjXaDKIJsjouAZBHbiIxzIzF+HbhgRO/A6Hu0KncTdmflLr307tmk2gXdWmX2I1/AnbsFcROwaSobV7D08VKcOZ+ahGrsLH+ByfIU7MvPMoBnGKrNnV8wgM+ewD8u4Sft/Bz7Se+t4KjOf6w5m5lF8Wx9vHobhz3V8NyKmI+LWNelH7MG19fHr7s0XbcPwxfqiZRzF97i6mk1rC2gCp/B89+ZNi6YWyG5cgpOZuVTnn8Bs3f+ktv/24gVcVj9oOjN/6tswIq6qX7u7Tn2n/Sczq8yewg94v2YFJ3DPRn1YNjC7BsdWjgrntZV5JV6ucwfxtrbRV/7Zp9ifmac3SqT0MLsec/XlZ+uRfY778QoaHMzM2br+YtyI85n5jS1UuswmMY9JnMF9mXm8xk7U4z2AJcxn5pdbGXSruy2ermbL2LtiVrUfd+IvvKFHU/ej7ra4ro4/ZuYXqwOZuYjFiHi1nszkdgy7M5yv42REzHQvjojH/Fu1x4Zh+BJWMnsrIh5eZfa4tmjgMz2auh/1qtKd+Bi34W8cwaXaS5n2dtmXmX8MxbCaXlFNb+8KfYIHV26c7Wii1+TCwsK5qampI9iFG/C7tjIfycxz2zUba6yx/h8aiC1E05MtZBk+W4hmU7aQZXhsIZot2UI0w2GLaraGLWQ5VGPr2EKW4bJFxwyyjJYtZFnHFrKMji1EMy2aNWwhmj3+K7YQzWBsUQukwxayLNX5vthClv7ZQjQDscVGfVg2MBuILWTpny1E0xdbyDJb13fYQpYLYwvRrGMLWY7X2Dq2kGW4bNExazVatpBlDVvIsohF0YyGLUQzs251NKNlC9F02EI0o2EL0fTFFrIMjy1EsylbdG6cIRxpqyxntVfVm/gNp7W3ywODmI01Ev0Dp8k+8M7R85AAAAAASUVORK5CYII=);
    width: 28px; height: 28px; background-position: 0 0px; display: inline-block; cursor: pointer;
}

#vadstena-engine-toolbar-link.selected {
    background-position: 0 -28px;
}



#vadstena-engine-link-panel {
    /*position:fixed;*/
    right:20px;
    top:20px;
    /*background-color: rgba(250,250,250,0.95);*/
    z-index: 3;
    border-radius: 5px;
    padding: 15px;
    color: #000;
    display: none;
    width: 305px;
}

/*
#vadstena-engine-link-panel h3 {
    margin-top: 5px;
    margin-bottom: 10px;
}
*/

#vadstena-engine-link-panel-text {
    resize:none;
    font-size: 12px;
    margin-top: 5px;
    padding: 5px;
}

#vadstena-engine-link-panel-close {
    width: 20px;
    height: 20px;
    float: right;
    cursor: pointer;
    margin-top: -23px;
    margin-right: -22px;
}

#vadstena-engine-stats-panel {
    display: none;
    padding:15px;
    width: 305px;
}


#vadstena-engine-render-stats {
    margin-top: 5px;
}

#vadstena-engine-render-stats table {
    font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
    color:#000000;
    text-align: left;
    font-size: 12px;
}

#vadstena-engine-render-stats table td {
    vertical-align: top;
}

#vadstena-engine-gis-panel {
    font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
    /*position: absolute;*/
    left: 10px;
    top: 10px;
    width: 305px;
    /*background-color: rgba(250,250,250,0.95);*/
    z-index: 3;
    border-radius: 5px;
    padding: 15px;
    padding-bottom: 20px;
    color: #000;
    font-size: 12px;
    display: none;
}

/*
#vadstena-engine-gis-panel h3 {
    margin-top: 5px;
    margin-bottom: 20px;
}
*/

#vadstena-engine-gis-panel-texts {
    margin-bottom: 15px;
    margin-top: 7px;
    resize: none;
    font-size: 12px;
    padding: 5px;
}

/*
        #gisPanel img {
            box-shadow: 0 0 1px #777;
        }
*/


#vadstena-engine-gis-panel-coords-buttons {
}

#vadstena-engine-gis-panel h4 {
    font-size: 18px;
    text-align: left;
    margin-bottom: 13px;
}

#vadstena-engine-gis-panel p {
    font-size: 12px;
    text-align: left;
    margin-bottom: 5px;
    line-height: 150%;
}

#vadstena-engine-gis-panel .vadstena-engine-button {
    text-align: left;
    margin-right: 3px;
    margin-bottom: 5px;
    line-height: 150%;
    border: solid 1px #555555;
    border-radius: 4px;
    padding: 5px 10px;
    cursor: pointer;
}

#vadstena-engine-gis-panel .vadstena-engine-button:hover {
    box-shadow: 0 0 1px #0066FF;
}

#vadstena-engine-gis-panel .vadstena-engine-button-disabled {
    text-align: left;
    margin-right: 3px;
    margin-bottom: 5px;
    line-height: 150%;
    border: solid 1px #333333;
    border-radius: 4px;
    padding: 5px 10px;
    cursor: default;
    opacity: 0.3;
}

#vadstena-engine-gis-panel-coord-system {
    margin-top: 9px;
}

#vadstena-engine-gis-panel .vadstena-engine-button-pressed {
    text-align: left;
    margin-right: 3px;
    margin-bottom: 5px;
    line-height: 150%;
    border: solid 1px #333333;
    border-radius: 4px;
    padding: 5px 10px;
    box-shadow: inset 0 1px 7px #707070;
}

#vadstena-engine-gis-panel .vadstena-engine-button-pressed:hover {
    box-shadow: inset 0 1px 7px #777, 0 0 1px #0066FF;
}

#vadstena-engine-gis-panel .vadstena-engine-button-pressed {
    text-align: left;
    margin-right: 3px;
    margin-bottom: 5px;
    line-height: 150%;
    border: solid 1px #333333;
    border-radius: 4px;
    padding: 5px 10px;
    box-shadow: inset 0 1px 7px #707070;
}

#vadstena-engine-gis-panel .vadstena-engine-button-pressed:hover {
    box-shadow: inset 0 1px 7px #777, 0 0 1px #0066FF;
}


#vadstena-engine-gis-panel .vadstena-engine-button-left {
    text-align: left;
    margin-right: -1px;
    margin-bottom: 5px;
    line-height: 150%;
    border: solid 1px #333333;
    border-top-left-radius: 4px;
    border-bottom-left-radius: 4px;
    padding: 5px 10px;
    cursor: pointer;
}

#vadstena-engine-gis-panel .vadstena-engine-button-left:hover {
    box-shadow: 0 0 1px #0066FF;
}

#vadstena-engine-gis-panel .vadstena-engine-button-midle {
    text-align: left;
    margin-right: -1px;
    margin-bottom: 5px;
    line-height: 150%;
    border: solid 1px #333333;
    padding: 5px 10px;
    cursor: pointer;
}

#vadstena-engine-gis-panel .vadstena-engine-button-midle:hover {
    box-shadow: 0 0 1px #0066FF;
}

#vadstena-engine-gis-panel .vadstena-engine-button-right {
    text-align: left;
    margin-right: 0px;
    margin-bottom: 5px;
    line-height: 150%;
    border: solid 1px #333333;
    border-top-right-radius: 4px;
    border-bottom-right-radius: 4px;
    padding: 5px 10px;
    cursor: pointer;
}

#vadstena-engine-gis-panel .vadstena-engine-button-right:hover {
    box-shadow: 0 0 1px #0066FF;
}



#vadstena-engine-gis-panel .vadstena-engine-button-left-pressed {
    text-align: left;
    margin-right: -1px;
    margin-bottom: 5px;
    line-height: 150%;
    border: solid 1px #333333;
    border-top-left-radius: 4px;
    border-bottom-left-radius: 4px;
    padding: 5px 10px;
    color: #ffffff;
    background-color: #888;
    cursor: pointer;
}

#vadstena-engine-gis-panel .vadstena-engine-button-left-pressed:hover {
    box-shadow: 0 0 1px #0066FF;
}

#vadstena-engine-gis-panel .vadstena-engine-button-midle-pressed {
    text-align: left;
    margin-right: -1px;
    margin-bottom: 5px;
    line-height: 150%;
    border: solid 1px #333333;
    padding: 5px 10px;
    color: #ffffff;
    background-color: #888;
    cursor: pointer;
}

#vadstena-engine-gis-panel .vadstena-engine-button-midle-pressed:hover {
    box-shadow: 0 0 1px #0066FF;
}

#vadstena-engine-gis-panel .vadstena-engine-button-right-pressed {
    text-align: left;
    margin-right: 0px;
    margin-bottom: 5px;
    line-height: 150%;
    border: solid 1px #333333;
    border-top-right-radius: 4px;
    border-bottom-right-radius: 4px;
    padding: 5px 10px;
    color: #ffffff;
    background-color: #888;
    cursor: pointer;
}

#vadstena-engine-gis-panel .vadstena-engine-button-right-pressed:hover {
    box-shadow: 0 0 1px #0066FF;
}



#vadstena-engine-info-panel {
    width: 305px;
    padding: 15px;
}

#vadstena-engine-info-panel-texts {
    font-size:13px;
}

#vadstena-engine-info-panel h3, #vadstena-engine-gis-panel h3, #vadstena-engine-stats-panel h3, #vadstena-engine-link-panel h3 {
    margin-top: 0px;
    font-size: 18px;
    margin-bottom: 15px;
}

#vadstena-engine-info-panel h3 span, #vadstena-engine-gis-panel h3 span, #vadstena-engine-stats-panel h3 span, #vadstena-engine-link-panel h3 span {
    /*
    position: relative;
    top: -13px;
    left: 6px;
    */
}

#vadstena-engine-info-panel-texts {
    margin-top: 10px;
    margin-bottom: 20px;
}

.vadstena-engine-small-break {
    height : 12px;
}

#vadstena-engine-info-panel-like {
    position: absolute;
    bottom: 19px;
}

.vadstena-engine-info-panel-buttons {
    text-align: right;
    top: 0px;
    margin-bottom: 15px;
    position: relative;
    width: 200px;
    float: right;
}

.vadstena-engine-info-panel-button {
    padding: 2px 10px;
    margin-left: 5px;
    cursor: pointer;
    border-radius: 5px;
    display: inline-block;
}

.vadstena-engine-info-panel-button:hover {
    box-shadow: 0 0 1px #0066ff;
}

.vadstena-engine-info-panel-button img {
    position: relative;
    top: 5px;
    margin-top: -10px;
}

#vadstena-engine-gallery {
    /*display: none;*/
    -moz-user-select: none;
    -khtml-user-select: none;
    -webkit-user-select: none;
    user-select: none;
}

#vadstena-engine-gallery table {
    width: 100%;
    height: 100%;
    position: fixed;
    top: 0px;
    left: 0px;
}

#vadstena-engine-gallery table img {
    left: 0px;
    top: 0px;
    width: 100%;
    height: inherit;
}

#vadstena-engine-link-panel-autorotate {
    margin-top: 5px;
}

.vadstena-engine-checkbox {
    background: no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAeCAYAAAAhDE4sAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4RDFBRTI3OTM1MzRFNDExQTlBNUU4MDJCQjhEQjZEQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFQjRFRTZCRDM0MzcxMUU0QkJCRDkwNDI5RkQyRjFFMiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFQjRFRTZCQzM0MzcxMUU0QkJCRDkwNDI5RkQyRjFFMiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjhEMUFFMjc5MzUzNEU0MTFBOUE1RTgwMkJCOERCNkRDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjhEMUFFMjc5MzUzNEU0MTFBOUE1RTgwMkJCOERCNkRDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+XgsKsQAAAadJREFUeNrMlTsvRFEQx+/ZXbtoPLbbhhVqEiUaKl9A7VEIhaASjW8gIUKioZFVeXQqOjqh0foCHiEW3fGfZM5mdvaes8vewiS/vZv7+N85M/8511hroyQiFSUUGfoxxtAhD6bAJGih08Dy0UUZHIEL8OlO0qoy/L8VLHGGy+Db8+IOsApyoFR1hWtUAIegv4FVjIEd0CU1ZI2+ZLqBMHG1TazYUqhRH9iQ0G/NZFQ3K0I1F+qI2KQyqnkmpTphmi12mZkA7YH7u8EIeACvcYaM2IwlTtnHE9jgcarWSGL6tbObn34OOf1Z1RXXchqjTXAL2sBz5QZKC9sITfM6F/8gMP05nscZMA9mwZWsUYEF6k0/bSNrovj7tBIttMtHX3QqkVPQq7smhQbAOZgTntIiJ6AY134S2AN9vGnRyTcWy8dkUvT5SGY0BG74oXdwqTKhl/WAdCgjV6NBcK1c7TIZBls8LrGGlL65B4ucGcUZb/qPXLdsyJBptWPegQUwDbZZxLtLugfJZB9gnB0rM1sRIrScUZ7+F9/0U9uP/zr95t99+38EGAC9/LBoH3Dt5QAAAABJRU5ErkJggg==);
    width: 18px; height: 15px; background-position: 0 0px; display: inline-block; cursor: pointer;
    position: relative;
    top: 1px;
    margin-right: 3px;
}

.vadstena-engine-checkbox.selected {
    background-position: 0 -14px;
}

    </style>
    <script type="text/javascript">var VadstenaEngineType_ = "webexport";</script>
    <script type="text/javascript">
!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.proj4=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function Point(a,b,c){if(!(this instanceof Point))return new Point(a,b,c);if(Array.isArray(a))this.x=a[0],this.y=a[1],this.z=a[2]||0;else if("object"==typeof a)this.x=a.x,this.y=a.y,this.z=a.z||0;else if("string"==typeof a&&"undefined"==typeof b){var d=a.split(",");this.x=parseFloat(d[0],10),this.y=parseFloat(d[1],10),this.z=parseFloat(d[2],10)||0}else this.x=a,this.y=b,this.z=c||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}var c=a("mgrs");Point.fromMGRS=function(a){return new Point(c.toPoint(a))},Point.prototype.toMGRS=function(a){return c.forward([this.x,this.y],a)},b.exports=Point},{mgrs:66}],2:[function(a,b){function Projection(a,b){if(!(this instanceof Projection))return new Projection(a);b=b||function(a){if(a)throw a};var e=c(a);if("object"!=typeof e)return void b(a);var g=f(e),h=Projection.projections.get(g.projName);h?(d(this,g),d(this,h),this.init(),b(null,this)):b(a)}var c=a("./parseCode"),d=a("./extend"),e=a("./projections"),f=a("./deriveConstants");Projection.projections=e,Projection.projections.start(),b.exports=Projection},{"./deriveConstants":32,"./extend":33,"./parseCode":36,"./projections":38}],3:[function(a,b){b.exports=function(a,b,c){var d,e,f,g=c.x,h=c.y,i=c.z||0;for(f=0;3>f;f++)if(!b||2!==f||void 0!==c.z)switch(0===f?(d=g,e="x"):1===f?(d=h,e="y"):(d=i,e="z"),a.axis[f]){case"e":c[e]=d;break;case"w":c[e]=-d;break;case"n":c[e]=d;break;case"s":c[e]=-d;break;case"u":void 0!==c[e]&&(c.z=d);break;case"d":void 0!==c[e]&&(c.z=-d);break;default:return null}return c}},{}],4:[function(a,b){var c=Math.PI/2,d=a("./sign");b.exports=function(a){return Math.abs(a)<c?a:a-d(a)*Math.PI}},{"./sign":21}],5:[function(a,b){var c=2*Math.PI,d=a("./sign");b.exports=function(a){return Math.abs(a)<Math.PI?a:a-d(a)*c}},{"./sign":21}],6:[function(a,b){b.exports=function(a){return Math.abs(a)>1&&(a=a>1?1:-1),Math.asin(a)}},{}],7:[function(a,b){b.exports=function(a){return 1-.25*a*(1+a/16*(3+1.25*a))}},{}],8:[function(a,b){b.exports=function(a){return.375*a*(1+.25*a*(1+.46875*a))}},{}],9:[function(a,b){b.exports=function(a){return.05859375*a*a*(1+.75*a)}},{}],10:[function(a,b){b.exports=function(a){return a*a*a*(35/3072)}},{}],11:[function(a,b){b.exports=function(a,b,c){var d=b*c;return a/Math.sqrt(1-d*d)}},{}],12:[function(a,b){b.exports=function(a,b,c,d,e){var f,g;f=a/b;for(var h=0;15>h;h++)if(g=(a-(b*f-c*Math.sin(2*f)+d*Math.sin(4*f)-e*Math.sin(6*f)))/(b-2*c*Math.cos(2*f)+4*d*Math.cos(4*f)-6*e*Math.cos(6*f)),f+=g,Math.abs(g)<=1e-10)return f;return 0/0}},{}],13:[function(a,b){var c=Math.PI/2;b.exports=function(a,b){var d=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(b)-d)<1e-6)return 0>b?-1*c:c;for(var e,f,g,h,i=Math.asin(.5*b),j=0;30>j;j++)if(f=Math.sin(i),g=Math.cos(i),h=a*f,e=Math.pow(1-h*h,2)/(2*g)*(b/(1-a*a)-f/(1-h*h)+.5/a*Math.log((1-h)/(1+h))),i+=e,Math.abs(e)<=1e-10)return i;return 0/0}},{}],14:[function(a,b){b.exports=function(a,b,c,d,e){return a*e-b*Math.sin(2*e)+c*Math.sin(4*e)-d*Math.sin(6*e)}},{}],15:[function(a,b){b.exports=function(a,b,c){var d=a*b;return c/Math.sqrt(1-d*d)}},{}],16:[function(a,b){var c=Math.PI/2;b.exports=function(a,b){for(var d,e,f=.5*a,g=c-2*Math.atan(b),h=0;15>=h;h++)if(d=a*Math.sin(g),e=c-2*Math.atan(b*Math.pow((1-d)/(1+d),f))-g,g+=e,Math.abs(e)<=1e-10)return g;return-9999}},{}],17:[function(a,b){var c=1,d=.25,e=.046875,f=.01953125,g=.01068115234375,h=.75,i=.46875,j=.013020833333333334,k=.007120768229166667,l=.3645833333333333,m=.005696614583333333,n=.3076171875;b.exports=function(a){var b=[];b[0]=c-a*(d+a*(e+a*(f+a*g))),b[1]=a*(h-a*(e+a*(f+a*g)));var o=a*a;return b[2]=o*(i-a*(j+a*k)),o*=a,b[3]=o*(l-a*m),b[4]=o*a*n,b}},{}],18:[function(a,b){var c=a("./pj_mlfn"),d=1e-10,e=20;b.exports=function(a,b,f){for(var g=1/(1-b),h=a,i=e;i;--i){var j=Math.sin(h),k=1-b*j*j;if(k=(c(h,j,Math.cos(h),f)-a)*k*Math.sqrt(k)*g,h-=k,Math.abs(k)<d)return h}return h}},{"./pj_mlfn":19}],19:[function(a,b){b.exports=function(a,b,c,d){return c*=b,b*=b,d[0]*a-c*(d[1]+b*(d[2]+b*(d[3]+b*d[4])))}},{}],20:[function(a,b){b.exports=function(a,b){var c;return a>1e-7?(c=a*b,(1-a*a)*(b/(1-c*c)-.5/a*Math.log((1-c)/(1+c)))):2*b}},{}],21:[function(a,b){b.exports=function(a){return 0>a?-1:1}},{}],22:[function(a,b){b.exports=function(a,b){return Math.pow((1-a)/(1+a),b)}},{}],23:[function(a,b){b.exports=function(a){var b={x:a[0],y:a[1]};return a.length>2&&(b.z=a[2]),a.length>3&&(b.m=a[3]),b}},{}],24:[function(a,b){var c=Math.PI/2;b.exports=function(a,b,d){var e=a*d,f=.5*a;return e=Math.pow((1-e)/(1+e),f),Math.tan(.5*(c-b))/e}},{}],25:[function(a,b,c){c.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},c.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},c.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},c.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},c.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},c.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},c.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},c.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},c.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},c.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},c.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},c.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},c.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},c.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},c.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},c.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},{}],26:[function(a,b,c){c.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},c.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},c.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},c.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},c.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},c.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},c.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},c.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},c.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},c.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},c.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},c.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},c.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},c.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},c.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},c.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},c.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},c.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},c.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},c.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},c.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},c.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},c.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},c.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},c.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},c.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},c.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},c.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},c.hough={a:6378270,rf:297,ellipseName:"Hough"},c.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},c.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},c.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},c.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},c.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},c.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},c.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},c.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},c.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},c.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},c.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},c.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},c.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},c.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},{}],27:[function(a,b,c){c.greenwich=0,c.lisbon=-9.131906111111,c.paris=2.337229166667,c.bogota=-74.080916666667,c.madrid=-3.687938888889,c.rome=12.452333333333,c.bern=7.439583333333,c.jakarta=106.807719444444,c.ferro=-17.666666666667,c.brussels=4.367975,c.stockholm=18.058277777778,c.athens=23.7163375,c.oslo=10.722916666667},{}],28:[function(a,b){function c(a,b,c){var d;return Array.isArray(c)?(d=f(a,b,c),3===c.length?[d.x,d.y,d.z]:[d.x,d.y]):f(a,b,c)}function d(a){return a instanceof e?a:a.oProj?a.oProj:e(a)}function proj4(a,b,e){a=d(a);var f,h=!1;return"undefined"==typeof b?(b=a,a=g,h=!0):("undefined"!=typeof b.x||Array.isArray(b))&&(e=b,b=a,a=g,h=!0),b=d(b),e?c(a,b,e):(f={forward:function(d){return c(a,b,d)},inverse:function(d){return c(b,a,d)}},h&&(f.oProj=b),f)}var e=a("./Proj"),f=a("./transform"),g=e("WGS84");b.exports=proj4},{"./Proj":2,"./transform":64}],29:[function(a,b){var c=Math.PI/2,d=1,e=2,f=3,g=4,h=5,i=484813681109536e-20,j=1.0026,k=.3826834323650898,l=function(a){if(!(this instanceof l))return new l(a);if(this.datum_type=g,a){if(a.datumCode&&"none"===a.datumCode&&(this.datum_type=h),a.datum_params){for(var b=0;b<a.datum_params.length;b++)a.datum_params[b]=parseFloat(a.datum_params[b]);(0!==a.datum_params[0]||0!==a.datum_params[1]||0!==a.datum_params[2])&&(this.datum_type=d),a.datum_params.length>3&&(0!==a.datum_params[3]||0!==a.datum_params[4]||0!==a.datum_params[5]||0!==a.datum_params[6])&&(this.datum_type=e,a.datum_params[3]*=i,a.datum_params[4]*=i,a.datum_params[5]*=i,a.datum_params[6]=a.datum_params[6]/1e6+1)}this.datum_type=a.grids?f:this.datum_type,this.a=a.a,this.b=a.b,this.es=a.es,this.ep2=a.ep2,this.datum_params=a.datum_params,this.datum_type===f&&(this.grids=a.grids)}};l.prototype={compare_datums:function(a){return this.datum_type!==a.datum_type?!1:this.a!==a.a||Math.abs(this.es-a.es)>5e-11?!1:this.datum_type===d?this.datum_params[0]===a.datum_params[0]&&this.datum_params[1]===a.datum_params[1]&&this.datum_params[2]===a.datum_params[2]:this.datum_type===e?this.datum_params[0]===a.datum_params[0]&&this.datum_params[1]===a.datum_params[1]&&this.datum_params[2]===a.datum_params[2]&&this.datum_params[3]===a.datum_params[3]&&this.datum_params[4]===a.datum_params[4]&&this.datum_params[5]===a.datum_params[5]&&this.datum_params[6]===a.datum_params[6]:this.datum_type===f||a.datum_type===f?this.nadgrids===a.nadgrids:!0},geodetic_to_geocentric:function(a){var b,d,e,f,g,h,i,j=a.x,k=a.y,l=a.z?a.z:0,m=0;if(-c>k&&k>-1.001*c)k=-c;else if(k>c&&1.001*c>k)k=c;else if(-c>k||k>c)return null;return j>Math.PI&&(j-=2*Math.PI),g=Math.sin(k),i=Math.cos(k),h=g*g,f=this.a/Math.sqrt(1-this.es*h),b=(f+l)*i*Math.cos(j),d=(f+l)*i*Math.sin(j),e=(f*(1-this.es)+l)*g,a.x=b,a.y=d,a.z=e,m},geocentric_to_geodetic:function(a){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=1e-12,u=t*t,v=30,w=a.x,x=a.y,y=a.z?a.z:0;if(o=!1,b=Math.sqrt(w*w+x*x),d=Math.sqrt(w*w+x*x+y*y),b/this.a<t){if(o=!0,q=0,d/this.a<t)return r=c,void(s=-this.b)}else q=Math.atan2(x,w);e=y/d,f=b/d,g=1/Math.sqrt(1-this.es*(2-this.es)*f*f),j=f*(1-this.es)*g,k=e*g,p=0;do p++,i=this.a/Math.sqrt(1-this.es*k*k),s=b*j+y*k-i*(1-this.es*k*k),h=this.es*i/(i+s),g=1/Math.sqrt(1-h*(2-h)*f*f),l=f*(1-h)*g,m=e*g,n=m*j-l*k,j=l,k=m;while(n*n>u&&v>p);return r=Math.atan(m/Math.abs(l)),a.x=q,a.y=r,a.z=s,a},geocentric_to_geodetic_noniter:function(a){var b,d,e,f,g,h,i,l,m,n,o,p,q,r,s,t,u,v=a.x,w=a.y,x=a.z?a.z:0;if(v=parseFloat(v),w=parseFloat(w),x=parseFloat(x),u=!1,0!==v)b=Math.atan2(w,v);else if(w>0)b=c;else if(0>w)b=-c;else if(u=!0,b=0,x>0)d=c;else{if(!(0>x))return d=c,void(e=-this.b);d=-c}return g=v*v+w*w,f=Math.sqrt(g),h=x*j,l=Math.sqrt(h*h+g),n=h/l,p=f/l,o=n*n*n,i=x+this.b*this.ep2*o,t=f-this.a*this.es*p*p*p,m=Math.sqrt(i*i+t*t),q=i/m,r=t/m,s=this.a/Math.sqrt(1-this.es*q*q),e=r>=k?f/r-s:-k>=r?f/-r-s:x/q+s*(this.es-1),u===!1&&(d=Math.atan(q/r)),a.x=b,a.y=d,a.z=e,a},geocentric_to_wgs84:function(a){if(this.datum_type===d)a.x+=this.datum_params[0],a.y+=this.datum_params[1],a.z+=this.datum_params[2];else if(this.datum_type===e){var b=this.datum_params[0],c=this.datum_params[1],f=this.datum_params[2],g=this.datum_params[3],h=this.datum_params[4],i=this.datum_params[5],j=this.datum_params[6],k=j*(a.x-i*a.y+h*a.z)+b,l=j*(i*a.x+a.y-g*a.z)+c,m=j*(-h*a.x+g*a.y+a.z)+f;a.x=k,a.y=l,a.z=m}},geocentric_from_wgs84:function(a){if(this.datum_type===d)a.x-=this.datum_params[0],a.y-=this.datum_params[1],a.z-=this.datum_params[2];else if(this.datum_type===e){var b=this.datum_params[0],c=this.datum_params[1],f=this.datum_params[2],g=this.datum_params[3],h=this.datum_params[4],i=this.datum_params[5],j=this.datum_params[6],k=(a.x-b)/j,l=(a.y-c)/j,m=(a.z-f)/j;a.x=k+i*l-h*m,a.y=-i*k+l+g*m,a.z=h*k-g*l+m}}},b.exports=l},{}],30:[function(a,b){var c=1,d=2,e=3,f=5,g=6378137,h=.006694379990141316;b.exports=function(a,b,i){function j(a){return a===c||a===d}var k,l,m;if(a.compare_datums(b))return i;if(a.datum_type===f||b.datum_type===f)return i;var n=a.a,o=a.es,p=b.a,q=b.es,r=a.datum_type;if(r===e)if(0===this.apply_gridshift(a,0,i))a.a=g,a.es=h;else{if(!a.datum_params)return a.a=n,a.es=a.es,i;for(k=1,l=0,m=a.datum_params.length;m>l;l++)k*=a.datum_params[l];if(0===k)return a.a=n,a.es=a.es,i;r=a.datum_params.length>3?d:c}return b.datum_type===e&&(b.a=g,b.es=h),(a.es!==b.es||a.a!==b.a||j(r)||j(b.datum_type))&&(a.geodetic_to_geocentric(i),j(a.datum_type)&&a.geocentric_to_wgs84(i),j(b.datum_type)&&b.geocentric_from_wgs84(i),b.geocentric_to_geodetic(i)),b.datum_type===e&&this.apply_gridshift(b,1,i),a.a=n,a.es=o,b.a=p,b.es=q,i}},{}],31:[function(a,b){function c(a){var b=this;if(2===arguments.length){var d=arguments[1];c[a]="string"==typeof d?"+"===d[0]?e(arguments[1]):f(arguments[1]):d}else if(1===arguments.length){if(Array.isArray(a))return a.map(function(a){Array.isArray(a)?c.apply(b,a):c(a)});if("string"==typeof a){if(a in c)return c[a]}else"EPSG"in a?c["EPSG:"+a.EPSG]=a:"ESRI"in a?c["ESRI:"+a.ESRI]=a:"IAU2000"in a?c["IAU2000:"+a.IAU2000]=a:console.log(a);return}}var d=a("./global"),e=a("./projString"),f=a("./wkt");d(c),b.exports=c},{"./global":34,"./projString":37,"./wkt":65}],32:[function(a,b){var c=a("./constants/Datum"),d=a("./constants/Ellipsoid"),e=a("./extend"),f=a("./datum"),g=1e-10,h=.16666666666666666,i=.04722222222222222,j=.022156084656084655;b.exports=function(a){if(a.datumCode&&"none"!==a.datumCode){var b=c[a.datumCode];b&&(a.datum_params=b.towgs84?b.towgs84.split(","):null,a.ellps=b.ellipse,a.datumName=b.datumName?b.datumName:a.datumCode)}if(!a.a){var k=d[a.ellps]?d[a.ellps]:d.WGS84;e(a,k)}return a.rf&&!a.b&&(a.b=(1-1/a.rf)*a.a),(0===a.rf||Math.abs(a.a-a.b)<g)&&(a.sphere=!0,a.b=a.a),a.a2=a.a*a.a,a.b2=a.b*a.b,a.es=(a.a2-a.b2)/a.a2,a.e=Math.sqrt(a.es),a.R_A&&(a.a*=1-a.es*(h+a.es*(i+a.es*j)),a.a2=a.a*a.a,a.b2=a.b*a.b,a.es=0),a.ep2=(a.a2-a.b2)/a.b2,a.k0||(a.k0=1),a.axis||(a.axis="enu"),a.datum=f(a),a}},{"./constants/Datum":25,"./constants/Ellipsoid":26,"./datum":29,"./extend":33}],33:[function(a,b){b.exports=function(a,b){a=a||{};var c,d;if(!b)return a;for(d in b)c=b[d],void 0!==c&&(a[d]=c);return a}},{}],34:[function(a,b){b.exports=function(a){a("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),a("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),a("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),a.WGS84=a["EPSG:4326"],a["EPSG:3785"]=a["EPSG:3857"],a.GOOGLE=a["EPSG:3857"],a["EPSG:900913"]=a["EPSG:3857"],a["EPSG:102113"]=a["EPSG:3857"]}},{}],35:[function(a,b){var proj4=a("./core");proj4.defaultDatum="WGS84",proj4.Proj=a("./Proj"),proj4.WGS84=new proj4.Proj("WGS84"),proj4.Point=a("./Point"),proj4.toPoint=a("./common/toPoint"),proj4.defs=a("./defs"),proj4.transform=a("./transform"),proj4.mgrs=a("mgrs"),proj4.version=a("../package.json").version,a("./includedProjections")(proj4),b.exports=proj4},{"../package.json":67,"./Point":1,"./Proj":2,"./common/toPoint":23,"./core":28,"./defs":31,"./includedProjections":"gWUPNW","./transform":64,mgrs:66}],36:[function(a,b){function c(a){return"string"==typeof a}function d(a){return a in h}function e(a){var b=["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"];return b.reduce(function(b,c){return b+1+a.indexOf(c)},0)}function f(a){return"+"===a[0]}function g(a){return c(a)?d(a)?h[a]:e(a)?i(a):f(a)?j(a):void 0:a}var h=a("./defs"),i=a("./wkt"),j=a("./projString");b.exports=g},{"./defs":31,"./projString":37,"./wkt":65}],37:[function(a,b){var c=.017453292519943295,d=a("./constants/PrimeMeridian");b.exports=function(a){var b={},e={};a.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).forEach(function(a){var b=a.split("=");b.push(!0),e[b[0].toLowerCase()]=b[1]});var f,g,h,i={proj:"projName",datum:"datumCode",rf:function(a){b.rf=parseFloat(a,10)},lat_0:function(a){b.lat0=a*c},lat_1:function(a){b.lat1=a*c},lat_2:function(a){b.lat2=a*c},lat_ts:function(a){b.lat_ts=a*c},lon_0:function(a){b.long0=a*c},lon_1:function(a){b.long1=a*c},lon_2:function(a){b.long2=a*c},alpha:function(a){b.alpha=parseFloat(a)*c},lonc:function(a){b.longc=a*c},x_0:function(a){b.x0=parseFloat(a,10)},y_0:function(a){b.y0=parseFloat(a,10)},k_0:function(a){b.k0=parseFloat(a,10)},k:function(a){b.k0=parseFloat(a,10)},r_a:function(){b.R_A=!0},zone:function(a){b.zone=parseInt(a,10)},south:function(){b.utmSouth=!0},towgs84:function(a){b.datum_params=a.split(",").map(function(a){return parseFloat(a,10)})},to_meter:function(a){b.to_meter=parseFloat(a,10)},from_greenwich:function(a){b.from_greenwich=a*c},pm:function(a){b.from_greenwich=(d[a]?d[a]:parseFloat(a,10))*c},nadgrids:function(a){"@null"===a?b.datumCode="none":b.nadgrids=a},axis:function(a){var c="ewnsud";3===a.length&&-1!==c.indexOf(a.substr(0,1))&&-1!==c.indexOf(a.substr(1,1))&&-1!==c.indexOf(a.substr(2,1))&&(b.axis=a)}};for(f in e)g=e[f],f in i?(h=i[f],"function"==typeof h?h(g):b[h]=g):b[f]=g;return"string"==typeof b.datumCode&&"WGS84"!==b.datumCode&&(b.datumCode=b.datumCode.toLowerCase()),b}},{"./constants/PrimeMeridian":27}],38:[function(a,b,c){function d(a,b){var c=g.length;return a.names?(g[c]=a,a.names.forEach(function(a){f[a.toLowerCase()]=c}),this):(console.log(b),!0)}var e=[a("./projections/merc"),a("./projections/longlat")],f={},g=[];c.add=d,c.get=function(a){if(!a)return!1;var b=a.toLowerCase();return"undefined"!=typeof f[b]&&g[f[b]]?g[f[b]]:void 0},c.start=function(){e.forEach(d)}},{"./projections/longlat":50,"./projections/merc":51}],39:[function(a,b,c){var d=1e-10,e=a("../common/msfnz"),f=a("../common/qsfnz"),g=a("../common/adjust_lon"),h=a("../common/asinz");c.init=function(){Math.abs(this.lat1+this.lat2)<d||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=e(this.e3,this.sin_po,this.cos_po),this.qs1=f(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=e(this.e3,this.sin_po,this.cos_po),this.qs2=f(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=f(this.e3,this.sin_po,this.cos_po),this.ns0=Math.abs(this.lat1-this.lat2)>d?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},c.forward=function(a){var b=a.x,c=a.y;this.sin_phi=Math.sin(c),this.cos_phi=Math.cos(c);var d=f(this.e3,this.sin_phi,this.cos_phi),e=this.a*Math.sqrt(this.c-this.ns0*d)/this.ns0,h=this.ns0*g(b-this.long0),i=e*Math.sin(h)+this.x0,j=this.rh-e*Math.cos(h)+this.y0;return a.x=i,a.y=j,a},c.inverse=function(a){var b,c,d,e,f,h;return a.x-=this.x0,a.y=this.rh-a.y+this.y0,this.ns0>=0?(b=Math.sqrt(a.x*a.x+a.y*a.y),d=1):(b=-Math.sqrt(a.x*a.x+a.y*a.y),d=-1),e=0,0!==b&&(e=Math.atan2(d*a.x,d*a.y)),d=b*this.ns0/this.a,this.sphere?h=Math.asin((this.c-d*d)/(2*this.ns0)):(c=(this.c-d*d)/this.ns0,h=this.phi1z(this.e3,c)),f=g(e/this.ns0+this.long0),a.x=f,a.y=h,a},c.phi1z=function(a,b){var c,e,f,g,i,j=h(.5*b);if(d>a)return j;for(var k=a*a,l=1;25>=l;l++)if(c=Math.sin(j),e=Math.cos(j),f=a*c,g=1-f*f,i=.5*g*g/e*(b/(1-k)-c/g+.5/a*Math.log((1-f)/(1+f))),j+=i,Math.abs(i)<=1e-7)return j;return null},c.names=["Albers_Conic_Equal_Area","Albers","aea"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/msfnz":15,"../common/qsfnz":20}],40:[function(a,b,c){var d=a("../common/adjust_lon"),e=Math.PI/2,f=1e-10,g=a("../common/mlfn"),h=a("../common/e0fn"),i=a("../common/e1fn"),j=a("../common/e2fn"),k=a("../common/e3fn"),l=a("../common/gN"),m=a("../common/asinz"),n=a("../common/imlfn");c.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},c.forward=function(a){var b,c,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=a.x,I=a.y,J=Math.sin(a.y),K=Math.cos(a.y),L=d(H-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=f?(a.x=this.x0+this.a*(e-I)*Math.sin(L),a.y=this.y0-this.a*(e-I)*Math.cos(L),a):Math.abs(this.sin_p12+1)<=f?(a.x=this.x0+this.a*(e+I)*Math.sin(L),a.y=this.y0+this.a*(e+I)*Math.cos(L),a):(B=this.sin_p12*J+this.cos_p12*K*Math.cos(L),z=Math.acos(B),A=z/Math.sin(z),a.x=this.x0+this.a*A*K*Math.sin(L),a.y=this.y0+this.a*A*(this.cos_p12*J-this.sin_p12*K*Math.cos(L)),a):(b=h(this.es),c=i(this.es),m=j(this.es),n=k(this.es),Math.abs(this.sin_p12-1)<=f?(o=this.a*g(b,c,m,n,e),p=this.a*g(b,c,m,n,I),a.x=this.x0+(o-p)*Math.sin(L),a.y=this.y0-(o-p)*Math.cos(L),a):Math.abs(this.sin_p12+1)<=f?(o=this.a*g(b,c,m,n,e),p=this.a*g(b,c,m,n,I),a.x=this.x0+(o+p)*Math.sin(L),a.y=this.y0+(o+p)*Math.cos(L),a):(q=J/K,r=l(this.a,this.e,this.sin_p12),s=l(this.a,this.e,J),t=Math.atan((1-this.es)*q+this.es*r*this.sin_p12/(s*K)),u=Math.atan2(Math.sin(L),this.cos_p12*Math.tan(t)-this.sin_p12*Math.cos(L)),C=0===u?Math.asin(this.cos_p12*Math.sin(t)-this.sin_p12*Math.cos(t)):Math.abs(Math.abs(u)-Math.PI)<=f?-Math.asin(this.cos_p12*Math.sin(t)-this.sin_p12*Math.cos(t)):Math.asin(Math.sin(L)*Math.cos(t)/Math.sin(u)),v=this.e*this.sin_p12/Math.sqrt(1-this.es),w=this.e*this.cos_p12*Math.cos(u)/Math.sqrt(1-this.es),x=v*w,y=w*w,D=C*C,E=D*C,F=E*C,G=F*C,z=r*C*(1-D*y*(1-y)/6+E/8*x*(1-2*y)+F/120*(y*(4-7*y)-3*v*v*(1-7*y))-G/48*x),a.x=this.x0+z*Math.sin(u),a.y=this.y0+z*Math.cos(u),a))},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;if(this.sphere){if(b=Math.sqrt(a.x*a.x+a.y*a.y),b>2*e*this.a)return;return c=b/this.a,o=Math.sin(c),p=Math.cos(c),q=this.long0,Math.abs(b)<=f?r=this.lat0:(r=m(p*this.sin_p12+a.y*o*this.cos_p12/b),s=Math.abs(this.lat0)-e,q=d(Math.abs(s)<=f?this.lat0>=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y):this.long0+Math.atan2(a.x*o,b*this.cos_p12*p-a.y*this.sin_p12*o))),a.x=q,a.y=r,a}return t=h(this.es),u=i(this.es),v=j(this.es),w=k(this.es),Math.abs(this.sin_p12-1)<=f?(x=this.a*g(t,u,v,w,e),b=Math.sqrt(a.x*a.x+a.y*a.y),y=x-b,r=n(y/this.a,t,u,v,w),q=d(this.long0+Math.atan2(a.x,-1*a.y)),a.x=q,a.y=r,a):Math.abs(this.sin_p12+1)<=f?(x=this.a*g(t,u,v,w,e),b=Math.sqrt(a.x*a.x+a.y*a.y),y=b-x,r=n(y/this.a,t,u,v,w),q=d(this.long0+Math.atan2(a.x,a.y)),a.x=q,a.y=r,a):(b=Math.sqrt(a.x*a.x+a.y*a.y),B=Math.atan2(a.x,a.y),z=l(this.a,this.e,this.sin_p12),C=Math.cos(B),D=this.e*this.cos_p12*C,E=-D*D/(1-this.es),F=3*this.es*(1-E)*this.sin_p12*this.cos_p12*C/(1-this.es),G=b/z,H=G-E*(1+E)*Math.pow(G,3)/6-F*(1+3*E)*Math.pow(G,4)/24,I=1-E*H*H/2-G*H*H*H/6,A=Math.asin(this.sin_p12*Math.cos(H)+this.cos_p12*Math.sin(H)*C),q=d(this.long0+Math.asin(Math.sin(B)*Math.sin(H)/Math.cos(A))),r=Math.atan((1-this.es*I*this.sin_p12/Math.sin(A))*Math.tan(A)/(1-this.es)),a.x=q,a.y=r,a)},c.names=["Azimuthal_Equidistant","aeqd"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],41:[function(a,b,c){var d=a("../common/mlfn"),e=a("../common/e0fn"),f=a("../common/e1fn"),g=a("../common/e2fn"),h=a("../common/e3fn"),i=a("../common/gN"),j=a("../common/adjust_lon"),k=a("../common/adjust_lat"),l=a("../common/imlfn"),m=Math.PI/2,n=1e-10;c.init=function(){this.sphere||(this.e0=e(this.es),this.e1=f(this.es),this.e2=g(this.es),this.e3=h(this.es),this.ml0=this.a*d(this.e0,this.e1,this.e2,this.e3,this.lat0))},c.forward=function(a){var b,c,e=a.x,f=a.y;if(e=j(e-this.long0),this.sphere)b=this.a*Math.asin(Math.cos(f)*Math.sin(e)),c=this.a*(Math.atan2(Math.tan(f),Math.cos(e))-this.lat0);else{var g=Math.sin(f),h=Math.cos(f),k=i(this.a,this.e,g),l=Math.tan(f)*Math.tan(f),m=e*Math.cos(f),n=m*m,o=this.es*h*h/(1-this.es),p=this.a*d(this.e0,this.e1,this.e2,this.e3,f);b=k*m*(1-n*l*(1/6-(8-l+8*o)*n/120)),c=p-this.ml0+k*g/h*n*(.5+(5-l+6*o)*n/24)}return a.x=b+this.x0,a.y=c+this.y0,a},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,d=a.x/this.a,e=a.y/this.a;if(this.sphere){var f=e+this.lat0;b=Math.asin(Math.sin(f)*Math.cos(d)),c=Math.atan2(Math.tan(d),Math.cos(f))}else{var g=this.ml0/this.a+e,h=l(g,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(h)-m)<=n)return a.x=this.long0,a.y=m,0>e&&(a.y*=-1),a;var o=i(this.a,this.e,Math.sin(h)),p=o*o*o/this.a/this.a*(1-this.es),q=Math.pow(Math.tan(h),2),r=d*this.a/o,s=r*r;b=h-o*Math.tan(h)/p*r*r*(.5-(1+3*q)*r*r/24),c=r*(1-s*(q/3+(1+3*q)*q*s/15))/Math.cos(h)}return a.x=j(c+this.long0),a.y=k(b),a},c.names=["Cassini","Cassini_Soldner","cass"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],42:[function(a,b,c){var d=a("../common/adjust_lon"),e=a("../common/qsfnz"),f=a("../common/msfnz"),g=a("../common/iqsfnz");c.init=function(){this.sphere||(this.k0=f(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},c.forward=function(a){var b,c,f=a.x,g=a.y,h=d(f-this.long0);if(this.sphere)b=this.x0+this.a*h*Math.cos(this.lat_ts),c=this.y0+this.a*Math.sin(g)/Math.cos(this.lat_ts);else{var i=e(this.e,Math.sin(g));b=this.x0+this.a*this.k0*h,c=this.y0+this.a*i*.5/this.k0}return a.x=b,a.y=c,a},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c;return this.sphere?(b=d(this.long0+a.x/this.a/Math.cos(this.lat_ts)),c=Math.asin(a.y/this.a*Math.cos(this.lat_ts))):(c=g(this.e,2*a.y*this.k0/this.a),b=d(this.long0+a.x/(this.a*this.k0))),a.x=b,a.y=c,a},c.names=["cea"]},{"../common/adjust_lon":5,"../common/iqsfnz":13,"../common/msfnz":15,"../common/qsfnz":20}],43:[function(a,b,c){var d=a("../common/adjust_lon"),e=a("../common/adjust_lat");c.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},c.forward=function(a){var b=a.x,c=a.y,f=d(b-this.long0),g=e(c-this.lat0);return a.x=this.x0+this.a*f*this.rc,a.y=this.y0+this.a*g,a},c.inverse=function(a){var b=a.x,c=a.y;return a.x=d(this.long0+(b-this.x0)/(this.a*this.rc)),a.y=e(this.lat0+(c-this.y0)/this.a),a},c.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5}],44:[function(a,b,c){var d=a("../common/e0fn"),e=a("../common/e1fn"),f=a("../common/e2fn"),g=a("../common/e3fn"),h=a("../common/msfnz"),i=a("../common/mlfn"),j=a("../common/adjust_lon"),k=a("../common/adjust_lat"),l=a("../common/imlfn"),m=1e-10;c.init=function(){Math.abs(this.lat1+this.lat2)<m||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=d(this.es),this.e1=e(this.es),this.e2=f(this.es),this.e3=g(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=h(this.e,this.sinphi,this.cosphi),this.ml1=i(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<m?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=h(this.e,this.sinphi,this.cosphi),this.ml2=i(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=i(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},c.forward=function(a){var b,c=a.x,d=a.y;if(this.sphere)b=this.a*(this.g-d);else{var e=i(this.e0,this.e1,this.e2,this.e3,d);b=this.a*(this.g-e)}var f=this.ns*j(c-this.long0),g=this.x0+b*Math.sin(f),h=this.y0+this.rh-b*Math.cos(f);return a.x=g,a.y=h,a},c.inverse=function(a){a.x-=this.x0,a.y=this.rh-a.y+this.y0;var b,c,d,e;this.ns>=0?(c=Math.sqrt(a.x*a.x+a.y*a.y),b=1):(c=-Math.sqrt(a.x*a.x+a.y*a.y),b=-1);var f=0;if(0!==c&&(f=Math.atan2(b*a.x,b*a.y)),this.sphere)return e=j(this.long0+f/this.ns),d=k(this.g-c/this.a),a.x=e,a.y=d,a;var g=this.g-c/this.a;return d=l(g,this.e0,this.e1,this.e2,this.e3),e=j(this.long0+f/this.ns),a.x=e,a.y=d,a},c.names=["Equidistant_Conic","eqdc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/imlfn":12,"../common/mlfn":14,"../common/msfnz":15}],45:[function(a,b,c){var d=Math.PI/4,e=a("../common/srat"),f=Math.PI/2,g=20;c.init=function(){var a=Math.sin(this.lat0),b=Math.cos(this.lat0);b*=b,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*b*b/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+d)/(Math.pow(Math.tan(.5*this.lat0+d),this.C)*e(this.e*a,this.ratexp))},c.forward=function(a){var b=a.x,c=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*c+d),this.C)*e(this.e*Math.sin(c),this.ratexp))-f,a.x=this.C*b,a},c.inverse=function(a){for(var b=1e-14,c=a.x/this.C,h=a.y,i=Math.pow(Math.tan(.5*h+d)/this.K,1/this.C),j=g;j>0&&(h=2*Math.atan(i*e(this.e*Math.sin(a.y),-.5*this.e))-f,!(Math.abs(h-a.y)<b));--j)a.y=h;return j?(a.x=c,a.y=h,a):null},c.names=["gauss"]},{"../common/srat":22}],46:[function(a,b,c){var d=a("../common/adjust_lon"),e=1e-10,f=a("../common/asinz");c.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},c.forward=function(a){var b,c,f,g,h,i,j,k,l=a.x,m=a.y;return f=d(l-this.long0),b=Math.sin(m),c=Math.cos(m),g=Math.cos(f),i=this.sin_p14*b+this.cos_p14*c*g,h=1,i>0||Math.abs(i)<=e?(j=this.x0+this.a*h*c*Math.sin(f)/i,k=this.y0+this.a*h*(this.cos_p14*b-this.sin_p14*c*g)/i):(j=this.x0+this.infinity_dist*c*Math.sin(f),k=this.y0+this.infinity_dist*(this.cos_p14*b-this.sin_p14*c*g)),a.x=j,a.y=k,a
},c.inverse=function(a){var b,c,e,g,h,i;return a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,(b=Math.sqrt(a.x*a.x+a.y*a.y))?(g=Math.atan2(b,this.rc),c=Math.sin(g),e=Math.cos(g),i=f(e*this.sin_p14+a.y*c*this.cos_p14/b),h=Math.atan2(a.x*c,b*this.cos_p14*e-a.y*this.sin_p14*c),h=d(this.long0+h)):(i=this.phic0,h=0),a.x=h,a.y=i,a},c.names=["gnom"]},{"../common/adjust_lon":5,"../common/asinz":6}],47:[function(a,b,c){var d=a("../common/adjust_lon");c.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},c.forward=function(a){var b,c,e,f,g,h,i,j=a.x,k=a.y,l=d(j-this.long0);return b=Math.pow((1+this.e*Math.sin(k))/(1-this.e*Math.sin(k)),this.alfa*this.e/2),c=2*(Math.atan(this.k*Math.pow(Math.tan(k/2+this.s45),this.alfa)/b)-this.s45),e=-l*this.alfa,f=Math.asin(Math.cos(this.ad)*Math.sin(c)+Math.sin(this.ad)*Math.cos(c)*Math.cos(e)),g=Math.asin(Math.cos(c)*Math.sin(e)/Math.cos(f)),h=this.n*g,i=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(f/2+this.s45),this.n),a.y=i*Math.cos(h)/1,a.x=i*Math.sin(h)/1,this.czech||(a.y*=-1,a.x*=-1),a},c.inverse=function(a){var b,c,d,e,f,g,h,i,j=a.x;a.x=a.y,a.y=j,this.czech||(a.y*=-1,a.x*=-1),g=Math.sqrt(a.x*a.x+a.y*a.y),f=Math.atan2(a.y,a.x),e=f/Math.sin(this.s0),d=2*(Math.atan(Math.pow(this.ro0/g,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),b=Math.asin(Math.cos(this.ad)*Math.sin(d)-Math.sin(this.ad)*Math.cos(d)*Math.cos(e)),c=Math.asin(Math.cos(d)*Math.sin(e)/Math.cos(b)),a.x=this.long0-c/this.alfa,h=b,i=0;var k=0;do a.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(b/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.e/2))-this.s45),Math.abs(h-a.y)<1e-10&&(i=1),h=a.y,k+=1;while(0===i&&15>k);return k>=15?null:a},c.names=["Krovak","krovak"]},{"../common/adjust_lon":5}],48:[function(a,b,c){var d=Math.PI/2,e=Math.PI/4,f=1e-10,g=a("../common/qsfnz"),h=a("../common/adjust_lon");c.S_POLE=1,c.N_POLE=2,c.EQUIT=3,c.OBLIQ=4,c.init=function(){var a=Math.abs(this.lat0);if(this.mode=Math.abs(a-d)<f?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(a)<f?this.EQUIT:this.OBLIQ,this.es>0){var b;switch(this.qp=g(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),b=Math.sin(this.lat0),this.sinb1=g(this.e,b)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*b*b)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},c.forward=function(a){var b,c,i,j,k,l,m,n,o,p,q=a.x,r=a.y;if(q=h(q-this.long0),this.sphere){if(k=Math.sin(r),p=Math.cos(r),i=Math.cos(q),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c=this.mode===this.EQUIT?1+p*i:1+this.sinph0*k+this.cosph0*p*i,f>=c)return null;c=Math.sqrt(2/c),b=c*p*Math.sin(q),c*=this.mode===this.EQUIT?k:this.cosph0*k-this.sinph0*p*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(r+this.phi0)<f)return null;c=e-.5*r,c=2*(this.mode===this.S_POLE?Math.cos(c):Math.sin(c)),b=c*Math.sin(q),c*=i}}else{switch(m=0,n=0,o=0,i=Math.cos(q),j=Math.sin(q),k=Math.sin(r),l=g(this.e,k),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(m=l/this.qp,n=Math.sqrt(1-m*m)),this.mode){case this.OBLIQ:o=1+this.sinb1*m+this.cosb1*n*i;break;case this.EQUIT:o=1+n*i;break;case this.N_POLE:o=d+r,l=this.qp-l;break;case this.S_POLE:o=r-d,l=this.qp+l}if(Math.abs(o)<f)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:o=Math.sqrt(2/o),c=this.mode===this.OBLIQ?this.ymf*o*(this.cosb1*m-this.sinb1*n*i):(o=Math.sqrt(2/(1+n*i)))*m*this.ymf,b=this.xmf*o*n*j;break;case this.N_POLE:case this.S_POLE:l>=0?(b=(o=Math.sqrt(l))*j,c=i*(this.mode===this.S_POLE?o:-o)):b=c=0}}return a.x=this.a*b+this.x0,a.y=this.a*c+this.y0,a},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,e,g,i,j,k,l=a.x/this.a,m=a.y/this.a;if(this.sphere){var n,o=0,p=0;if(n=Math.sqrt(l*l+m*m),c=.5*n,c>1)return null;switch(c=2*Math.asin(c),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(p=Math.sin(c),o=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(n)<=f?0:Math.asin(m*p/n),l*=p,m=o*n;break;case this.OBLIQ:c=Math.abs(n)<=f?this.phi0:Math.asin(o*this.sinph0+m*p*this.cosph0/n),l*=p*this.cosph0,m=(o-Math.sin(c)*this.sinph0)*n;break;case this.N_POLE:m=-m,c=d-c;break;case this.S_POLE:c-=d}b=0!==m||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,m):0}else{if(k=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,m*=this.dd,j=Math.sqrt(l*l+m*m),f>j)return a.x=0,a.y=this.phi0,a;g=2*Math.asin(.5*j/this.rq),e=Math.cos(g),l*=g=Math.sin(g),this.mode===this.OBLIQ?(k=e*this.sinb1+m*g*this.cosb1/j,i=this.qp*k,m=j*this.cosb1*e-m*this.sinb1*g):(k=m*g/j,i=this.qp*k,m=j*e)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(m=-m),i=l*l+m*m,!i)return a.x=0,a.y=this.phi0,a;k=1-i/this.qp,this.mode===this.S_POLE&&(k=-k)}b=Math.atan2(l,m),c=this.authlat(Math.asin(k),this.apa)}return a.x=h(this.long0+b),a.y=c,a},c.P00=.3333333333333333,c.P01=.17222222222222222,c.P02=.10257936507936508,c.P10=.06388888888888888,c.P11=.0664021164021164,c.P20=.016415012942191543,c.authset=function(a){var b,c=[];return c[0]=a*this.P00,b=a*a,c[0]+=b*this.P01,c[1]=b*this.P10,b*=a,c[0]+=b*this.P02,c[1]+=b*this.P11,c[2]=b*this.P20,c},c.authlat=function(a,b){var c=a+a;return a+b[0]*Math.sin(c)+b[1]*Math.sin(c+c)+b[2]*Math.sin(c+c+c)},c.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},{"../common/adjust_lon":5,"../common/qsfnz":20}],49:[function(a,b,c){var d=1e-10,e=a("../common/msfnz"),f=a("../common/tsfnz"),g=Math.PI/2,h=a("../common/sign"),i=a("../common/adjust_lon"),j=a("../common/phi2z");c.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<d)){var a=this.b/this.a;this.e=Math.sqrt(1-a*a);var b=Math.sin(this.lat1),c=Math.cos(this.lat1),g=e(this.e,b,c),h=f(this.e,this.lat1,b),i=Math.sin(this.lat2),j=Math.cos(this.lat2),k=e(this.e,i,j),l=f(this.e,this.lat2,i),m=f(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>d?Math.log(g/k)/Math.log(h/l):b,isNaN(this.ns)&&(this.ns=b),this.f0=g/(this.ns*Math.pow(h,this.ns)),this.rh=this.a*this.f0*Math.pow(m,this.ns),this.title||(this.title="Lambert Conformal Conic")}},c.forward=function(a){var b=a.x,c=a.y;Math.abs(2*Math.abs(c)-Math.PI)<=d&&(c=h(c)*(g-2*d));var e,j,k=Math.abs(Math.abs(c)-g);if(k>d)e=f(this.e,c,Math.sin(c)),j=this.a*this.f0*Math.pow(e,this.ns);else{if(k=c*this.ns,0>=k)return null;j=0}var l=this.ns*i(b-this.long0);return a.x=this.k0*j*Math.sin(l)+this.x0,a.y=this.k0*(this.rh-j*Math.cos(l))+this.y0,a},c.inverse=function(a){var b,c,d,e,f,h=(a.x-this.x0)/this.k0,k=this.rh-(a.y-this.y0)/this.k0;this.ns>0?(b=Math.sqrt(h*h+k*k),c=1):(b=-Math.sqrt(h*h+k*k),c=-1);var l=0;if(0!==b&&(l=Math.atan2(c*h,c*k)),0!==b||this.ns>0){if(c=1/this.ns,d=Math.pow(b/(this.a*this.f0),c),e=j(this.e,d),-9999===e)return null}else e=-g;return f=i(l/this.ns+this.long0),a.x=f,a.y=e,a},c.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],50:[function(a,b,c){function d(a){return a}c.init=function(){},c.forward=d,c.inverse=d,c.names=["longlat","identity"]},{}],51:[function(a,b,c){var d=a("../common/msfnz"),e=Math.PI/2,f=1e-10,g=57.29577951308232,h=a("../common/adjust_lon"),i=Math.PI/4,j=a("../common/tsfnz"),k=a("../common/phi2z");c.init=function(){var a=this.b/this.a;this.es=1-a*a,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):d(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},c.forward=function(a){var b=a.x,c=a.y;if(c*g>90&&-90>c*g&&b*g>180&&-180>b*g)return null;var d,k;if(Math.abs(Math.abs(c)-e)<=f)return null;if(this.sphere)d=this.x0+this.a*this.k0*h(b-this.long0),k=this.y0+this.a*this.k0*Math.log(Math.tan(i+.5*c));else{var l=Math.sin(c),m=j(this.e,c,l);d=this.x0+this.a*this.k0*h(b-this.long0),k=this.y0-this.a*this.k0*Math.log(m)}return a.x=d,a.y=k,a},c.inverse=function(a){var b,c,d=a.x-this.x0,f=a.y-this.y0;if(this.sphere)c=e-2*Math.atan(Math.exp(-f/(this.a*this.k0)));else{var g=Math.exp(-f/(this.a*this.k0));if(c=k(this.e,g),-9999===c)return null}return b=h(this.long0+d/(this.a*this.k0)),a.x=b,a.y=c,a},c.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/tsfnz":24}],52:[function(a,b,c){var d=a("../common/adjust_lon");c.init=function(){},c.forward=function(a){var b=a.x,c=a.y,e=d(b-this.long0),f=this.x0+this.a*e,g=this.y0+this.a*Math.log(Math.tan(Math.PI/4+c/2.5))*1.25;return a.x=f,a.y=g,a},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b=d(this.long0+a.x/this.a),c=2.5*(Math.atan(Math.exp(.8*a.y/this.a))-Math.PI/4);return a.x=b,a.y=c,a},c.names=["Miller_Cylindrical","mill"]},{"../common/adjust_lon":5}],53:[function(a,b,c){var d=a("../common/adjust_lon"),e=1e-10;c.init=function(){},c.forward=function(a){for(var b=a.x,c=a.y,f=d(b-this.long0),g=c,h=Math.PI*Math.sin(c),i=0;!0;i++){var j=-(g+Math.sin(g)-h)/(1+Math.cos(g));if(g+=j,Math.abs(j)<e)break}g/=2,Math.PI/2-Math.abs(c)<e&&(f=0);var k=.900316316158*this.a*f*Math.cos(g)+this.x0,l=1.4142135623731*this.a*Math.sin(g)+this.y0;return a.x=k,a.y=l,a},c.inverse=function(a){var b,c;a.x-=this.x0,a.y-=this.y0,c=a.y/(1.4142135623731*this.a),Math.abs(c)>.999999999999&&(c=.999999999999),b=Math.asin(c);var e=d(this.long0+a.x/(.900316316158*this.a*Math.cos(b)));e<-Math.PI&&(e=-Math.PI),e>Math.PI&&(e=Math.PI),c=(2*b+Math.sin(2*b))/Math.PI,Math.abs(c)>1&&(c=1);var f=Math.asin(c);return a.x=e,a.y=f,a},c.names=["Mollweide","moll"]},{"../common/adjust_lon":5}],54:[function(a,b,c){var d=484813681109536e-20;c.iterations=1,c.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},c.forward=function(a){var b,c=a.x,e=a.y,f=e-this.lat0,g=c-this.long0,h=f/d*1e-5,i=g,j=1,k=0;for(b=1;10>=b;b++)j*=h,k+=this.A[b]*j;var l,m,n=k,o=i,p=1,q=0,r=0,s=0;for(b=1;6>=b;b++)l=p*n-q*o,m=q*n+p*o,p=l,q=m,r=r+this.B_re[b]*p-this.B_im[b]*q,s=s+this.B_im[b]*p+this.B_re[b]*q;return a.x=s*this.a+this.x0,a.y=r*this.a+this.y0,a},c.inverse=function(a){var b,c,e,f=a.x,g=a.y,h=f-this.x0,i=g-this.y0,j=i/this.a,k=h/this.a,l=1,m=0,n=0,o=0;for(b=1;6>=b;b++)c=l*j-m*k,e=m*j+l*k,l=c,m=e,n=n+this.C_re[b]*l-this.C_im[b]*m,o=o+this.C_im[b]*l+this.C_re[b]*m;for(var p=0;p<this.iterations;p++){var q,r,s=n,t=o,u=j,v=k;for(b=2;6>=b;b++)q=s*n-t*o,r=t*n+s*o,s=q,t=r,u+=(b-1)*(this.B_re[b]*s-this.B_im[b]*t),v+=(b-1)*(this.B_im[b]*s+this.B_re[b]*t);s=1,t=0;var w=this.B_re[1],x=this.B_im[1];for(b=2;6>=b;b++)q=s*n-t*o,r=t*n+s*o,s=q,t=r,w+=b*(this.B_re[b]*s-this.B_im[b]*t),x+=b*(this.B_im[b]*s+this.B_re[b]*t);var y=w*w+x*x;n=(u*w+v*x)/y,o=(v*w-u*x)/y}var z=n,A=o,B=1,C=0;for(b=1;9>=b;b++)B*=z,C+=this.D[b]*B;var D=this.lat0+C*d*1e5,E=this.long0+A;return a.x=E,a.y=D,a},c.names=["New_Zealand_Map_Grid","nzmg"]},{}],55:[function(a,b,c){var d=a("../common/tsfnz"),e=a("../common/adjust_lon"),f=a("../common/phi2z"),g=Math.PI/2,h=Math.PI/4,i=1e-10;c.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var a=Math.sin(this.lat0),b=Math.cos(this.lat0),c=this.e*a;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(b,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-c*c);var f=d(this.e,this.lat0,a),g=this.bl/b*Math.sqrt((1-this.es)/(1-c*c));1>g*g&&(g=1);var h,i;if(isNaN(this.longc)){var j=d(this.e,this.lat1,Math.sin(this.lat1)),k=d(this.e,this.lat2,Math.sin(this.lat2));this.el=this.lat0>=0?(g+Math.sqrt(g*g-1))*Math.pow(f,this.bl):(g-Math.sqrt(g*g-1))*Math.pow(f,this.bl);var l=Math.pow(j,this.bl),m=Math.pow(k,this.bl);h=this.el/l,i=.5*(h-1/h);var n=(this.el*this.el-m*l)/(this.el*this.el+m*l),o=(m-l)/(m+l),p=e(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(n*Math.tan(.5*this.bl*p)/o)/this.bl,this.long0=e(this.long0);var q=e(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*q)/i),this.alpha=Math.asin(g*Math.sin(this.gamma0))}else h=this.lat0>=0?g+Math.sqrt(g*g-1):g-Math.sqrt(g*g-1),this.el=h*Math.pow(f,this.bl),i=.5*(h-1/h),this.gamma0=Math.asin(Math.sin(this.alpha)/g),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.uc=this.no_off?0:this.lat0>=0?this.al/this.bl*Math.atan2(Math.sqrt(g*g-1),Math.cos(this.alpha)):-1*this.al/this.bl*Math.atan2(Math.sqrt(g*g-1),Math.cos(this.alpha))},c.forward=function(a){var b,c,f,j=a.x,k=a.y,l=e(j-this.long0);if(Math.abs(Math.abs(k)-g)<=i)f=k>0?-1:1,c=this.al/this.bl*Math.log(Math.tan(h+f*this.gamma0*.5)),b=-1*f*g*this.al/this.bl;else{var m=d(this.e,k,Math.sin(k)),n=this.el/Math.pow(m,this.bl),o=.5*(n-1/n),p=.5*(n+1/n),q=Math.sin(this.bl*l),r=(o*Math.sin(this.gamma0)-q*Math.cos(this.gamma0))/p;c=Math.abs(Math.abs(r)-1)<=i?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-r)/(1+r))/this.bl,b=Math.abs(Math.cos(this.bl*l))<=i?this.al*this.bl*l:this.al*Math.atan2(o*Math.cos(this.gamma0)+q*Math.sin(this.gamma0),Math.cos(this.bl*l))/this.bl}return this.no_rot?(a.x=this.x0+b,a.y=this.y0+c):(b-=this.uc,a.x=this.x0+c*Math.cos(this.alpha)+b*Math.sin(this.alpha),a.y=this.y0+b*Math.cos(this.alpha)-c*Math.sin(this.alpha)),a},c.inverse=function(a){var b,c;this.no_rot?(c=a.y-this.y0,b=a.x-this.x0):(c=(a.x-this.x0)*Math.cos(this.alpha)-(a.y-this.y0)*Math.sin(this.alpha),b=(a.y-this.y0)*Math.cos(this.alpha)+(a.x-this.x0)*Math.sin(this.alpha),b+=this.uc);var d=Math.exp(-1*this.bl*c/this.al),h=.5*(d-1/d),j=.5*(d+1/d),k=Math.sin(this.bl*b/this.al),l=(k*Math.cos(this.gamma0)+h*Math.sin(this.gamma0))/j,m=Math.pow(this.el/Math.sqrt((1+l)/(1-l)),1/this.bl);return Math.abs(l-1)<i?(a.x=this.long0,a.y=g):Math.abs(l+1)<i?(a.x=this.long0,a.y=-1*g):(a.y=f(this.e,m),a.x=e(this.long0-Math.atan2(h*Math.cos(this.gamma0)-k*Math.sin(this.gamma0),Math.cos(this.bl*b/this.al))/this.bl)),a},c.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},{"../common/adjust_lon":5,"../common/phi2z":16,"../common/tsfnz":24}],56:[function(a,b,c){var d=a("../common/e0fn"),e=a("../common/e1fn"),f=a("../common/e2fn"),g=a("../common/e3fn"),h=a("../common/adjust_lon"),i=a("../common/adjust_lat"),j=a("../common/mlfn"),k=1e-10,l=a("../common/gN"),m=20;c.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=d(this.es),this.e1=e(this.es),this.e2=f(this.es),this.e3=g(this.es),this.ml0=this.a*j(this.e0,this.e1,this.e2,this.e3,this.lat0)},c.forward=function(a){var b,c,d,e=a.x,f=a.y,g=h(e-this.long0);if(d=g*Math.sin(f),this.sphere)Math.abs(f)<=k?(b=this.a*g,c=-1*this.a*this.lat0):(b=this.a*Math.sin(d)/Math.tan(f),c=this.a*(i(f-this.lat0)+(1-Math.cos(d))/Math.tan(f)));else if(Math.abs(f)<=k)b=this.a*g,c=-1*this.ml0;else{var m=l(this.a,this.e,Math.sin(f))/Math.tan(f);b=m*Math.sin(d),c=this.a*j(this.e0,this.e1,this.e2,this.e3,f)-this.ml0+m*(1-Math.cos(d))}return a.x=b+this.x0,a.y=c+this.y0,a},c.inverse=function(a){var b,c,d,e,f,g,i,l,n;if(d=a.x-this.x0,e=a.y-this.y0,this.sphere)if(Math.abs(e+this.a*this.lat0)<=k)b=h(d/this.a+this.long0),c=0;else{g=this.lat0+e/this.a,i=d*d/this.a/this.a+g*g,l=g;var o;for(f=m;f;--f)if(o=Math.tan(l),n=-1*(g*(l*o+1)-l-.5*(l*l+i)*o)/((l-g)/o-1),l+=n,Math.abs(n)<=k){c=l;break}b=h(this.long0+Math.asin(d*Math.tan(l)/this.a)/Math.sin(c))}else if(Math.abs(e+this.ml0)<=k)c=0,b=h(this.long0+d/this.a);else{g=(this.ml0+e)/this.a,i=d*d/this.a/this.a+g*g,l=g;var p,q,r,s,t;for(f=m;f;--f)if(t=this.e*Math.sin(l),p=Math.sqrt(1-t*t)*Math.tan(l),q=this.a*j(this.e0,this.e1,this.e2,this.e3,l),r=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),s=q/this.a,n=(g*(p*s+1)-s-.5*p*(s*s+i))/(this.es*Math.sin(2*l)*(s*s+i-2*g*s)/(4*p)+(g-s)*(p*r-2/Math.sin(2*l))-r),l-=n,Math.abs(n)<=k){c=l;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(c),2))*Math.tan(c),b=h(this.long0+Math.asin(d*p/this.a)/Math.sin(c))}return a.x=b,a.y=c,a},c.names=["Polyconic","poly"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/mlfn":14}],57:[function(a,b,c){var d=a("../common/adjust_lon"),e=a("../common/adjust_lat"),f=a("../common/pj_enfn"),g=20,h=a("../common/pj_mlfn"),i=a("../common/pj_inv_mlfn"),j=Math.PI/2,k=1e-10,l=a("../common/asinz");c.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=f(this.es)},c.forward=function(a){var b,c,e=a.x,f=a.y;if(e=d(e-this.long0),this.sphere){if(this.m)for(var i=this.n*Math.sin(f),j=g;j;--j){var l=(this.m*f+Math.sin(f)-i)/(this.m+Math.cos(f));if(f-=l,Math.abs(l)<k)break}else f=1!==this.n?Math.asin(this.n*Math.sin(f)):f;b=this.a*this.C_x*e*(this.m+Math.cos(f)),c=this.a*this.C_y*f}else{var m=Math.sin(f),n=Math.cos(f);c=this.a*h(f,m,n,this.en),b=this.a*e*n/Math.sqrt(1-this.es*m*m)}return a.x=b,a.y=c,a},c.inverse=function(a){var b,c,f,g;return a.x-=this.x0,f=a.x/this.a,a.y-=this.y0,b=a.y/this.a,this.sphere?(b/=this.C_y,f/=this.C_x*(this.m+Math.cos(b)),this.m?b=l((this.m*b+Math.sin(b))/this.n):1!==this.n&&(b=l(Math.sin(b)/this.n)),f=d(f+this.long0),b=e(b)):(b=i(a.y/this.a,this.es,this.en),g=Math.abs(b),j>g?(g=Math.sin(b),c=this.long0+a.x*Math.sqrt(1-this.es*g*g)/(this.a*Math.cos(b)),f=d(c)):j>g-k&&(f=this.long0)),a.x=f,a.y=b,a},c.names=["Sinusoidal","sinu"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/asinz":6,"../common/pj_enfn":17,"../common/pj_inv_mlfn":18,"../common/pj_mlfn":19}],58:[function(a,b,c){c.init=function(){var a=this.lat0;this.lambda0=this.long0;var b=Math.sin(a),c=this.a,d=this.rf,e=1/d,f=2*e-Math.pow(e,2),g=this.e=Math.sqrt(f);this.R=this.k0*c*Math.sqrt(1-f)/(1-f*Math.pow(b,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(a),4)),this.b0=Math.asin(b/this.alpha);var h=Math.log(Math.tan(Math.PI/4+this.b0/2)),i=Math.log(Math.tan(Math.PI/4+a/2)),j=Math.log((1+g*b)/(1-g*b));this.K=h-this.alpha*i+this.alpha*g/2*j},c.forward=function(a){var b=Math.log(Math.tan(Math.PI/4-a.y/2)),c=this.e/2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),d=-this.alpha*(b+c)+this.K,e=2*(Math.atan(Math.exp(d))-Math.PI/4),f=this.alpha*(a.x-this.lambda0),g=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(e)+Math.cos(this.b0)*Math.cos(f))),h=Math.asin(Math.cos(this.b0)*Math.sin(e)-Math.sin(this.b0)*Math.cos(e)*Math.cos(f));return a.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,a.x=this.R*g+this.x0,a},c.inverse=function(a){for(var b=a.x-this.x0,c=a.y-this.y0,d=b/this.R,e=2*(Math.atan(Math.exp(c/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(e)+Math.sin(this.b0)*Math.cos(e)*Math.cos(d)),g=Math.atan(Math.sin(d)/(Math.cos(this.b0)*Math.cos(d)-Math.sin(this.b0)*Math.tan(e))),h=this.lambda0+g/this.alpha,i=0,j=f,k=-1e3,l=0;Math.abs(j-k)>1e-7;){if(++l>20)return;i=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(j))/2)),k=j,j=2*Math.atan(Math.exp(i))-Math.PI/2}return a.x=h,a.y=j,a},c.names=["somerc"]},{}],59:[function(a,b,c){var d=Math.PI/2,e=1e-10,f=a("../common/sign"),g=a("../common/msfnz"),h=a("../common/tsfnz"),i=a("../common/phi2z"),j=a("../common/adjust_lon");c.ssfn_=function(a,b,c){return b*=c,Math.tan(.5*(d+a))*Math.pow((1-b)/(1+b),.5*c)},c.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=e&&(this.k0=.5*(1+f(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=e&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=e&&(this.k0=.5*this.cons*g(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/h(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=g(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-d,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},c.forward=function(a){var b,c,f,g,i,k,l=a.x,m=a.y,n=Math.sin(m),o=Math.cos(m),p=j(l-this.long0);return Math.abs(Math.abs(l-this.long0)-Math.PI)<=e&&Math.abs(m+this.lat0)<=e?(a.x=0/0,a.y=0/0,a):this.sphere?(b=2*this.k0/(1+this.sinlat0*n+this.coslat0*o*Math.cos(p)),a.x=this.a*b*o*Math.sin(p)+this.x0,a.y=this.a*b*(this.coslat0*n-this.sinlat0*o*Math.cos(p))+this.y0,a):(c=2*Math.atan(this.ssfn_(m,n,this.e))-d,g=Math.cos(c),f=Math.sin(c),Math.abs(this.coslat0)<=e?(i=h(this.e,m*this.con,this.con*n),k=2*this.a*this.k0*i/this.cons,a.x=this.x0+k*Math.sin(l-this.long0),a.y=this.y0-this.con*k*Math.cos(l-this.long0),a):(Math.abs(this.sinlat0)<e?(b=2*this.a*this.k0/(1+g*Math.cos(p)),a.y=b*f):(b=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*f+this.cosX0*g*Math.cos(p))),a.y=b*(this.cosX0*f-this.sinX0*g*Math.cos(p))+this.y0),a.x=b*g*Math.sin(p)+this.x0,a))},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,f,g,h,k=Math.sqrt(a.x*a.x+a.y*a.y);if(this.sphere){var l=2*Math.atan(k/(.5*this.a*this.k0));return b=this.long0,c=this.lat0,e>=k?(a.x=b,a.y=c,a):(c=Math.asin(Math.cos(l)*this.sinlat0+a.y*Math.sin(l)*this.coslat0/k),b=j(Math.abs(this.coslat0)<e?this.lat0>0?this.long0+Math.atan2(a.x,-1*a.y):this.long0+Math.atan2(a.x,a.y):this.long0+Math.atan2(a.x*Math.sin(l),k*this.coslat0*Math.cos(l)-a.y*this.sinlat0*Math.sin(l))),a.x=b,a.y=c,a)}if(Math.abs(this.coslat0)<=e){if(e>=k)return c=this.lat0,b=this.long0,a.x=b,a.y=c,a;a.x*=this.con,a.y*=this.con,f=k*this.cons/(2*this.a*this.k0),c=this.con*i(this.e,f),b=this.con*j(this.con*this.long0+Math.atan2(a.x,-1*a.y))}else g=2*Math.atan(k*this.cosX0/(2*this.a*this.k0*this.ms1)),b=this.long0,e>=k?h=this.X0:(h=Math.asin(Math.cos(g)*this.sinX0+a.y*Math.sin(g)*this.cosX0/k),b=j(this.long0+Math.atan2(a.x*Math.sin(g),k*this.cosX0*Math.cos(g)-a.y*this.sinX0*Math.sin(g)))),c=-1*i(this.e,Math.tan(.5*(d+h)));return a.x=b,a.y=c,a},c.names=["stere"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],60:[function(a,b,c){var d=a("./gauss"),e=a("../common/adjust_lon");c.init=function(){d.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},c.forward=function(a){var b,c,f,g;return a.x=e(a.x-this.long0),d.forward.apply(this,[a]),b=Math.sin(a.y),c=Math.cos(a.y),f=Math.cos(a.x),g=this.k0*this.R2/(1+this.sinc0*b+this.cosc0*c*f),a.x=g*c*Math.sin(a.x),a.y=g*(this.cosc0*b-this.sinc0*c*f),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a},c.inverse=function(a){var b,c,f,g,h;if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,h=Math.sqrt(a.x*a.x+a.y*a.y)){var i=2*Math.atan2(h,this.R2);b=Math.sin(i),c=Math.cos(i),g=Math.asin(c*this.sinc0+a.y*b*this.cosc0/h),f=Math.atan2(a.x*b,h*this.cosc0*c-a.y*this.sinc0*b)}else g=this.phic0,f=0;return a.x=f,a.y=g,d.inverse.apply(this,[a]),a.x=e(a.x+this.long0),a},c.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},{"../common/adjust_lon":5,"./gauss":45}],61:[function(a,b,c){var d=a("../common/e0fn"),e=a("../common/e1fn"),f=a("../common/e2fn"),g=a("../common/e3fn"),h=a("../common/mlfn"),i=a("../common/adjust_lon"),j=Math.PI/2,k=1e-10,l=a("../common/sign"),m=a("../common/asinz");c.init=function(){this.e0=d(this.es),this.e1=e(this.es),this.e2=f(this.es),this.e3=g(this.es),this.ml0=this.a*h(this.e0,this.e1,this.e2,this.e3,this.lat0)},c.forward=function(a){var b,c,d,e=a.x,f=a.y,g=i(e-this.long0),j=Math.sin(f),k=Math.cos(f);if(this.sphere){var l=k*Math.sin(g);if(Math.abs(Math.abs(l)-1)<1e-10)return 93;c=.5*this.a*this.k0*Math.log((1+l)/(1-l)),b=Math.acos(k*Math.cos(g)/Math.sqrt(1-l*l)),0>f&&(b=-b),d=this.a*this.k0*(b-this.lat0)}else{var m=k*g,n=Math.pow(m,2),o=this.ep2*Math.pow(k,2),p=Math.tan(f),q=Math.pow(p,2);b=1-this.es*Math.pow(j,2);var r=this.a/Math.sqrt(b),s=this.a*h(this.e0,this.e1,this.e2,this.e3,f);c=this.k0*r*m*(1+n/6*(1-q+o+n/20*(5-18*q+Math.pow(q,2)+72*o-58*this.ep2)))+this.x0,d=this.k0*(s-this.ml0+r*p*n*(.5+n/24*(5-q+9*o+4*Math.pow(o,2)+n/30*(61-58*q+Math.pow(q,2)+600*o-330*this.ep2))))+this.y0}return a.x=c,a.y=d,a},c.inverse=function(a){var b,c,d,e,f,g,h=6;if(this.sphere){var n=Math.exp(a.x/(this.a*this.k0)),o=.5*(n-1/n),p=this.lat0+a.y/(this.a*this.k0),q=Math.cos(p);b=Math.sqrt((1-q*q)/(1+o*o)),f=m(b),0>p&&(f=-f),g=0===o&&0===q?this.long0:i(Math.atan2(o,q)+this.long0)}else{var r=a.x-this.x0,s=a.y-this.y0;for(b=(this.ml0+s/this.k0)/this.a,c=b,e=0;!0&&(d=(b+this.e1*Math.sin(2*c)-this.e2*Math.sin(4*c)+this.e3*Math.sin(6*c))/this.e0-c,c+=d,!(Math.abs(d)<=k));e++)if(e>=h)return 95;if(Math.abs(c)<j){var t=Math.sin(c),u=Math.cos(c),v=Math.tan(c),w=this.ep2*Math.pow(u,2),x=Math.pow(w,2),y=Math.pow(v,2),z=Math.pow(y,2);b=1-this.es*Math.pow(t,2);var A=this.a/Math.sqrt(b),B=A*(1-this.es)/b,C=r/(A*this.k0),D=Math.pow(C,2);f=c-A*v*D/B*(.5-D/24*(5+3*y+10*w-4*x-9*this.ep2-D/30*(61+90*y+298*w+45*z-252*this.ep2-3*x))),g=i(this.long0+C*(1-D/6*(1+2*y+w-D/20*(5-2*w+28*y-3*x+8*this.ep2+24*z)))/u)}else f=j*l(s),g=this.long0}return a.x=g,a.y=f,a},c.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/mlfn":14,"../common/sign":21}],62:[function(a,b,c){var d=.017453292519943295,e=a("./tmerc");c.dependsOn="tmerc",c.init=function(){this.zone&&(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*d,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,e.init.apply(this),this.forward=e.forward,this.inverse=e.inverse)},c.names=["Universal Transverse Mercator System","utm"]},{"./tmerc":61}],63:[function(a,b,c){var d=a("../common/adjust_lon"),e=Math.PI/2,f=1e-10,g=a("../common/asinz");c.init=function(){this.R=this.a},c.forward=function(a){var b,c,h=a.x,i=a.y,j=d(h-this.long0);Math.abs(i)<=f&&(b=this.x0+this.R*j,c=this.y0);var k=g(2*Math.abs(i/Math.PI));(Math.abs(j)<=f||Math.abs(Math.abs(i)-e)<=f)&&(b=this.x0,c=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*k):this.y0+Math.PI*this.R*-Math.tan(.5*k));var l=.5*Math.abs(Math.PI/j-j/Math.PI),m=l*l,n=Math.sin(k),o=Math.cos(k),p=o/(n+o-1),q=p*p,r=p*(2/n-1),s=r*r,t=Math.PI*this.R*(l*(p-s)+Math.sqrt(m*(p-s)*(p-s)-(s+m)*(q-s)))/(s+m);0>j&&(t=-t),b=this.x0+t;var u=m+p;return t=Math.PI*this.R*(r*u-l*Math.sqrt((s+m)*(m+1)-u*u))/(s+m),c=i>=0?this.y0+t:this.y0-t,a.x=b,a.y=c,a},c.inverse=function(a){var b,c,e,g,h,i,j,k,l,m,n,o,p;return a.x-=this.x0,a.y-=this.y0,n=Math.PI*this.R,e=a.x/n,g=a.y/n,h=e*e+g*g,i=-Math.abs(g)*(1+h),j=i-2*g*g+e*e,k=-2*i+1+2*g*g+h*h,p=g*g/k+(2*j*j*j/k/k/k-9*i*j/k/k)/27,l=(i-j*j/3/k)/k,m=2*Math.sqrt(-l/3),n=3*p/l/m,Math.abs(n)>1&&(n=n>=0?1:-1),o=Math.acos(n)/3,c=a.y>=0?(-m*Math.cos(o+Math.PI/3)-j/3/k)*Math.PI:-(-m*Math.cos(o+Math.PI/3)-j/3/k)*Math.PI,b=Math.abs(e)<f?this.long0:d(this.long0+Math.PI*(h-1+Math.sqrt(1+2*(e*e-g*g)+h*h))/2/e),a.x=b,a.y=c,a},c.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},{"../common/adjust_lon":5,"../common/asinz":6}],64:[function(a,b){var c=.017453292519943295,d=57.29577951308232,e=1,f=2,g=a("./datum_transform"),h=a("./adjust_axis"),i=a("./Proj"),j=a("./common/toPoint");b.exports=function k(a,b,l){function m(a,b){return(a.datum.datum_type===e||a.datum.datum_type===f)&&"WGS84"!==b.datumCode}var n;return Array.isArray(l)&&(l=j(l)),a.datum&&b.datum&&(m(a,b)||m(b,a))&&(n=new i("WGS84"),k(a,n,l),a=n),"enu"!==a.axis&&h(a,!1,l),"longlat"===a.projName?(l.x*=c,l.y*=c):(a.to_meter&&(l.x*=a.to_meter,l.y*=a.to_meter),a.inverse(l)),a.from_greenwich&&(l.x+=a.from_greenwich),l=g(a.datum,b.datum,l),b.from_greenwich&&(l.x-=b.from_greenwich),"longlat"===b.projName?(l.x*=d,l.y*=d):(b.forward(l),b.to_meter&&(l.x/=b.to_meter,l.y/=b.to_meter)),"enu"!==b.axis&&h(b,!0,l),l}},{"./Proj":2,"./adjust_axis":3,"./common/toPoint":23,"./datum_transform":30}],65:[function(a,b){function c(a,b,c){a[b]=c.map(function(a){var b={};return d(a,b),b}).reduce(function(a,b){return i(a,b)},{})}function d(a,b){var e;return Array.isArray(a)?(e=a.shift(),"PARAMETER"===e&&(e=a.shift()),1===a.length?Array.isArray(a[0])?(b[e]={},d(a[0],b[e])):b[e]=a[0]:a.length?"TOWGS84"===e?b[e]=a:(b[e]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(e)>-1?(b[e]={name:a[0].toLowerCase(),convert:a[1]},3===a.length&&(b[e].auth=a[2])):"SPHEROID"===e?(b[e]={name:a[0],a:a[1],rf:a[2]},4===a.length&&(b[e].auth=a[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(e)>-1?(a[0]=["name",a[0]],c(b,e,a)):a.every(function(a){return Array.isArray(a)})?c(b,e,a):d(a,b[e])):b[e]=!0,void 0):void(b[a]=!0)}function e(a,b){var c=b[0],d=b[1];!(c in a)&&d in a&&(a[c]=a[d],3===b.length&&(a[c]=b[2](a[c])))}function f(a){return a*h}function g(a){function b(b){var c=a.to_meter||1;return parseFloat(b,10)*c}"GEOGCS"===a.type?a.projName="longlat":"LOCAL_CS"===a.type?(a.projName="identity",a.local=!0):a.projName="object"==typeof a.PROJECTION?Object.keys(a.PROJECTION)[0]:a.PROJECTION,a.UNIT&&(a.units=a.UNIT.name.toLowerCase(),"metre"===a.units&&(a.units="meter"),a.UNIT.convert&&(a.to_meter=parseFloat(a.UNIT.convert,10))),a.GEOGCS&&(a.datumCode=a.GEOGCS.DATUM?a.GEOGCS.DATUM.name.toLowerCase():a.GEOGCS.name.toLowerCase(),"d_"===a.datumCode.slice(0,2)&&(a.datumCode=a.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===a.datumCode||"new_zealand_1949"===a.datumCode)&&(a.datumCode="nzgd49"),"wgs_1984"===a.datumCode&&("Mercator_Auxiliary_Sphere"===a.PROJECTION&&(a.sphere=!0),a.datumCode="wgs84"),"_ferro"===a.datumCode.slice(-6)&&(a.datumCode=a.datumCode.slice(0,-6)),"_jakarta"===a.datumCode.slice(-8)&&(a.datumCode=a.datumCode.slice(0,-8)),~a.datumCode.indexOf("belge")&&(a.datumCode="rnb72"),a.GEOGCS.DATUM&&a.GEOGCS.DATUM.SPHEROID&&(a.ellps=a.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===a.ellps.toLowerCase().slice(0,13)&&(a.ellps="intl"),a.a=a.GEOGCS.DATUM.SPHEROID.a,a.rf=parseFloat(a.GEOGCS.DATUM.SPHEROID.rf,10)),~a.datumCode.indexOf("osgb_1936")&&(a.datumCode="osgb36")),a.b&&!isFinite(a.b)&&(a.b=a.a);
var c=function(b){return e(a,b)},d=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",f],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",f],["x0","false_easting",b],["y0","false_northing",b],["long0","central_meridian",f],["lat0","latitude_of_origin",f],["lat0","standard_parallel_1",f],["lat1","standard_parallel_1",f],["lat2","standard_parallel_2",f],["alpha","azimuth",f],["srsCode","name"]];d.forEach(c),a.long0||!a.longc||"Albers_Conic_Equal_Area"!==a.PROJECTION&&"Lambert_Azimuthal_Equal_Area"!==a.PROJECTION||(a.long0=a.longc)}var h=.017453292519943295,i=a("./extend");b.exports=function(a,b){var c=JSON.parse((","+a).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]')),e=c.shift(),f=c.shift();c.unshift(["name",f]),c.unshift(["type",e]),c.unshift("output");var h={};return d(c,h),g(h.output),i(b,h.output)}},{"./extend":33}],66:[function(a,b,c){function d(a){return a*(Math.PI/180)}function e(a){return 180*(a/Math.PI)}function f(a){var b,c,e,f,g,i,j,k,l,m=a.lat,n=a.lon,o=6378137,p=.00669438,q=.9996,r=d(m),s=d(n);l=Math.floor((n+180)/6)+1,180===n&&(l=60),m>=56&&64>m&&n>=3&&12>n&&(l=32),m>=72&&84>m&&(n>=0&&9>n?l=31:n>=9&&21>n?l=33:n>=21&&33>n?l=35:n>=33&&42>n&&(l=37)),b=6*(l-1)-180+3,k=d(b),c=p/(1-p),e=o/Math.sqrt(1-p*Math.sin(r)*Math.sin(r)),f=Math.tan(r)*Math.tan(r),g=c*Math.cos(r)*Math.cos(r),i=Math.cos(r)*(s-k),j=o*((1-p/4-3*p*p/64-5*p*p*p/256)*r-(3*p/8+3*p*p/32+45*p*p*p/1024)*Math.sin(2*r)+(15*p*p/256+45*p*p*p/1024)*Math.sin(4*r)-35*p*p*p/3072*Math.sin(6*r));var t=q*e*(i+(1-f+g)*i*i*i/6+(5-18*f+f*f+72*g-58*c)*i*i*i*i*i/120)+5e5,u=q*(j+e*Math.tan(r)*(i*i/2+(5-f+9*g+4*g*g)*i*i*i*i/24+(61-58*f+f*f+600*g-330*c)*i*i*i*i*i*i/720));return 0>m&&(u+=1e7),{northing:Math.round(u),easting:Math.round(t),zoneNumber:l,zoneLetter:h(m)}}function g(a){var b=a.northing,c=a.easting,d=a.zoneLetter,f=a.zoneNumber;if(0>f||f>60)return null;var h,i,j,k,l,m,n,o,p,q,r=.9996,s=6378137,t=.00669438,u=(1-Math.sqrt(1-t))/(1+Math.sqrt(1-t)),v=c-5e5,w=b;"N">d&&(w-=1e7),o=6*(f-1)-180+3,h=t/(1-t),n=w/r,p=n/(s*(1-t/4-3*t*t/64-5*t*t*t/256)),q=p+(3*u/2-27*u*u*u/32)*Math.sin(2*p)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*p)+151*u*u*u/96*Math.sin(6*p),i=s/Math.sqrt(1-t*Math.sin(q)*Math.sin(q)),j=Math.tan(q)*Math.tan(q),k=h*Math.cos(q)*Math.cos(q),l=s*(1-t)/Math.pow(1-t*Math.sin(q)*Math.sin(q),1.5),m=v/(i*r);var x=q-i*Math.tan(q)/l*(m*m/2-(5+3*j+10*k-4*k*k-9*h)*m*m*m*m/24+(61+90*j+298*k+45*j*j-252*h-3*k*k)*m*m*m*m*m*m/720);x=e(x);var y=(m-(1+2*j+k)*m*m*m/6+(5-2*k+28*j-3*k*k+8*h+24*j*j)*m*m*m*m*m/120)/Math.cos(q);y=o+e(y);var z;if(a.accuracy){var A=g({northing:a.northing+a.accuracy,easting:a.easting+a.accuracy,zoneLetter:a.zoneLetter,zoneNumber:a.zoneNumber});z={top:A.lat,right:A.lon,bottom:x,left:y}}else z={lat:x,lon:y};return z}function h(a){var b="Z";return 84>=a&&a>=72?b="X":72>a&&a>=64?b="W":64>a&&a>=56?b="V":56>a&&a>=48?b="U":48>a&&a>=40?b="T":40>a&&a>=32?b="S":32>a&&a>=24?b="R":24>a&&a>=16?b="Q":16>a&&a>=8?b="P":8>a&&a>=0?b="N":0>a&&a>=-8?b="M":-8>a&&a>=-16?b="L":-16>a&&a>=-24?b="K":-24>a&&a>=-32?b="J":-32>a&&a>=-40?b="H":-40>a&&a>=-48?b="G":-48>a&&a>=-56?b="F":-56>a&&a>=-64?b="E":-64>a&&a>=-72?b="D":-72>a&&a>=-80&&(b="C"),b}function i(a,b){var c=""+a.easting,d=""+a.northing;return a.zoneNumber+a.zoneLetter+j(a.easting,a.northing,a.zoneNumber)+c.substr(c.length-5,b)+d.substr(d.length-5,b)}function j(a,b,c){var d=k(c),e=Math.floor(a/1e5),f=Math.floor(b/1e5)%20;return l(e,f,d)}function k(a){var b=a%q;return 0===b&&(b=q),b}function l(a,b,c){var d=c-1,e=r.charCodeAt(d),f=s.charCodeAt(d),g=e+a-1,h=f+b,i=!1;g>x&&(g=g-x+t-1,i=!0),(g===u||u>e&&g>u||(g>u||u>e)&&i)&&g++,(g===v||v>e&&g>v||(g>v||v>e)&&i)&&(g++,g===u&&g++),g>x&&(g=g-x+t-1),h>w?(h=h-w+t-1,i=!0):i=!1,(h===u||u>f&&h>u||(h>u||u>f)&&i)&&h++,(h===v||v>f&&h>v||(h>v||v>f)&&i)&&(h++,h===u&&h++),h>w&&(h=h-w+t-1);var j=String.fromCharCode(g)+String.fromCharCode(h);return j}function m(a){if(a&&0===a.length)throw"MGRSPoint coverting from nothing";for(var b,c=a.length,d=null,e="",f=0;!/[A-Z]/.test(b=a.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+a;e+=b,f++}var g=parseInt(e,10);if(0===f||f+3>c)throw"MGRSPoint bad conversion from: "+a;var h=a.charAt(f++);if("A">=h||"B"===h||"Y"===h||h>="Z"||"I"===h||"O"===h)throw"MGRSPoint zone letter "+h+" not handled: "+a;d=a.substring(f,f+=2);for(var i=k(g),j=n(d.charAt(0),i),l=o(d.charAt(1),i);l<p(h);)l+=2e6;var m=c-f;if(m%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+a;var q,r,s,t,u,v=m/2,w=0,x=0;return v>0&&(q=1e5/Math.pow(10,v),r=a.substring(f,f+v),w=parseFloat(r)*q,s=a.substring(f+v),x=parseFloat(s)*q),t=w+j,u=x+l,{easting:t,northing:u,zoneLetter:h,zoneNumber:g,accuracy:q}}function n(a,b){for(var c=r.charCodeAt(b-1),d=1e5,e=!1;c!==a.charCodeAt(0);){if(c++,c===u&&c++,c===v&&c++,c>x){if(e)throw"Bad character: "+a;c=t,e=!0}d+=1e5}return d}function o(a,b){if(a>"V")throw"MGRSPoint given invalid Northing "+a;for(var c=s.charCodeAt(b-1),d=0,e=!1;c!==a.charCodeAt(0);){if(c++,c===u&&c++,c===v&&c++,c>w){if(e)throw"Bad character: "+a;c=t,e=!0}d+=1e5}return d}function p(a){var b;switch(a){case"C":b=11e5;break;case"D":b=2e6;break;case"E":b=28e5;break;case"F":b=37e5;break;case"G":b=46e5;break;case"H":b=55e5;break;case"J":b=64e5;break;case"K":b=73e5;break;case"L":b=82e5;break;case"M":b=91e5;break;case"N":b=0;break;case"P":b=8e5;break;case"Q":b=17e5;break;case"R":b=26e5;break;case"S":b=35e5;break;case"T":b=44e5;break;case"U":b=53e5;break;case"V":b=62e5;break;case"W":b=7e6;break;case"X":b=79e5;break;default:b=-1}if(b>=0)return b;throw"Invalid zone letter: "+a}var q=6,r="AJSAJS",s="AFAFAF",t=65,u=73,v=79,w=86,x=90;c.forward=function(a,b){return b=b||5,i(f({lat:a[1],lon:a[0]}),b)},c.inverse=function(a){var b=g(m(a.toUpperCase()));return[b.left,b.bottom,b.right,b.top]},c.toPoint=function(a){var b=c.inverse(a);return[(b[2]+b[0])/2,(b[3]+b[1])/2]}},{}],67:[function(a,b){b.exports={name:"proj4",version:"2.2.1",description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",main:"lib/index.js",directories:{test:"test",doc:"docs"},scripts:{test:"./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"},repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},author:"",license:"MIT",jam:{main:"dist/proj4.js",include:["dist/proj4.js","README.md","AUTHORS","LICENSE.md"]},devDependencies:{"grunt-cli":"~0.1.13",grunt:"~0.4.2","grunt-contrib-connect":"~0.6.0","grunt-contrib-jshint":"~0.8.0",chai:"~1.8.1",mocha:"~1.17.1","grunt-mocha-phantomjs":"~0.4.0",browserify:"~3.24.5","grunt-browserify":"~1.3.0","grunt-contrib-uglify":"~0.3.2",curl:"git://github.com/cujojs/curl.git",istanbul:"~0.2.4",tin:"~0.4.0"},dependencies:{mgrs:"0.0.0"}}},{}],"./includedProjections":[function(a,b){b.exports=a("gWUPNW")},{}],gWUPNW:[function(a,b){var c=[a("./lib/projections/tmerc"),a("./lib/projections/utm"),a("./lib/projections/sterea"),a("./lib/projections/stere"),a("./lib/projections/somerc"),a("./lib/projections/omerc"),a("./lib/projections/lcc"),a("./lib/projections/krovak"),a("./lib/projections/cass"),a("./lib/projections/laea"),a("./lib/projections/aea"),a("./lib/projections/gnom"),a("./lib/projections/cea"),a("./lib/projections/eqc"),a("./lib/projections/poly"),a("./lib/projections/nzmg"),a("./lib/projections/mill"),a("./lib/projections/sinu"),a("./lib/projections/moll"),a("./lib/projections/eqdc"),a("./lib/projections/vandg"),a("./lib/projections/aeqd")];b.exports=function(proj4){c.forEach(function(a){proj4.Proj.projections.add(a)})}},{"./lib/projections/aea":39,"./lib/projections/aeqd":40,"./lib/projections/cass":41,"./lib/projections/cea":42,"./lib/projections/eqc":43,"./lib/projections/eqdc":44,"./lib/projections/gnom":46,"./lib/projections/krovak":47,"./lib/projections/laea":48,"./lib/projections/lcc":49,"./lib/projections/mill":52,"./lib/projections/moll":53,"./lib/projections/nzmg":54,"./lib/projections/omerc":55,"./lib/projections/poly":56,"./lib/projections/sinu":57,"./lib/projections/somerc":58,"./lib/projections/stere":59,"./lib/projections/sterea":60,"./lib/projections/tmerc":61,"./lib/projections/utm":62,"./lib/projections/vandg":63}]},{},[35])(35)});var h,q={};window.Vadstena=q;window.ga=null!=window.ga?window.ga:{};window.VadstenaMap_=null!=window.VadstenaMap_?window.VadstenaMap_:null;q.Hb=Array;q.oh={};q.oh.create=function(a){var b=new q.Hb(2);a&&(b[0]=a[0],b[1]=a[1]);return b};q.ie={};q.ie.create=function(a){var b=new q.Hb(4);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]);return b};q.ie.ue=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};q.ea={};q.ea.create=function(a){var b=new q.Hb(3);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2]);return b};q.ea.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};
q.ea.add=function(a,b,c){if(!c||a==c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c};q.ea.Hh=function(a,b,c){if(!c||a==c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c};q.ea.Ah=function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};q.ea.scale=function(a,b,c){if(!c||a==c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c};
q.ea.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=Math.sqrt(c*c+d*d+e*e);if(f){if(1==f)return b[0]=c,b[1]=d,b[2]=e,b}else return b[0]=0,b[1]=0,b[2]=0,b;f=1/f;b[0]=c*f;b[1]=d*f;b[2]=e*f;return b};q.ea.sh=function(a,b,c){c||(c=a);var d=a[0],e=a[1];a=a[2];var f=b[0],g=b[1];b=b[2];c[0]=e*b-a*g;c[1]=a*f-d*b;c[2]=d*g-e*f;return c};q.ea.length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};q.ea.ue=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};
q.ea.direction=function(a,b,c){c||(c=a);var d=a[0]-b[0],e=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(d*d+e*e+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=d*b;c[1]=e*b;c[2]=a*b;return c};q.ea.vh=function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);return d};q.ea.ee=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};q.Na={};
q.Na.create=function(a){var b=new q.Hb(9);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9]);return b};q.Na.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b};q.Na.Pe=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};
q.Na.Qb=function(a,b){if(!b||a==b){var c=a[1],d=a[2],e=a[5];a[1]=a[3];a[2]=a[6];a[3]=c;a[5]=a[7];a[6]=d;a[7]=e;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b};q.Na.kh=function(a,b){b||(b=q.e.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=0;b[4]=a[3];b[5]=a[4];b[6]=a[5];b[7]=0;b[8]=a[6];b[9]=a[7];b[10]=a[8];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};
q.Na.ee=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"};q.e={};q.e.create=function(a){var b=new q.Hb(16);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b};
q.e.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};q.e.Pe=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};
q.e.Qb=function(a,b){if(!b||a==b){var c=a[1],d=a[2],e=a[3],f=a[6],g=a[7],k=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=c;a[6]=a[9];a[7]=a[13];a[8]=d;a[9]=f;a[11]=a[14];a[12]=e;a[13]=g;a[14]=k;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b};
q.e.th=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],k=a[6],l=a[7],m=a[8],n=a[9],p=a[10],r=a[11],s=a[12],u=a[13],y=a[14];a=a[15];return s*n*k*e-m*u*k*e-s*g*p*e+f*u*p*e+m*g*y*e-f*n*y*e-s*n*d*l+m*u*d*l+s*c*p*l-b*u*p*l-m*c*y*l+b*n*y*l+s*g*d*r-f*u*d*r-s*c*k*r+b*u*k*r+f*c*y*r-b*g*y*r-m*g*d*a+f*n*d*a+m*c*k*a-b*n*k*a-f*c*p*a+b*g*p*a};
q.e.inverse=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],k=a[5],l=a[6],m=a[7],n=a[8],p=a[9],r=a[10],s=a[11],u=a[12],y=a[13],D=a[14],E=a[15],M=c*k-d*g,N=c*l-e*g,F=c*m-f*g,G=d*l-e*k,H=d*m-f*k,I=e*m-f*l,J=n*y-p*u,K=n*D-r*u,L=n*E-s*u,S=p*D-r*y,T=p*E-s*y,U=r*E-s*D,B=1/(M*U-N*T+F*S+G*L-H*K+I*J);b[0]=(k*U-l*T+m*S)*B;b[1]=(-d*U+e*T-f*S)*B;b[2]=(y*I-D*H+E*G)*B;b[3]=(-p*I+r*H-s*G)*B;b[4]=(-g*U+l*L-m*K)*B;b[5]=(c*U-e*L+f*K)*B;b[6]=(-u*I+D*F-E*N)*B;b[7]=(n*I-r*F+s*N)*B;b[8]=(g*T-k*L+m*J)*B;b[9]=
(-c*T+d*L-f*J)*B;b[10]=(u*H-y*F+E*M)*B;b[11]=(-n*H+p*F-s*M)*B;b[12]=(-g*S+k*K-l*J)*B;b[13]=(c*S-d*K+e*J)*B;b[14]=(-u*G+y*N-D*M)*B;b[15]=(n*G-p*N+r*M)*B;return b};q.e.Kh=function(a,b){b||(b=q.e.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};
q.e.jh=function(a,b){b||(b=q.Na.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b};q.e.Jh=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[4],g=a[5],k=a[6],l=a[8],m=a[9],n=a[10],p=n*g-k*m,r=-n*f+k*l,s=m*f-g*l,u=c*p+d*r+e*s;if(!u)return null;u=1/u;b||(b=q.Na.create());b[0]=p*u;b[1]=(-n*d+e*m)*u;b[2]=(k*d-e*g)*u;b[3]=r*u;b[4]=(n*c-e*l)*u;b[5]=(-k*c+e*f)*u;b[6]=s*u;b[7]=(-m*c+d*l)*u;b[8]=(g*c-d*f)*u;return b};
q.e.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],k=a[4],l=a[5],m=a[6],n=a[7],p=a[8],r=a[9],s=a[10],u=a[11],y=a[12],D=a[13],E=a[14];a=a[15];var M=b[0],N=b[1],F=b[2],G=b[3],H=b[4],I=b[5],J=b[6],K=b[7],L=b[8],S=b[9],T=b[10],U=b[11],B=b[12],sa=b[13],ta=b[14];b=b[15];c[0]=M*d+N*k+F*p+G*y;c[1]=M*e+N*l+F*r+G*D;c[2]=M*f+N*m+F*s+G*E;c[3]=M*g+N*n+F*u+G*a;c[4]=H*d+I*k+J*p+K*y;c[5]=H*e+I*l+J*r+K*D;c[6]=H*f+I*m+J*s+K*E;c[7]=H*g+I*n+J*u+K*a;c[8]=L*d+S*k+T*p+U*y;c[9]=L*e+S*l+T*r+U*D;c[10]=L*
f+S*m+T*s+U*E;c[11]=L*g+S*n+T*u+U*a;c[12]=B*d+sa*k+ta*p+b*y;c[13]=B*e+sa*l+ta*r+b*D;c[14]=B*f+sa*m+ta*s+b*E;c[15]=B*g+sa*n+ta*u+b*a;return c};q.e.ub=function(a,b,c){c||(c=b);var d=b[0],e=b[1];b=b[2];c[0]=a[0]*d+a[4]*e+a[8]*b+a[12];c[1]=a[1]*d+a[5]*e+a[9]*b+a[13];c[2]=a[2]*d+a[6]*e+a[10]*b+a[14];return c};
q.e.Rc=function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2];b=b[3];c[0]=a[0]*d+a[4]*e+a[8]*f+a[12]*b;c[1]=a[1]*d+a[5]*e+a[9]*f+a[13]*b;c[2]=a[2]*d+a[6]*e+a[10]*f+a[14]*b;c[3]=a[3]*d+a[7]*e+a[11]*f+a[15]*b;return c};
q.e.translate=function(a,b,c){var d=b[0],e=b[1];b=b[2];if(!c||a==c)return a[12]=a[0]*d+a[4]*e+a[8]*b+a[12],a[13]=a[1]*d+a[5]*e+a[9]*b+a[13],a[14]=a[2]*d+a[6]*e+a[10]*b+a[14],a[15]=a[3]*d+a[7]*e+a[11]*b+a[15],a;var f=a[0],g=a[1],k=a[2],l=a[3],m=a[4],n=a[5],p=a[6],r=a[7],s=a[8],u=a[9],y=a[10],D=a[11];c[0]=f;c[1]=g;c[2]=k;c[3]=l;c[4]=m;c[5]=n;c[6]=p;c[7]=r;c[8]=s;c[9]=u;c[10]=y;c[11]=D;c[12]=f*d+m*e+s*b+a[12];c[13]=g*d+n*e+u*b+a[13];c[14]=k*d+p*e+y*b+a[14];c[15]=l*d+r*e+D*b+a[15];return c};
q.e.scale=function(a,b,c){var d=b[0],e=b[1];b=b[2];if(!c||a==c)return a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=e,a[5]*=e,a[6]*=e,a[7]*=e,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*d;c[1]=a[1]*d;c[2]=a[2]*d;c[3]=a[3]*d;c[4]=a[4]*e;c[5]=a[5]*e;c[6]=a[6]*e;c[7]=a[7]*e;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};
q.e.rotate=function(a,b,c,d){var e=c[0],f=c[1];c=c[2];var g=Math.sqrt(e*e+f*f+c*c);if(!g)return null;1!=g&&(g=1/g,e*=g,f*=g,c*=g);var k=Math.sin(b),l=Math.cos(b),m=1-l;b=a[0];var g=a[1],n=a[2],p=a[3],r=a[4],s=a[5],u=a[6],y=a[7],D=a[8],E=a[9],M=a[10],N=a[11],F=e*e*m+l,G=f*e*m+c*k,H=c*e*m-f*k,I=e*f*m-c*k,J=f*f*m+l,K=c*f*m+e*k,L=e*c*m+f*k,e=f*c*m-e*k,f=c*c*m+l;d?a!=d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*F+r*G+D*H;d[1]=g*F+s*G+E*H;d[2]=n*F+u*G+M*H;d[3]=p*F+y*G+N*H;d[4]=b*I+r*
J+D*K;d[5]=g*I+s*J+E*K;d[6]=n*I+u*J+M*K;d[7]=p*I+y*J+N*K;d[8]=b*L+r*e+D*f;d[9]=g*L+s*e+E*f;d[10]=n*L+u*e+M*f;d[11]=p*L+y*e+N*f;return d};q.e.Dh=function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[4],f=a[5],g=a[6],k=a[7],l=a[8],m=a[9],n=a[10],p=a[11];c?a!=c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=e*b+l*d;c[5]=f*b+m*d;c[6]=g*b+n*d;c[7]=k*b+p*d;c[8]=e*-d+l*b;c[9]=f*-d+m*b;c[10]=g*-d+n*b;c[11]=k*-d+p*b;return c};
q.e.Eh=function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],f=a[1],g=a[2],k=a[3],l=a[8],m=a[9],n=a[10],p=a[11];c?a!=c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+l*-d;c[1]=f*b+m*-d;c[2]=g*b+n*-d;c[3]=k*b+p*-d;c[8]=e*d+l*b;c[9]=f*d+m*b;c[10]=g*d+n*b;c[11]=k*d+p*b;return c};
q.e.Fh=function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],f=a[1],g=a[2],k=a[3],l=a[4],m=a[5],n=a[6],p=a[7];c?a!=c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+l*d;c[1]=f*b+m*d;c[2]=g*b+n*d;c[3]=k*b+p*d;c[4]=e*-d+l*b;c[5]=f*-d+m*b;c[6]=g*-d+n*b;c[7]=k*-d+p*b;return c};
q.e.ag=function(a,b,c,d,e,f,g){g||(g=q.e.create());var k=b-a,l=d-c,m=f-e;g[0]=2*e/k;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=2*e/l;g[6]=0;g[7]=0;g[8]=(b+a)/k;g[9]=(d+c)/l;g[10]=-(f+e)/m;g[11]=-1;g[12]=0;g[13]=0;g[14]=-(f*e*2)/m;g[15]=0;return g};q.e.perspective=function(a,b,c,d,e){a=c*Math.tan(a*Math.PI/360);b*=a;return q.e.ag(-b,b,-a,a,c,d,e)};
q.e.Ch=function(a,b,c,d,e,f,g){g||(g=q.e.create());var k=b-a,l=d-c,m=f-e;g[0]=2/k;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=2/l;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=-2/m;g[11]=0;g[12]=-(a+b)/k;g[13]=-(d+c)/l;g[14]=-(f+e)/m;g[15]=1;return g};
q.e.wh=function(a,b,c,d){d||(d=q.e.create());var e=a[0],f=a[1];a=a[2];var g=c[0],k=c[1],l=c[2];c=b[1];var m=b[2];if(e==b[0]&&f==c&&a==m)return q.e.Pe(d);var n,p,r,s;c=e-b[0];m=f-b[1];b=a-b[2];s=1/Math.sqrt(c*c+m*m+b*b);c*=s;m*=s;b*=s;n=k*b-l*m;l=l*c-g*b;g=g*m-k*c;(s=Math.sqrt(n*n+l*l+g*g))?(s=1/s,n*=s,l*=s,g*=s):g=l=n=0;k=m*g-b*l;p=b*n-c*g;r=c*l-m*n;(s=Math.sqrt(k*k+p*p+r*r))?(s=1/s,k*=s,p*=s,r*=s):r=p=k=0;d[0]=n;d[1]=k;d[2]=c;d[3]=0;d[4]=l;d[5]=p;d[6]=m;d[7]=0;d[8]=g;d[9]=r;d[10]=b;d[11]=0;d[12]=
-(n*e+l*f+g*a);d[13]=-(k*e+p*f+r*a);d[14]=-(c*e+m*f+b*a);d[15]=1;return d};q.e.ee=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"};q.ra={};q.ra.create=function(a){var b=new q.Hb(4);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]);return b};q.ra.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};
q.ra.rh=function(a,b){var c=a[0],d=a[1],e=a[2];if(!b||a==b)return a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a;b[0]=c;b[1]=d;b[2]=e;b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e));return b};q.ra.inverse=function(a,b){if(!b||a==b)return a[0]*=1,a[1]*=1,a[2]*=1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};q.ra.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};
q.ra.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=Math.sqrt(c*c+d*d+e*e+f*f);if(0==g)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;g=1/g;b[0]=c*g;b[1]=d*g;b[2]=e*g;b[3]=f*g;return b};q.ra.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2];a=a[3];var g=b[0],k=b[1],l=b[2];b=b[3];c[0]=d*b+a*g+e*l-f*k;c[1]=e*b+a*k+f*g-d*l;c[2]=f*b+a*l+d*k-e*g;c[3]=a*b-d*g-e*k-f*l;return c};
q.ra.ub=function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2];b=a[0];var g=a[1],k=a[2];a=a[3];var l=a*d+g*f-k*e,m=a*e+k*d-b*f,n=a*f+b*e-g*d,d=-b*d-g*e-k*f;c[0]=l*a+d*-b+m*-k-n*-g;c[1]=m*a+d*-g+n*-b-l*-k;c[2]=n*a+d*-k+l*-g-m*-b;return c};q.ra.jh=function(a,b){b||(b=q.Na.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,k=d+d,l=e+e,m=c*g,n=c*k,c=c*l,p=d*k,d=d*l,e=e*l,g=f*g,k=f*k,f=f*l;b[0]=1-(p+e);b[1]=n-f;b[2]=c+k;b[3]=n+f;b[4]=1-(m+e);b[5]=d-g;b[6]=c-k;b[7]=d+g;b[8]=1-(m+p);return b};
q.ra.kh=function(a,b){b||(b=q.e.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,k=d+d,l=e+e,m=c*g,n=c*k,c=c*l,p=d*k,d=d*l,e=e*l,g=f*g,k=f*k,f=f*l;b[0]=1-(p+e);b[1]=n-f;b[2]=c+k;b[3]=0;b[4]=n+f;b[5]=1-(m+e);b[6]=d-g;b[7]=0;b[8]=c-k;b[9]=d+g;b[10]=1-(m+p);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};q.ra.Gh=function(a,b,c,d){d||(d=a);var e=c;0>a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]&&(e=-1*c);d[0]=1-c*a[0]+e*b[0];d[1]=1-c*a[1]+e*b[1];d[2]=1-c*a[2]+e*b[2];d[3]=1-c*a[3]+e*b[3];return d};
q.ra.ee=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};q.bg=function(a,b,c,d,e,f){var g=b-a,k=d-c,l=f-e;a=q.e.create([2*e/g,0,(b+a)/g,0,0,2*e/k,(d+c)/k,0,0,0,-(f+e)/l,-2*f*e/l,0,0,-1,0]);q.e.Qb(a);return a};q.Mg=function(a,b,c,d){a=c*Math.tan(a*Math.PI/360);b*=a;return q.bg(-b,b,-a,a,c,d)};q.Sa=function(a,b){var c=Math.cos(b),d=Math.sin(b);switch(a){case 0:c=q.e.create([1,0,0,0,0,c,-d,0,0,d,c,0,0,0,0,1]);break;case 1:c=q.e.create([c,0,-d,0,0,1,0,0,d,0,c,0,0,0,0,1]);break;default:c=q.e.create([c,-d,0,0,d,c,0,0,0,0,1,0,0,0,0,1])}q.e.Qb(c);return c};
q.$c=function(a,b,c){a=q.e.create([a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1]);q.e.Qb(a);return a};q.Tg=function(a){return q.$c(a,a,a)};q.Bb=function(a,b,c){a=q.e.create([1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1]);q.e.Qb(a);return a};q.Lh=function(a){return q.Bb(a[0],a[1],0)};q.Mh=function(a){return q.Bb(a[0],a[1],a[2])};q.Ia=function(a,b,c){a<b?a=b:a>c&&(a=c);return a};q.ha=function(a){return a*Math.PI/180};q.jf=function(a){var b=7;if(0>a)return a=-a+"",b--,a.length>=b?"-"+a:"-"+(Array(b-a.length+1).join("0")+a);a+="";return a.length>=b?a:Array(b-a.length+1).join("0")+a};q.te=function(a){var b=(a&31744)>>10;fraction=a&1023;return(a>>15?-1:1)*(b?31===b?fraction?NaN:Infinity:Math.pow(2,b-15)*(1+fraction/1024):fraction/1024*6.103515625E-5)};
q.vf=function(a,b){return a.replace(/\{([_$a-zA-Z0-9][_$a-zA-Z0-9]*)\}/g,function(a,d){return d in b?b[d]:a})};q.Nc=function(a,b,c){var d=new XMLHttpRequest;d.onload=function(){var a=d.response;try{var f=eval("("+a+")")}catch(g){null!=c&&c();return}null!=b&&b(f)}.bind(this);d.onerror=function(){null!=c&&c()}.bind(this);d.open("GET",a,!0);d.send("")};
q.Te=function(a,b,c){var d=new XMLHttpRequest;d.onreadystatechange=function(){switch(d.readyState){case 0:case 1:case 2:case 3:break;case 4:if(404==d.status){null!=c&&c();break}var a=new DataView(d.response);null!=b&&b(a);break;default:null!=c&&c()}}.bind(this);d.onerror=function(){null!=c&&c()}.bind(this);d.open("GET",a,!0);d.responseType="arraybuffer";d.send("")};window.performance=window.performance||{};
performance.now=performance.now||performance.yh||performance.zh||performance.Bh||performance.webkitNow||function(){return(new Date).getTime()};window.rf=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)};function aa(a,b,c){this.json=b;this.H=new t(a);this.Ye=this.Ze=this.Cd=0;this.zc=[];this.yc=[0,0,0];this.Pf=c;this.Df=this.Xe=this.$e="";null!=b.foat&&(this.H.n=b.foat[0],this.H.v=b.foat[1],this.H.A=b.foat[2],this.Cd=b.foat[3]);null!=b.meta&&(this.Ze=b.meta[0],this.Ye=b.meta[1]);this.$e=b.metaTemplate;this.Xe=b.meshTemplate;this.Df=b.textureTemplate;if(null!=b.defaultPosition&&null!=b.defaultOrientation)for(a=0;3>a;a++)this.zc[a]=b.defaultPosition[a],this.yc[a]=b.defaultOrientation[a];this.$g=null!=
b.texelSize?b.texelSize:0.02;Math.log(v(this,0));Math.log(2);Math.log(32);Math.log(2);this.Oa=null}function v(a,b){return b>a.H.n?a.Cd>>b-a.H.n:a.Cd<<a.H.n-b}function ba(a,b){return ca(a,a.$e,b)}function da(a,b){return ca(a,a.Xe,b)}function ea(a,b){return ca(a,a.Df,b)}function ca(a,b,c){b=q.vf(b,{lod:c.n,easting:q.jf(c.v),northing:q.jf(c.A)});return a.Pf+b}
function fa(a,b,c){var d=v(a,11),e=Math.round((b[0]-a.H.v)/d),f=Math.round((b[1]-a.H.A)/d);return null!=c?(c[0]=a.H.v+e*d,c[1]=a.H.A+f*d,c[2]=b[2],c):[a.H.v+e*d,a.H.A+f*d,b[2]]}
function ha(a){this.kd=1073741824;this.Je=402653184;this.ec=4;this.pe=45;this.uc=6E5;this.$=180;this.ld=this.uc;this.nd=-90;this.md=90;this.Va="aboveTerrainByPixelSize";this.Ha=0.5*this.$;this.Ke=8;this.Le=32;this.Oe=1024;this.Ab="./skydome.jpg";this.hb=[0.8,0.8,0.8];this.wa="observer";if(null!=a&&(null!=a.cacheSize&&(this.kd=a.cacheSize),null!=a.gpuCacheSize&&(this.Je=a.gpuCacheSize),null!=a.numThreads&&(this.ec=a.numThreads),null!=a.cameraFOV&&(this.pe=a.cameraFOV),null!=a.cameraVisibility&&(this.uc=
a.cameraVisibility),null!=a.cameraMinDistance&&(this.$=a.cameraMinDistance),null!=a.cameraMaxDistance&&(this.ld=a.cameraMaxDistance),null!=a.cameraMinTilt&&(this.nd=a.cameraMinTilt),null!=a.cameraMaxTilt&&(this.md=a.cameraMaxTilt),null!=a.cameraConstrainMode&&(this.Va=a.cameraConstrainMode,this.Ha=this.$/5),null!=a.gridEmbeddingFactor&&(this.Ke=a.gridEmbeddingFactor),null!=a.gridMinTileSize&&(this.Le=a.gridMinTileSize),null!=a.skydomeTexture&&(this.Ab=a.skydomeTexture),null!=a.hitTextureSize&&(this.Oe=
a.hitTextureSize),null!=a.controlMode&&(this.wa=a.controlMode),null!=a.controlInertia))for(var b=0;3>b;b++)this.hb[b]=a.controlInertia[b]};function ia(a,b,c,d,e,f){this.k=[];this.r=[];this.k[0]=null!=a?a:Number.POSITIVE_INFINITY;this.k[1]=null!=b?b:Number.POSITIVE_INFINITY;this.k[2]=null!=c?c:Number.POSITIVE_INFINITY;this.r[0]=null!=d?d:Number.NEGATIVE_INFINITY;this.r[1]=null!=e?e:Number.NEGATIVE_INFINITY;this.r[2]=null!=f?f:Number.NEGATIVE_INFINITY}function w(a,b){return a.r[b]-a.k[b]}function ja(a,b){return new ia(a.k[0]-b[0],a.k[1]-b[1],a.k[2],a.r[0]-b[0],a.r[1]-b[1],a.r[2])};function ka(a){this.pb=[];this.Pc=null!=a?a:Number.MAX_VALUE;this.G=this.Fa=null;this.bb=0}h=ka.prototype;h.log=function(){for(var a=0,b=this.G;null!=b.Qa&&!(b=this.pb[b.Qa][3],a++,10<a););this.pb.forEach(function(){})};h.find=function(a){a=this.hash(a);a=this.pb[a];if(null!=a){if(this.G!=a){null!=a.Ra&&(a.Ra.Qa=a.Qa);null!=a.Qa&&(a.Qa.Ra=a.Ra);this.Fa==a&&(this.Fa=a.Ra);var b=this.G;this.G=a;this.G.Qa=b;this.G.Ra=null;b.Ra=this.G}return a.Kc}return null};h.contains=function(a){return null!=this.pb[this.hash(a)]};
h.clear=function(){for(var a=this.G;null!=a;)null!=a.Kc&&a.Kc.K(),a=a.Qa;this.pb=[];this.G=this.Fa=null;this.bb=0};function la(a,b,c,d){b=a.hash(b);c={hg:b,Kc:c,Uf:d,Ra:null,Qa:a.G};null!=a.G&&(a.G.Ra=c);a.G=c;null==a.Fa&&(a.Fa=c);a.pb[b]=c;a.bb+=d;ma(a)}function ma(a){for(;a.bb>a.Pc;){var b=a.Fa;if(null!=b)a.Fa=a.Fa.Ra,null!=a.Fa&&(a.Fa.Qa=null),a.pb[b.hg]=null,a.bb-=b.Uf,b.Kc.K();else break}}h.hash=function(a){return""+Math.round(a.n)+"."+Math.round(a.v)+"."+Math.round(a.A)};
function na(a,b,c,d,e){null==d&&(d=1);this.a=a;this.ec=d;this.gd=0;this.Z=new ka(b);this.yb=[];this.Vc=[];this.jb=[];this.df=c;this.ve=e}h=na.prototype;h.get=function(a){var b=this.Z.find(a);null==b&&this.Xd(a);return b};h.contains=function(a){return this.Z.contains(a)};h.trim=function(a){var b=this.Z.Pc,c=this.Z;c.Pc=a;ma(c);a=this.Z;a.Pc=b;ma(a)};h.reset=function(){this.Z.clear()};h.size=function(){return this.Z.bb};
h.Xd=function(a){var b=this.Z.hash(a),c=this.jb.indexOf(b);-1==c&&(c=this.yb.indexOf(b),-1!=c&&(this.yb.splice(c,1),this.Vc.splice(c,1)),this.yb.unshift(b),this.Vc.unshift(a),20<this.yb.length&&(this.yb.pop(),this.Vc.pop()))};
h.update=function(){if(0<this.yb.length&&this.gd<this.ec){var a=this.yb.shift(),b=this.Vc.shift();if(-1==this.jb.indexOf(a)){this.jb.push(a);this.gd++;var a=function(a,b){this.jb.splice(this.jb.indexOf(this.Z.hash(a)),1);this.gd--;la(this.Z,a,b,b.size());null!=this.df&&this.df(a)}.bind(this),c=function(a){this.jb.splice(this.jb.indexOf(this.Z.hash(a)),1);this.gd--}.bind(this);null!=this.ve&&new this.ve(this.a,b,a,c)}}};function oa(a,b,c,d){this.Lg=a;this.b=[0,0,0];this.g=[0,0,0];this.Sb=1;this.Ae=b;this.dc=c;this.Fb=d;this.Pa=q.e.create();this.ic=q.e.create();this.Sc=q.e.create();this.Ka=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];this.sf=[0,0,0,0];this.N=!0}h=oa.prototype;h.za=function(a){this.b=a;this.N=!0};h.sa=function(a){this.g=a;this.N=!0};h.aa=function(){return[this.b[0],this.b[1],this.b[2]]};h.oa=function(){return[this.g[0],this.g[1],this.g[2]]};
function pa(a){a.N&&a.update();return a.Pa}function qa(a){a.N&&a.update();return a.ic}function ra(a){a.N&&a.update();return a.Sc}function x(a,b,c){a.N&&a.update();q.e.ub(a.Pa,b,a.sf);b=q.ea.length(a.sf);return!0==c?b<a.dc?[Number.POSITIVE_INFINITY,b]:[a.ic[0]/b,b]:b<a.dc?Number.POSITIVE_INFINITY:a.ic[0]/b}
function ua(a,b){a.N&&a.update();for(var c=[[b.k[0],b.k[1],b.k[2],1],[b.k[0],b.k[1],b.r[2],1],[b.k[0],b.r[1],b.k[2],1],[b.k[0],b.r[1],b.r[2],1],[b.r[0],b.k[1],b.k[2],1],[b.r[0],b.k[1],b.r[2],1],[b.r[0],b.r[1],b.k[2],1],[b.r[0],b.r[1],b.r[2],1]],d=0;6>d;d++){for(var e=!0,f=0;8>f;f++)if(0<=q.ie.ue(a.Ka[d],c[f])){e=!1;break}if(e)return!1}return!0}
h.update=function(){this.Pa=q.e.create();q.e.multiply(q.Sa(2,q.ha(-this.g[2])),q.Sa(0,q.ha(-this.g[1]-90)),this.Pa);q.e.multiply(this.Pa,q.Sa(2,q.ha(-this.g[0])),this.Pa);q.e.multiply(this.Pa,q.Bb(-this.b[0],-this.b[1],-this.b[2]),this.Pa);this.ic=q.Mg(this.Ae,this.Sb,this.dc,this.Fb);this.Sc=q.e.create();q.e.multiply(this.ic,this.Pa,this.Sc);this.Ka[0]=[0,0,1,1];this.Ka[1]=[0,0,-1,1];this.Ka[2]=[1,0,0,1];this.Ka[3]=[-1,0,0,1];this.Ka[4]=[0,1,0,1];this.Ka[5]=[0,-1,0,1];var a=q.e.create();q.e.Qb(this.Sc,
a);for(var b=0;6>b;b++)this.Ka[b]=q.e.Rc(a,this.Ka[b]);this.N=!1};q.xf=function(a,b,c,d,e,f){var g=e.get(c);if(!g)return[d,c.n>=f];var k=v(a.o,c.n);d=(b[0]-c.v)/k;k=(b[1]-c.A)/k;d=q.Ia(d,0,0.9999);var k=q.Ia(k,0,0.9999),l=q.Ba,m=d*(l-1),n=k*(l-1),p=Math.floor(m),r=Math.floor(n),s=g.ba[r*l+p],u=g.ba[(r+1)*l+p],m=m-p,s=s+(g.ba[r*l+p+1]-s)*m,l=s+(u+(g.ba[(r+1)*l+p+1]-u)*m-s)*(n-r),n=0,n=0.5>k?0.5>d?0:1:0.5>d?2:3;return!(g.fa&1<<n)||c.n>=f?[l,!0]:q.xf(a,b,z(c,n),l,e,f)};q.oc=function(a,b,c,d){null==d&&(d=Number.MAX_VALUE);return q.xf(a,b,a.o.H,0,c,d)};
q.yf=function(a,b,c,d,e,f){var g=e.get(c);if(!g)return[d,c.n>=f];var k=v(a.o,c.n);d=(b[0]-c.v)/k;for(var k=(b[1]-c.A)/k,l=a.c,m=g.Wb(l.b,l.Ng),n=0,p=q.Ba,r=q.Ba-1,s=0;1>=s;s++)for(var u=0;1>=u;u++){var y=[];q.e.ub(m,[u,s,g.ba[s*r*p+u*r]],y);x(l.i,y);y=g.u[s][u];y>n&&(n=y)}l=0;l=0.5>k?0.5>d?0:1:0.5>d?2:3;return!(g.fa&1<<l)||c.n>=f?[n,!0]:q.yf(a,b,z(c,l),n,e,f)};q.Ih=function(a,b,c,d){null==d&&(d=Number.MAX_VALUE);return q.yf(a,b,a.o.H,0,c,d)};
q.zf=function(a,b,c,d,e,f){var g=e.get(c);if(!g)return[d,c.n>=f];d=v(a.o,c.n);var k=(b[0]-c.v)/d,l=0,l=0.5>(b[1]-c.A)/d?0.5>k?0:1:0.5>k?2:3;return!(g.fa&1<<l)||c.n>=f?[{Ef:c,af:g},!0]:q.zf(a,b,z(c,l),{Ef:c,af:g},e,f)};q.ab=function(a,b,c,d){null==d&&(d=Number.MAX_VALUE);return q.zf(a,b,a.o.H,{},c,d)};
q.Zg=function(a,b,c,d){var e=v(a.o,c.n);a=(b[0]-c.v)/e;c=(b[1]-c.A)/e;a=q.Ia(a,0,0.9999);c=q.Ia(c,0,0.9999);b=q.Ba;var f=a*(b-1);a=c*(b-1);c=Math.floor(f);var e=Math.floor(a),g=d.ba[e*b+c],k=d.ba[(e+1)*b+c],f=f-c,g=g+(d.ba[e*b+c+1]-g)*f;return g+(k+(d.ba[(e+1)*b+c+1]-k)*f-g)*(a-e)};function va(a,b,c){this.ja=a;this.V=null;this.B=b;this.se=null;this.Lc=null==c?!1:c}h=va.prototype;
h.Qd=function(){this.V=document.createElement("canvas");if(null!=this.V&&(this.V.width=this.B[0],this.V.height=this.B[1],this.V.style.display="block",null!=this.V.getContext)){try{this.h=this.V.getContext("webgl",{preserveDrawingBuffer:this.Lc})||this.V.getContext("experimental-webgl",{preserveDrawingBuffer:this.Lc})}catch(a){}this.h&&(this.h.getExtension("OES_standard_derivatives"),this.ja.appendChild(this.V),this.h.ke=this.V.width,this.h.je=this.V.height,this.h.clearColor(0,0,0,1),this.h.enable(this.h.DEPTH_TEST),
this.h.viewport(0,0,this.h.ke,this.h.je),this.h.clear(this.h.COLOR_BUFFER_BIT|this.h.DEPTH_BUFFER_BIT))}};h.resize=function(a,b){this.B=a;null!=this.V&&!0!=b&&(this.V.width=this.B[0],this.V.height=this.B[1]);null!=this.h&&(this.h.ke=this.V.width,this.h.je=this.V.height)};h.clear=function(){this.h.clear(this.h.DEPTH_BUFFER_BIT);this.h.enable(this.h.CULL_FACE)};
h.useProgram=function(a,b,c,d){this.se!=a&&(this.h.useProgram(a.ya),this.se=a,wa(a),b=a.getAttribute(b),this.h.enableVertexAttribArray(b),null!=c&&(c=a.getAttribute(c),this.h.enableVertexAttribArray(c)),null!=d&&(a=a.getAttribute(d),this.h.enableVertexAttribArray(a)))};h.bindTexture=function(a){!1!=a.Vd&&(this.h.activeTexture(this.h.TEXTURE0),this.h.bindTexture(this.h.TEXTURE_2D,a.R))};q.qh=function(){return!0};
function xa(a,b){null!=b?a.h.bindFramebuffer(a.h.FRAMEBUFFER,b.Be):(a.h.bindTexture(a.h.TEXTURE_2D,null),a.h.bindRenderbuffer(a.h.RENDERBUFFER,null),a.h.bindFramebuffer(a.h.FRAMEBUFFER,null))};function ya(a){a=this.h=a.h;if(null!=a){this.S=null;this.S=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.S);var b=[0,0,0,1,0,0,1,0,0,1,1,0,1,1,0,0,1,0,0,1,0,0,0,0,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,0,1,1,0,1,1,0,0,1,0,0,0,0,0,1,1,0,0,1,0,1,1,1,0,1,1,1,0,1,0,0,1,1];a.bufferData(a.ARRAY_BUFFER,new Float32Array(b),a.STATIC_DRAW);this.S.Ea=3;this.S.qa=b.length/3;this.na=36}}ya.prototype.K=function(){this.h.deleteBuffer(this.S)};
ya.prototype.Tb=function(a,b){var c=this.h;if(null!=c){var d=a.getAttribute(b);c.bindBuffer(c.ARRAY_BUFFER,this.S);c.vertexAttribPointer(d,this.S.Ea,c.FLOAT,!1,0,0);c.drawArrays(c.LINES,0,this.S.qa)}};q.eb=null;
function za(a,b,c){this.j=b.j;this.h=a.h;this.Ac=c;a=this.h;if(null!=a&&(this.cb=this.S=null,this.S=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.S),a.bufferData(a.ARRAY_BUFFER,new Float32Array(b.F),a.STATIC_DRAW),this.S.Ea=3,this.S.qa=b.F.length/3,this.cb=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.cb),a.bufferData(a.ARRAY_BUFFER,new Float32Array(b.M),a.STATIC_DRAW),this.cb.Ea=2,this.cb.qa=b.M.length/2,this.na=12*this.S.qa+8*this.cb.qa,this.Wc=this.S.qa/3,null==q.eb)){b=Array(196605);for(c=
0;196605>c;c+=9)b[c]=1,b[c+1]=0,b[c+2]=0,b[c+3]=0,b[c+4]=1,b[c+5]=0,b[c+6]=0,b[c+7]=0,b[c+8]=1;q.eb=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,q.eb);a.bufferData(a.ARRAY_BUFFER,new Float32Array(b),a.STATIC_DRAW);q.eb.Ea=3;q.eb.qa=b.length/3}}za.prototype.K=function(){this.h.deleteBuffer(this.S);this.h.deleteBuffer(this.cb)};
za.prototype.Tb=function(a,b,c,d){var e=this.h;if(null!=e){b=a.getAttribute(b);c=a.getAttribute(c);if(null!=d)var f=a.getAttribute(d);e.bindBuffer(e.ARRAY_BUFFER,this.S);e.vertexAttribPointer(b,this.S.Ea,e.FLOAT,!1,0,0);e.bindBuffer(e.ARRAY_BUFFER,this.cb);e.vertexAttribPointer(c,this.cb.Ea,e.FLOAT,!1,0,0);null!=d&&(e.bindBuffer(e.ARRAY_BUFFER,q.eb),e.vertexAttribPointer(f,q.eb.Ea,e.FLOAT,!1,0,0));e.drawArrays(e.TRIANGLES,0,this.S.qa)}};za.prototype.size=function(){return this.na};function A(a,b,c){this.h=a.h;this.ya=null;this.ge=[];this.hd=[];this.createProgram(b,c)}A.prototype.createShader=function(a,b){if(!a)return null;var c=this.h;if(null!=c){var d;d=!0!=b?c.createShader(c.FRAGMENT_SHADER):c.createShader(c.VERTEX_SHADER);c.shaderSource(d,a);c.compileShader(d);return c.getShaderParameter(d,c.COMPILE_STATUS)?d:(alert("An error occurred compiling the shaders: "+c.getShaderInfoLog(d)),null)}};
A.prototype.createProgram=function(a,b){var c=this.h;if(null!=c){var d=this.createShader(a,!0),e=this.createShader(b,!1),f=c.createProgram();c.attachShader(f,d);c.attachShader(f,e);c.linkProgram(f);c.getProgramParameter(f,c.LINK_STATUS)||alert("Unable to initialize the shader program.");c.useProgram(f);this.ya=f}};function wa(a){var b=a.h;null!=b&&null!=a.ya&&(a=a.getUniform("uSampler"),null!=a&&b.uniform1i(a,0))}
function C(a,b,c){var d=a.h;null!=d&&null!=a.ya&&(a=a.getUniform(b),null!=a&&d.uniformMatrix4fv(a,!1,c))}function Aa(a,b,c){var d=a.h;null!=d&&null!=a.ya&&(a=a.getUniform(b),null!=a&&d.uniform1f(a,c))}A.prototype.getAttribute=function(a){var b=this.h;if(null!=b&&null!=this.ya)return null==this.hd[a]?(b=b.getAttribLocation(this.ya,a),this.hd[a]=b):this.hd[a]};
A.prototype.getUniform=function(a){var b=this.h;if(null!=b&&null!=this.ya)return null==this.ge[a]?(b=b.getUniformLocation(this.ya,a),this.ge[a]=b):this.ge[a]};q.Sf="attribute vec3 aPosition;\nuniform mat4 uMVP;\nvoid main(){ \ngl_Position = uMVP * vec4(aPosition, 1.0);\n}";q.Qf="precision mediump float;\nvoid main() {\ngl_FragColor = vec4(0.0, 0.0, 1.0, 1.0);\n}";q.Yg="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uMVP;\nvarying vec2 vTexCoord;\nvoid main(){ \ngl_Position = uMVP * vec4(aPosition, 1.0);\nvTexCoord = aTexCoord;\n}";q.Xg="precision mediump float;\nuniform sampler2D uSampler;\nvarying vec2 vTexCoord;\nconst vec4 gray = vec4(0.125, 0.125, 0.125, 1.0);\nvoid main() {\nfloat fade = smoothstep(0.51, 0.55, vTexCoord.t);\ngl_FragColor = mix(texture2D(uSampler, vTexCoord), gray, fade);\n}";
q.lg="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uMV, uProj;\nuniform float uFogDensity;\nuniform mat4 uGridMat;\nuniform float uGridStep1, uGridStep2;\nconst int HMSize = 5;\nconst float HMSize1 = float(HMSize-1);\nuniform float uHeight[HMSize*HMSize];\nvarying vec2 vTexCoord1;\nvarying vec2 vTexCoord2;\nvarying float vFogFactor;\nfloat round(float x) { return floor(x + 0.5); }\nvoid main() {\nvec3 pos = aPosition;\nfloat z = uHeight[int(round(pos.y*HMSize1)*float(HMSize) + round(pos.x*HMSize1))];\nvec4 camSpacePos = uMV * vec4(pos.xy, z, 1.0);\ngl_Position = uProj * camSpacePos;\nfloat camDist = length(camSpacePos.xyz);\nvFogFactor = exp(uFogDensity * camDist);\nvec4 gridCoord = uGridMat * vec4(pos, 1.0);\nvTexCoord1 = aTexCoord;\nvTexCoord1 = gridCoord.xy * vec2(uGridStep1);\nvTexCoord2 = gridCoord.xy * vec2(uGridStep2);\n}";
q.kg="precision mediump float;\nuniform sampler2D uSampler;\nuniform float uGridBlend;\nvarying vec2 vTexCoord1;\nvarying vec2 vTexCoord2;\nvarying float vFogFactor;\nconst vec4 fogColor = vec4(1, 1, 1, 1);\nvoid main() {\nvec4 gridColor = mix(texture2D(uSampler, vTexCoord1), texture2D(uSampler, vTexCoord2), uGridBlend);\ngl_FragColor = mix(fogColor, gridColor, vFogFactor);\n}";q.jg="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uMV, uProj;\nuniform float uFogDensity;\nuniform mat4 uGridMat;\nuniform float uGridStep1, uGridStep2;\nconst int HMSize = 5;\nconst float HMSize1 = float(HMSize-1);\nuniform float uHeight[HMSize*HMSize];\nvarying vec2 vTexCoord1;\nvarying vec2 vTexCoord2;\nvarying float vDepth;\nfloat round(float x) { return floor(x + 0.5); }\nvoid main() {\nvec3 pos = aPosition;\nfloat z = uHeight[int(round(pos.y*HMSize1)*float(HMSize) + round(pos.x*HMSize1))];\nvec4 camSpacePos = uMV * vec4(pos.xy, z, 1.0);\ngl_Position = uProj * camSpacePos;\nfloat camDist = length(camSpacePos.xyz);\nvDepth = camDist;\nvec4 gridCoord = uGridMat * vec4(pos, 1.0);\nvTexCoord1 = aTexCoord;\nvTexCoord1 = gridCoord.xy * vec2(uGridStep1);\nvTexCoord2 = gridCoord.xy * vec2(uGridStep2);\n}";
q.ig="precision mediump float;\nuniform sampler2D uSampler;\nuniform float uGridBlend;\nvarying vec2 vTexCoord1;\nvarying vec2 vTexCoord2;\nvarying float vDepth;\nconst vec4 fogColor = vec4(1, 1, 1, 1);\nvoid main() {\ngl_FragColor = fract(vec4(1.0, 1.0/255.0, 1.0/65025.0, 1.0/16581375.0) * vDepth) + (-0.5/255.0);\n}";q.gh="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uMV, uProj;\nuniform float uFogDensity;\nvarying vec2 vTexCoord;\nvarying float vFogFactor;\nvoid main() {\nvec4 camSpacePos = uMV * vec4(aPosition, 1.0);\ngl_Position = uProj * camSpacePos;\nfloat camDist = length(camSpacePos.xyz);\nvFogFactor = exp(uFogDensity * camDist);\nvTexCoord = aTexCoord;\n}";
q.fh="precision mediump float;\nuniform sampler2D uSampler;\nvarying vec2 vTexCoord;\nvarying float vFogFactor;\nconst vec4 fogColor = vec4(1, 1, 1, 1);\nvoid main() {\ngl_FragColor = mix(fogColor, texture2D(uSampler, vTexCoord), vFogFactor);\n}";q.eh="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\nattribute vec3 aBarycentric;\nuniform mat4 uMV, uProj;\nuniform float uFogDensity;\nvarying vec2 vTexCoord;\nvarying vec3 vBarycentric;\nvarying float vFogFactor;\nvoid main() {\nvec4 camSpacePos = uMV * vec4(aPosition, 1.0);\ngl_Position = uProj * camSpacePos;\nfloat camDist = length(camSpacePos.xyz);\nvFogFactor = exp(uFogDensity * camDist);\nvTexCoord = aTexCoord;\nvBarycentric = camSpacePos.xyz;\n}";
q.dh="precision mediump float;\n#extension GL_OES_standard_derivatives : enable\nuniform sampler2D uSampler;\nvarying vec2 vTexCoord;\nvarying vec3 vBarycentric;\nvarying float vFogFactor;\nvoid main() {\n#ifdef GL_OES_standard_derivatives\nvec3 nx = dFdx(vBarycentric);\nvec3 ny = dFdy(vBarycentric);\nvec3 normal=normalize(cross(nx,ny));\ngl_FragColor = vec4(vec3(max(0.0,normal.z*(204.0/255.0))+(32.0/255.0)),1.0);\n#else\ngl_FragColor = vec4(1.0,1.0,1.0,1.0);\n#endif\n}";q.Ff="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\nattribute vec3 aBarycentric;\nuniform mat4 uMV, uProj;\nuniform float uFogDensity;\nvarying vec2 vTexCoord;\nvarying vec3 vBarycentric;\nvarying float vFogFactor;\nvoid main() {\nvec4 camSpacePos = uMV * vec4(aPosition, 1.0);\ngl_Position = uProj * camSpacePos;\nfloat camDist = length(camSpacePos.xyz);\nvFogFactor = exp(uFogDensity * camDist);\nvTexCoord = aTexCoord;\nvBarycentric = aBarycentric;\n}";
q.ih="precision mediump float;\n#extension GL_OES_standard_derivatives : enable\nuniform sampler2D uSampler;\nvarying vec2 vTexCoord;\nvarying vec3 vBarycentric;\nvarying float vFogFactor;\nconst vec4 fogColor = vec4(1, 1, 1, 1);\nfloat edgeFactor(){\n#ifdef GL_OES_standard_derivatives\nvec3 d = fwidth(vBarycentric);\nvec3 a3 = smoothstep(vec3(0.0), d*1.0, vBarycentric);\nreturn min(min(a3.x, a3.y), a3.z);\n#else\nfloat a = min(min(vBarycentric.x, vBarycentric.y), vBarycentric.z);\nreturn a > 0.1 ? 1.0 : smoothstep(0.0,1.0,a*10.0);\n#endif\n}\nvoid main() {\ngl_FragColor = mix(fogColor, vec4( mix(vec3(0.0), texture2D(uSampler, vTexCoord).rgb, edgeFactor()) , 1.0), vFogFactor);\n}";
q.hh="precision mediump float;\n#extension GL_OES_standard_derivatives : enable\nuniform sampler2D uSampler;\nvarying vec2 vTexCoord;\nvarying vec3 vBarycentric;\nvarying float vFogFactor;\nconst vec4 fogColor = vec4(1, 1, 1, 1);\nfloat edgeFactor(){\n#ifdef GL_OES_standard_derivatives\nvec3 d = fwidth(vBarycentric);\nvec3 a3 = smoothstep(vec3(0.0), d*1.0, vBarycentric);\nreturn min(min(a3.x, a3.y), a3.z);\n#else\nfloat a = min(min(vBarycentric.x, vBarycentric.y), vBarycentric.z);\nreturn a > 0.1 ? 1.0 : smoothstep(0.0,1.0,a*10.0);\n#endif\n}\nvoid main() {\ngl_FragColor = vec4( mix(vec3(0.0), vec3(0.5), edgeFactor()) , 1.0);\n}";
q.bh="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uMV, uProj;\nuniform float uFogDensity;\nvarying vec2 vTexCoord;\nvarying float vDepth;\nvoid main() {\nvec4 camSpacePos = uMV * vec4(aPosition, 1.0);\ngl_Position = uProj * camSpacePos;\nfloat camDist = length(camSpacePos.xyz);\nvDepth = camDist;\nvTexCoord = aTexCoord;\n}";q.ah="precision mediump float;\nuniform sampler2D uSampler;\nvarying float vDepth;\nvoid main() {\ngl_FragColor = fract(vec4(1.0, 1.0/255.0, 1.0/65025.0, 1.0/16581375.0) * vDepth) + (-0.5/255.0);\n}";
q.pg="\nattribute vec4 aPosition;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uData;\nuniform vec4 uColor;\nuniform float uDepth;\nvarying vec4 vColor;\nvarying vec2 vTexcoords;\nvoid main(void){\nint i=int(aPosition.x);\nif(i==0) gl_Position=uProjectionMatrix*vec4(floor(uData[0][0]+0.1),floor(uData[0][1]+0.1),uDepth,1.0), vTexcoords=vec2(uData[0][2], uData[0][3]);\nif(i==1) gl_Position=uProjectionMatrix*vec4(floor(uData[1][0]+0.1),floor(uData[1][1]+0.1),uDepth,1.0), vTexcoords=vec2(uData[1][2], uData[1][3]);\nif(i==2) gl_Position=uProjectionMatrix*vec4(floor(uData[2][0]+0.1),floor(uData[2][1]+0.1),uDepth,1.0), vTexcoords=vec2(uData[2][2], uData[2][3]);\nif(i==3) gl_Position=uProjectionMatrix*vec4(floor(uData[3][0]+0.1),floor(uData[3][1]+0.1),uDepth,1.0), vTexcoords=vec2(uData[3][2], uData[3][3]);\nvec4 c=uColor*(1.0/255.0);\nc.w*=1.0;\nvColor=c;\n}";
q.og="precision mediump float;\nvarying vec4 vColor;\nvarying vec2 vTexcoords;\nuniform sampler2D uSampler;\nvoid main(void){\nvec4 c=texture2D(uSampler, vec2(vTexcoords.x, vTexcoords.y) );\nc*=vColor;\ngl_FragColor = c;\n}";function O(a,b,c,d){this.m=a;this.h=a.h;this.Be=this.R=null;this.na=0;this.Ac=d;this.Id=this.le=0;this.ca=null;this.Vd=!1;this.a=c;null!=b&&this.load(b)}O.prototype.K=function(){this.h.deleteTexture(this.R)};O.prototype.size=function(){return this.na};
function Ba(a,b,c,d,e,f){var g=a.h;a.R=g.createTexture();g.bindTexture(g.TEXTURE_2D,a.R);f=!0==f?g.REPEAT:g.CLAMP_TO_EDGE;g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,f);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,f);f=!1;switch(e){case "linear":g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);break;case "trilinear":g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR_MIPMAP_LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,
g.LINEAR);f=!0;break;default:g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST)}g.pixelStorei(g.UNPACK_ALIGNMENT,1);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,b,c,0,g.RGBA,g.UNSIGNED_BYTE,d);!0==f&&g.generateMipmap(g.TEXTURE_2D);g.bindTexture(g.TEXTURE_2D,null);a.le=b;a.Id=c;a.na=b*c*4;a.Vd=!0}
function Ca(a,b,c){var d=a.h;a.R=d.createTexture();d.bindTexture(d.TEXTURE_2D,a.R);c=!0==c?d.REPEAT:d.CLAMP_TO_EDGE;d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,c);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,c);c=!1;switch("linear"){case "linear":d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);break;case "trilinear":d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR_MIPMAP_LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,
d.LINEAR);c=!0;break;default:d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST)}!0!=q.Yd&&(d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,b),!0==c&&d.generateMipmap(d.TEXTURE_2D));d.bindTexture(d.TEXTURE_2D,null);a.le=b.naturalWidth;a.Id=b.naturalHeight;a.na=b.naturalWidth*b.naturalHeight*4;a.Vd=!0}
O.prototype.load=function(a,b,c){this.ca=new Image;this.ca.crossOrigin="anonymous";this.ca.onload=function(){if(null==this.a||!0!=this.a.w)Ca(this,this.ca,!1),this.ca=null}.bind(this);this.ca.onerror=function(){null!=this.a&&!0==this.a.w||null==c||c()}.bind(this);this.ca.src=a};
O.prototype.createFramebuffer=function(a,b){if(null!=this.R){var c=this.h,d=c.createFramebuffer();c.bindFramebuffer(c.FRAMEBUFFER,d);d.width=a;d.height=b;c.bindTexture(c.TEXTURE_2D,this.R);var e=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,e);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,a,b);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,this.R,0);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,e);c.bindTexture(c.TEXTURE_2D,
null);c.bindRenderbuffer(c.RENDERBUFFER,null);c.bindFramebuffer(c.FRAMEBUFFER,null);this.Be=d}};function Da(a,b){this.m=a;this.W=new za(a,b.W);this.R=new O(a);Ca(this.R,b.ca);this.Ve=b.Ve;this.Qe=b.Qe}Da.prototype.K=function(){this.W.K();this.R.K()};Da.prototype.size=function(){return this.W.size()+this.R.size()};function Ea(a,b){this.m=a;this.Z=new ka(b)}Ea.prototype.get=function(a,b){var c=this.Z.find(a);if(c)return c;c=new Da(this.m,b);la(this.Z,a,c,c.size());return c};Ea.prototype.size=function(){return this.Z.bb};Ea.prototype.reset=function(){return this.Z.clear()};function Fa(){this.F=[];this.M=[];this.j=new ia;this.Ac=this.na=0}Fa.prototype.K=function(){this.F=[];this.M=[];this.j=null};
Fa.prototype.load=function(a,b,c){q.Te(a,function(a){this.Ac=a.byteLength;for(var c=0,f=1/65535,g="",k=0;8>k;k++)g+=String.fromCharCode(a.getUint8(c,!0)),c+=1;if("BIN.MESH"==g&&(k=a.getUint32(c,!0),c+=4,!(1<k))){for(k=0;3>k;k++)this.j.k[k]=a.getFloat64(c,!0),c+=8;for(k=0;3>k;k++)this.j.r[k]=a.getFloat64(c,!0),c+=8;for(var g=a.getUint16(c,!0),c=c+2,l=Array(3*g),m=0;m<g;m++)k=3*m,l[k]=a.getUint16(c,!0),c+=2,l[k+1]=a.getUint16(c,!0),c+=2,l[k+2]=a.getUint16(c,!0),c+=2;for(var g=a.getUint16(c,!0),c=c+
2,n=Array(2*g),m=0;m<g;m++)k=2*m,n[k]=a.getUint16(c,!0),c+=2,n[k+1]=65535-a.getUint16(c,!0),c+=2;g=a.getUint16(c,!0);c+=2;this.F=Array(9*g);this.M=Array(6*g);for(m=0;m<g;m++){for(k=0;3>k;k++){var p=3*a.getUint16(c,!0),c=c+2,r=9*m+3*k;this.F[r]=l[p]*f;this.F[r+1]=l[p+1]*f;this.F[r+2]=l[p+2]*f}for(k=0;3>k;k++)p=2*a.getUint16(c,!0),c+=2,r=6*m+2*k,this.M[r]=n[p]*f,this.M[r+1]=n[p+1]*f}this.na=8*(this.F.length+this.M.length)+56;null!=b&&b()}}.bind(this),function(){null!=c&&c()}.bind(this))};
Fa.prototype.size=function(){return this.na};Fa.prototype.fileSize=function(){return this.Ac};q.dd=function(a,b){b*=Math.PI;a=2*a*Math.PI;return[Math.cos(a)*Math.sin(b)*0.5+0.5,Math.sin(a)*Math.sin(b)*0.5+0.5,0.5*Math.cos(b)+0.5]};q.Ba=5;
function Ga(a,b,c,d){this.a=a;this.j=new ia;this.u=[];this.ba=[];this.fa=0;this.mc=[];for(var e=0;2>e;e++)this.u[e]=[];a=c.xc;var f=a.getInt16(c.p,!0);c.p+=2;e=a.getInt16(c.p,!0);c.p+=2;this.j.k[0]=b.v;this.j.k[1]=b.A;this.j.k[2]=f;f=v(this.a.o,b.n);this.j.r[0]=b.v+f;this.j.r[1]=b.A+f;this.j.r[2]=e;if(2<d){for(e=0;2>e;e++)for(b=0;2>b;b++)this.u[e][b]=q.te(a.getUint16(c.p,!0)),c.p+=2;q.te(a.getUint16(c.p,!0));c.p+=2;a.getUint16(c.p,!0);c.p+=2}else for(e=0;2>e;e++)for(b=0;2>b;b++)this.u[e][b]=a.getFloat32(c.p,
!0),c.p+=4;if(1<d)for(d=a.getInt16(c.p,!0),c.p+=2,b=a.getInt16(c.p,!0),c.p+=2,e=0,f=q.Ba*q.Ba;e<f;e++)this.ba[e]=d+(a.getInt16(c.p,!0)+32768)*((b-d)/65535),c.p+=2;else for(e=0,f=q.Ba*q.Ba;e<f;e++)this.ba[e]=a.getInt16(c.p,!0),c.p+=2;for(e=0;4>e;e++)this.mc[e]=null;this.fa=0}
Ga.prototype.Wb=function(a,b){var c=b;null!=c?(c[0]=w(this.j,0),c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=w(this.j,1),c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=this.j.k[0]-a[0],c[13]=this.j.k[1]-a[1],c[14]=0,c[15]=1):(c=q.e.create(),q.e.multiply(q.Bb(this.j.k[0]-a[0],this.j.k[1]-a[1],0),q.$c(w(this.j,0),w(this.j,1),1),c));return c};
function Ha(a,b,c){null!=c&&(c[0]=w(a.j,0),c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=w(a.j,1),c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=w(a.j,2),c[11]=0,c[12]=a.j.k[0]-b[0],c[13]=a.j.k[1]-b[1],c[14]=a.j.k[2],c[15]=1);return c}Ga.prototype.size=function(){for(var a=308,b=0;4>b;b++)null!=this.mc[b]&&(a+=this.mc[b].size());return a};
function Ia(a,b,c){this.J=b;this.a=a;a="";for(var d=0;8>d;d++)a+=String.fromCharCode(c.xc.getUint8(c.p,!0)),c.p+=1;"METATILE"==a&&(a=c.xc.getUint32(c.p,!0),c.p+=4,3<a||(this.Hf=Ja(this,b,c,a)))}Ia.prototype.K=function(){};function Ja(a,b,c,d){var e=new Ga(a.a,b,c,d),f=c.xc.getUint8(c.p,!0);c.p+=1;for(var g=0;4>g;g++)f&1<<g+4&&(e.mc[g]=Ja(a,z(b,g),c,d));e.fa=f&15;return e}Ia.prototype.size=function(){return this.Hf.size()};
q.Mf=function(a,b,c,d){this.a=a;this.J=b;this.gc=c;this.fc=d;this.zg=function(b){!0!=this.a.w&&null!=this.gc&&(b=new Ia(a,this.J,{xc:b,p:0}),this.gc(this.J,b))}.bind(this);this.wg=function(){!0!=this.a.w&&null!=this.fc&&this.fc(this.J)}.bind(this);q.Te(ba(this.a.o,this.J),this.zg,this.wg)};
function Ka(a,b,c,d,e){this.a=a;this.ka=new na(a,b,c,d,e);this.contains=this.ka.contains.bind(this.ka);this.trim=this.ka.trim.bind(this.ka);this.reset=this.ka.reset.bind(this.ka);this.Xd=this.ka.Xd.bind(this.ka);this.update=this.ka.update.bind(this.ka);this.size=this.ka.size.bind(this.ka)}
Ka.prototype.get=function(a){for(var b=a,c=this.a.o;Math.abs(b.n-c.Ze)%c.Ye&&b.n>c.H.n;)b=b.parent();if(b=this.ka.get(b)){for(var c=new t(b.a,b.J.n,b.J.v,b.J.A),d=b.Hf;c.n<a.n;){var e=v(b.a.o,c.n),f=c.v+e/2,e=c.A+e/2,g=0;Math.round(a.v)>=Math.round(f)&&(g|=1,c.v=f);Math.round(a.A)>=Math.round(e)&&(g|=2,c.A=e);c.n++;(d=d.mc[g])||console.log("Missing tile metadata")}!c.isEqual(a)&&console.log("Metatile inconsistency");a=d}else a=null;return a};q.Yc=1.1;q.Af=0.7;q.Yd=!1;
function La(a,b,c,d){this.a=a;this.nf=this.of=this.hc=this.lf=this.mf=null;this.ja=b;this.hf=c;this.wb=this.w=!1;a=this.ja.getBoundingClientRect();this.B=[a.width,a.height];this.rc=!1;this.N=this.Me=!0;this.Wd=1;this.qe=this.$=this.a.q.$;this.Ha=0.5*this.a.q.Ha;this.va=0;this.gb=[0,1,0];this.fe=this.a.o.$g*q.Af;this.Tc=!0;this.m=new va(b,this.B,d);this.i=new oa(this,this.a.q.pe,2,this.a.q.uc);this.b=[this.a.o.zc[0],this.a.o.zc[1],this.a.o.zc[2]];this.g=[this.a.o.yc[0],this.a.o.yc[1],this.a.o.yc[2]];
this.L=new Ka(this.a,Number.MAX_VALUE,function(){this.N=!0}.bind(this),this.a.q.ec,q.Mf);this.Ua=new q.Nf(this.a,Number.MAX_VALUE,function(){this.N=!0}.bind(this),this.a.q.ec,q.Of);this.Hd=new Ea(this.m,this.a.q.Je);this.lb=this.Ab=this.lc=this.ac=this.$b=null;this.bc=this.a.q.Oe;this.fd=!0;this.Nd=this.jc=this.kc=this.pf=null;this.wd=this.vd=this.td=this.qd=this.Jd=!1;this.Ub=0;this.xd=this.ud=this.rd=this.sd=!1;this.Jf=!0;this.wf=document.getElementById("vadstena-engine-render-stats");this.Xc=this.qf=
this.$a=this.ce=this.de=this.ed=this.nc=0;this.Pb=[];this.Sd=null;this.Hc=this.Ic=this.Jc=this.Dd=0;this.yd=q.e.create();this.xe=q.e.create();this.Xf=[0,0,0];this.ye=q.e.create();this.Ng=q.e.create();this.Cb=q.e.create();this.Sg=[0,0,0];this.Rg=[[3,1,2,0],[3,2,1,0],[2,3,0,1],[2,0,3,1],[0,2,1,3],[0,1,2,3],[1,0,3,2],[1,3,0,2]];this.Mc=[0,0,100];this.rb=null;window.addEventListener("resize",this.ff.bind(this),!1);this.m.Qd();this.mf=new A(this.m,q.gh,q.fh);this.of=new A(this.m,q.Ff,q.ih);this.nf=new A(this.m,
q.Ff,q.hh);this.Qg=new A(this.m,q.eh,q.dh);this.lf=new A(this.m,q.lg,q.kg);this.hc=new A(this.m,q.Yg,q.Xg);this.Pg=new A(this.m,q.bh,q.ah);this.Og=new A(this.m,q.jg,q.ig);this.be=new A(this.m,q.Sf,q.Qf);this.zb=new A(this.m,q.pg,q.og);Ma(this);Na(this);Oa(this);Pa(this);Qa(this);this.Rf=new ya(this.m);Ra(this,this.B[0],this.B[1]);window.rf(this.update.bind(this))}h=La.prototype;h.ff=function(){if(!0!=this.w){var a=this.ja.getBoundingClientRect();Ra(this,a.width,a.height)}};
h.K=function(){!0!=this.w&&(this.w=!0,this.L.reset(),this.Ua.reset(),this.Hd.reset(),null!=this.$b&&this.$b.K(),null!=this.ac&&this.ac.K(),null!=this.lc&&this.lc.K(),null!=this.Ab&&this.Ab.K(),null!=this.lb&&this.lb.K(),this.ja.removeChild(this.m.V))};
function Ma(a){var b=new Fa,c=q.Ba;c--;for(var d=0;d<c;d++)for(var e=0;e<c;e++){var f=e/c,g=(e+1)/c,k=d/c,l=(d+1)/c;b.F.push(f,k,0);b.F.push(g,k,0);b.F.push(g,l,0);b.M.push(f,k);b.M.push(g,k);b.M.push(g,l);b.F.push(g,l,0);b.F.push(f,l,0);b.F.push(f,k,0);b.M.push(g,l);b.M.push(f,l);b.M.push(f,k)}b.j.k[0]=b.j.k[1]=b.j.k[2]=0;b.j.r[0]=b.j.r[1]=b.j.r[2]=1;b.na=8*(b.F.length+b.M.length)+56;a.$b=new za(a.m,b);b=new Uint8Array(16384);for(c=0;64>c;c++)for(d=0;64>d;d++)e=4*(64*c+d),1>c||63<=c||1>d||63<=d?
(b[e]=255,b[e+1]=255,b[e+2]=255):(b[e]=32,b[e+1]=32,b[e+2]=32),b[e+3]=255;a.ac=new O(a.m);Ba(a.ac,64,64,b,"trilinear",!0)}function Oa(a){var b=a.bc,c=new Uint8Array(b*b*4);a.lb=new O(a.m);Ba(a.lb,b,b,c);a.lb.createFramebuffer(b,b);for(var b=16,c=new Uint8Array(b*b*4),d=0;d<b;d++)for(var e=0;e<b;e++){var f=4*(d*b+e);c[f]=255;c[f+1]=0;c[f+2]=0;c[f+3]=255}a.pf=new O(a.m);Ba(a.pf,b,b,c)}
function Pa(a){var b=new Uint8Array(2048),c="............................................................ xxx..x..xxx.xxx.x...xxx.xxx.xxx.xxx.xxx..................... x.x.xx....x...x.x...x...x.....x.x.x.x.x......x.............. x.x..x..xxx.xxx.x...xxx.xxx...x.xxx.xxx.........x.x......... x.x..x..x.....x.xxx...x.x.x...x.x.x...x......x...x.......... xxx..x..xxx.xxx..x..xxx.xxx...x.xxx.xxx..x......x.x......... ............................................................".split(" ");a.Bf={0:0,1:4,2:8,
3:12,4:16,5:20,6:24,7:28,8:32,9:36,".":40,":":44,x:48,y:52," ":56};for(var b=new Uint8Array(2048),d=0;8>d;d++)for(var e=0;64>e;e++){var f=4*(64*d+e);b[f]=0;b[f+1]=0;b[f+2]=0;b[f+3]=255}for(var d=0,g=c.length;d<g;d++)for(var k=c[d],e=0,l=k.length;e<l;e++)f=4*(64*d+e),"."!=k.charAt(e)&&(b[f]=255,b[f+1]=255,b[f+2]=255);a.Cf=new O(a.m);Ba(a.Cf,64,8,b)}
function Qa(a){var b=a.m.h;a.kc=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,a.kc);b.bufferData(b.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,2,0,0,1,3,0,0,1]),b.STATIC_DRAW);a.kc.Ea=4;a.kc.qa=4;a.jc=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a.jc);b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),b.STATIC_DRAW);a.jc.Ea=1;a.jc.qa=6}
function Na(a){for(var b=new Fa,c=0;32>c;c++)for(var d=0;64>d;d++){var e=b,f=d/64,g=c/32,k=(d+1)/64,l=(c+1)/32,m=q.dd(f,g),n=[f,g],p=q.dd(f,l),f=[f,l],r=q.dd(k,g),g=[k,g],s=q.dd(k,l),k=[k,l];e.F.push(p[0],p[1],p[2]);e.F.push(m[0],m[1],m[2]);e.F.push(r[0],r[1],r[2]);e.M.push(f[0],f[1]);e.M.push(n[0],n[1]);e.M.push(g[0],g[1]);e.F.push(r[0],r[1],r[2]);e.F.push(s[0],s[1],s[2]);e.F.push(p[0],p[1],p[2]);e.M.push(g[0],g[1]);e.M.push(k[0],k[1]);e.M.push(f[0],f[1]);e.na=8*(e.F.length+e.M.length)+56}b.j.k[0]=
b.j.k[1]=b.j.k[2]=0;b.j.r[0]=b.j.r[1]=b.j.r[2]=1;a.lc=new za(a.m,b);a.Ab=new O(a.m,a.a.q.Ab,a.a)}function Ra(a,b,c){var d=a.i;d.Sb=b/c;d.N=!0;a.B=[b,c];a.m.resize(a.B,void 0);Sa(a);d=[];d[0]=2/b;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=-2/c;d[6]=0;d[7]=0;d[8]=0;d[9]=0;d[10]=1;d[11]=0;d[12]=0.5*-b*d[0];d[13]=0.5*-c*d[5];d[14]=0;d[15]=1;a.Nd=d}function Ta(a,b){var c=Math.log(0.05)/(10*a.a.q.uc*(Math.max(5,-a.g[1])/90));console.log("fden: "+c);Aa(b,"uFogDensity",c)}
function Ua(a,b,c,d){null==a.Pb[b.n]?a.Pb[b.n]=1:a.Pb[b.n]++;if(null!=a.rb){var e=v(a.a.o,b.n);a.rb[0]>b.v&&a.rb[0]<b.v+e&&a.rb[1]>b.A&&a.rb[1]<b.A+e&&console.log("tile-hit: x:"+b.v+" y: "+b.A+" lod: "+b.n)}if(c&&!a.Jd){var f=a.Hd.get(b,c),e=null;if(!0==a.wb)e=a.Pg;else switch(a.Ub){default:e=a.mf;break;case 1:e=a.of;break;case 2:e=a.nf;break;case 3:e=a.Qg}a.m.useProgram(e,"aPosition","aTexCoord",!0==a.Ub?"aBarycentric":null);var g=a.yd;q.e.multiply(pa(a.i),c.Wb(a.b,a.ye),g);c=qa(a.i);C(e,"uMV",g);
C(e,"uProj",c);Ta(a,e);a.m.bindTexture(f.R);f.W.Tb(e,"aPosition","aTexCoord",!0==a.Ub?"aBarycentric":null);if(!0!=a.wb&&(a.Jc+=f.W.size()+f.R.size(),a.Ic+=f.R.size(),a.Hc+=f.W.size(),a.de++,a.$a+=f.W.Wc,!0==a.qd)){a.m.useProgram(a.be,"aPosition");e=q.e.create();q.e.multiply(c,g,e);g=a.yd;q.e.multiply(pa(a.i),Ha(d,a.b,a.ye),g);c=qa(a.i);q.e.multiply(c,g,e);C(a.be,"uMVP",e);a.Rf.Tb(a.be,"aPosition");var g=d.j.k,k=d.j.r,e=a.Q([g[0]+0.5*(k[0]-g[0]),g[1]+0.5*(k[1]-g[1]),k[2]]);!0==a.vd&&(c=""+b.v+" "+
b.A,P(a,Math.round(e[0]-2*c.length),Math.round(e[1]-11),c,[0,255,255,255],e[2]));!0==a.xd&&(c=""+f.R.le+" x "+f.R.Id,P(a,Math.round(e[0]-2*c.length),Math.round(e[1]-18),c,[255,255,255,255],e[2]));!0==a.td&&(c=""+b.n,P(a,Math.round(e[0]-2*c.length),Math.round(e[1]-4),c,[255,0,0,255],e[2]));!0==a.sd&&(c=""+f.W.Wc,P(a,Math.round(e[0]-2*c.length),Math.round(e[1]+3),c,[0,255,0,255],e[2]));!0==a.rd&&(b=Va(a,d,!0),c=""+b[1].toFixed(2)+" "+b[0].toFixed(2),P(a,Math.round(e[0]-2*c.length),Math.round(e[1]+10),
c,[255,0,255,255],e[2]));!0==a.wd&&(e=a.Q([g[0]+0.1*(k[0]-g[0]),g[1]+0.1*(k[1]-g[1]),k[2]]),c=""+d.u[0][0].toFixed(3),P(a,Math.round(e[0]-2*c.length),Math.round(e[1]-4),c,[255,255,0,255],e[2]),e=a.Q([g[0]+0.9*(k[0]-g[0]),g[1]+0.1*(k[1]-g[1]),k[2]]),c=""+d.u[0][1].toFixed(3),P(a,Math.round(e[0]-2*c.length),Math.round(e[1]-4),c,[255,255,0,255],e[2]),e=a.Q([g[0]+0.9*(k[0]-g[0]),g[1]+0.9*(k[1]-g[1]),k[2]]),c=""+d.u[1][1].toFixed(3),P(a,Math.round(e[0]-2*c.length),Math.round(e[1]-4),c,[255,255,0,255],
e[2]),e=a.Q([g[0]+0.1*(k[0]-g[0]),g[1]+0.9*(k[1]-g[1]),k[2]]),c=""+d.u[1][0].toFixed(3),P(a,Math.round(e[0]-2*c.length),Math.round(e[1]-4),c,[255,255,0,255],e[2]))}}else{e=!0==a.wb?a.Og:a.lf;a.m.useProgram(e,"aPosition","aTexCoord");g=a.yd;q.e.multiply(pa(a.i),d.Wb(a.b,a.xe),g);C(e,"uMV",g);C(e,"uProj",qa(a.i));f=a.xe;d.Wb(fa(a.a.o,a.b,a.Xf),f);C(e,"uGridMat",f);Ta(a,e);f=a.a.q.Ke;g=a.a.q.Le;c=q.Ba;c=Math.max(10,a.i.b[2]-0.25*(d.ba[0]+d.ba[c-1]+d.ba[(c-1)*c]+d.ba[(c-1)*c+c-1])+20);c=Math.log(c)/Math.log(f);
var k=Math.pow(f,Math.ceil(c)),l=c-Math.floor(c);Aa(e,"uGridStep1",g/Math.pow(f,Math.floor(c)));Aa(e,"uGridStep2",g/k);Aa(e,"uGridBlend",l);g=d.j.k;k=d.j.r;f=g[0];g=g[1];c=k[0];k=k[1];l=[q.ab(a.a,[f-1,g-1,0],a.L,a.a.o.Oa),q.ab(a.a,[f+1,g-1,0],a.L,a.a.o.Oa),q.ab(a.a,[c+1,g-1,0],a.L,a.a.o.Oa),q.ab(a.a,[c+1,g+1,0],a.L,a.a.o.Oa),q.ab(a.a,[c+1,k+1,0],a.L,a.a.o.Oa),q.ab(a.a,[f+1,k+1,0],a.L,a.a.o.Oa),q.ab(a.a,[f-1,k+1,0],a.L,a.a.o.Oa),q.ab(a.a,[f-1,g+1,0],a.L,a.a.o.Oa)];d=d.ba.slice();k=l[1][0].Ef;l=l[1][0].af;
if(null!=k&&null!=l&&k.n<b.n)for(b=0;5>b;b++)d[b]=q.Zg(a.a,[(c-f)/5*b+f,g],k,l);b=e.h;null!=b&&null!=e.ya&&(f=e.getUniform("uHeight"),null!=f&&b.uniform1fv(f,d));a.m.bindTexture(a.ac);a.$b.Tb(e,"aPosition","aTexCoord");!0!=a.wb&&(a.ce++,a.$a+=a.$b.Wc)}}
function Wa(a){var b=q.e.create();q.e.multiply(q.$c(2,2,2),q.Bb(-0.5,-0.5,-0.5),b);var c=q.e.create();q.e.multiply(q.Bb(a.i.aa()[0],a.i.aa()[1],a.i.aa()[2]-400),q.Tg(0.9*a.i.Fb),c);var d=q.e.create();q.e.multiply(ra(a.i),c,d);q.e.multiply(d,b,d);a.m.useProgram(a.hc,"aPosition","aTexCoord");a.m.bindTexture(a.Ab);wa(a.hc);C(a.hc,"uMVP",d);a.lc.Tb(a.hc,"aPosition","aTexCoord");a.$a+=a.lc.Wc}
function P(a,b,c,d,e,f){if(null!=a.Nd){var g=a.m.h;g.disable(g.CULL_FACE);g.enable(g.DEPTH_TEST);null==f&&g.disable(g.DEPTH_TEST);a.m.useProgram(a.zb,"aPosition",null);a.m.bindTexture(a.Cf);var k=a.kc;g.bindBuffer(g.ARRAY_BUFFER,k);g.vertexAttribPointer(a.zb.getAttribute("aPosition"),k.Ea,g.FLOAT,!1,0,0);k=a.jc;g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,k);C(a.zb,"uProjectionMatrix",a.Nd);var l=a.zb,m=l.h;null!=m&&null!=l.ya&&(l=l.getUniform("uColor"),null!=l&&m.uniform4fv(l,e));Aa(a.zb,"uDepth",null!=f?
f:0);e=b;m=0;for(l=d.length;m<l;m++){var n=a.Bf[d.charAt(m)];C(a.zb,"uData",[b,c,0.015625*n,0,b+4,c,0.015625*(n+4),0,b+4,c+7,0.015625*(n+4),0.875,b,c+7,0.015625*n,0.875]);g.drawElements(g.TRIANGLES,k.qa,g.UNSIGNED_SHORT,0);b+=4}b=e-1;n=a.Bf[" "];C(a.zb,"uData",[b,c,0.015625*n,0,b+4,c,0.015625*(n+4),0,b+4,c+7,0.015625*(n+4),0.875,b,c+7,0.015625*n,0.875]);g.drawElements(g.TRIANGLES,k.qa,g.UNSIGNED_SHORT,0);g.enable(g.CULL_FACE);null==f&&g.enable(g.DEPTH_TEST)}}
function Va(a,b,c){var d=a.B[0]/2,e=Xa(a),f=b.j.r[0]-b.j.k[0],g=[b.j.k[0],b.j.k[1],b.j.k[2]],k=[g[0]+f,g[1],g[2]],l=[g[0]+f,g[1]+f,g[2]],m=[g[0],g[1]+f,g[2]],n=b.j.k[2],p=b.j.r[2],r=0,s=0;e[1]<g[1]?e[0]<g[0]?(s=b.u[0][0],r=e[2]>p?x(a.i,[g[0]-a.b[0],g[1]-a.b[1],p],c):e[2]<n?x(a.i,[g[0]-a.b[0],g[1]-a.b[1],n],c):x(a.i,[g[0]-a.b[0],g[1]-a.b[1],e[2]],c)):e[0]>k[0]?(s=b.u[0][1],r=e[2]>p?x(a.i,[k[0]-a.b[0],k[1]-a.b[1],p],c):e[2]<n?x(a.i,[k[0]-a.b[0],k[1]-a.b[1],n],c):x(a.i,[k[0]-a.b[0],k[1]-a.b[1],e[2]],
c)):(s=b.u[0][0]+(e[0]-g[0])/f*(b.u[0][1]-b.u[0][0]),r=e[2]>p?x(a.i,[e[0]-a.b[0],k[1]-a.b[1],p],c):e[2]<n?x(a.i,[e[0]-a.b[0],k[1]-a.b[1],n],c):x(a.i,[e[0]-a.b[0],k[1]-a.b[1],e[2]],c)):e[1]>m[1]?e[0]<m[0]?(s=b.u[1][0],r=e[2]>p?x(a.i,[m[0]-a.b[0],m[1]-a.b[1],p],c):e[2]<n?x(a.i,[m[0]-a.b[0],m[1]-a.b[1],n],c):x(a.i,[m[0]-a.b[0],m[1]-a.b[1],e[2]],c)):e[0]>l[0]?(s=b.u[1][1],r=e[2]>p?x(a.i,[l[0]-a.b[0],l[1]-a.b[1],p],c):e[2]<n?x(a.i,[l[0]-a.b[0],l[1]-a.b[1],n],c):x(a.i,[l[0]-a.b[0],l[1]-a.b[1],e[2]],c)):
(s=b.u[1][0]+(e[0]-m[0])/f*(b.u[1][1]-b.u[0][1]),r=e[2]>p?x(a.i,[e[0]-a.b[0],k[1]-a.b[1],p],c):e[2]<n?x(a.i,[e[0]-a.b[0],k[1]-a.b[1],n],c):x(a.i,[e[0]-a.b[0],k[1]-a.b[1],e[2]],c)):e[0]<m[0]?(s=b.u[0][0]+(e[1]-g[1])/f*(b.u[1][0]-b.u[0][0]),r=e[2]>p?x(a.i,[g[0]-a.b[0],e[1]-a.b[1],p],c):e[2]<n?x(a.i,[g[0]-a.b[0],e[1]-a.b[1],n],c):x(a.i,[g[0]-a.b[0],e[1]-a.b[1],e[2]],c)):e[0]>l[0]?(s=b.u[0][1]+(e[1]-k[1])/f*(b.u[1][1]-b.u[0][1]),r=e[2]>p?x(a.i,[k[0]-a.b[0],e[1]-a.b[1],p],c):e[2]<n?x(a.i,[k[0]-a.b[0],
e[1]-a.b[1],n],c):x(a.i,[k[0]-a.b[0],e[1]-a.b[1],e[2]],c)):(k=(e[0]-g[0])/f,l=b.u[0][0]+(b.u[0][1]-b.u[0][0])*k,s=l+(e[1]-g[1])/f*(b.u[1][0]+(b.u[1][1]-b.u[1][0])*k-l),r=e[2]>p?x(a.i,[e[0]-a.b[0],e[1]-a.b[1],p],c):e[2]<n?x(a.i,[e[0]-a.b[0],e[1]-a.b[1],n],c):x(a.i,[e[0]-a.b[0],e[1]-a.b[1],e[2]],c));return!0==c?[r[0]*s*d,r[1]]:r*s*d}
function Ya(a,b){var c=a.L.get(b);if(!c||!ua(a.i,ja(c.j,a.b)))return 0;if(!(1E6>c.u[0][0]))return Za(a,b,c);var d=Va(a,c);if(!c.fa||d<q.Yc*a.Wd&&!0!=a.ud){var e=a.Ua.get(b),f;if(!(f=e)){a:{if(c.fa)for(f=0;4>f;f++)if(c.fa&1<<f&&a.Ua.contains(z(b,f))){f=!0;break a}f=!1}f=!f}f?Ua(a,b,e,c):Za(a,b,c);return d}if(d=2.2>d)a:{if(a.Ua.contains(b)&&1E6>c.u[0][0])for(d=0;4>d;d++)if(c.fa&1<<d&&(f=z(b,d),e=a.Ua.get(f),f=a.L.get(f),!e||!f)){d=!0;break a}d=!1}return d?(e=a.Ua.get(b),Ua(a,b,e,c),0):Za(a,b,c)}
function Za(a,b,c){var d=a.Rg,e;e=c.j;var f=a.Sg;null!=f?(f[0]=0.5*(e.k[0]+e.r[0]),f[1]=0.5*(e.k[1]+e.r[1]),e=f):e=[0.5*(e.k[0]+e.r[0]),0.5*(e.k[1]+e.r[1]),0.5*(e.k[2]+e.r[2])];f=a.i.b;e=Math.floor((Math.atan2(a.b[1]+f[1]-e[1],a.b[0]+f[0]-e[0])+Math.PI)/Math.PI*4);e=q.Ia(e,0,7);for(var g=f=0;4>g;g++){var k=d[e][g];c.fa&1<<k&&(f=Math.max(f,Ya(a,z(b,k))))}return f}
function $a(a,b){var c=a.L.get(b);if(!c||!ua(a.i,ja(c.j,a.b)))return 0;if(1E6>c.u[0][0]){var d=Va(a,c);if(!c.fa||d<q.Yc)return d}for(var e=d=0;4>e;e++)c.fa&1<<e&&(d=Math.max(d,$a(a,z(b,e))));return d}function ab(a,b,c){var d=a.L.get(b);if(!d||!ua(c,ja(d.j,a.b)))return 9999999;if(1E6>d.u[0][0]){var e=Va(a,d,!0);if(!d.fa||e[0]<q.Yc)return e[1]}for(var e=9999999,f=0;4>f;f++)d.fa&1<<f&&(e=Math.min(e,ab(a,z(b,f),c)));return e}
function Q(a){switch(a.a.q.wa){case "observer":a.g[1]=q.Ia(a.g[1],-90,10);a.b[2]=q.Ia(a.b[2],5,a.i.Fb);q.e.multiply(q.Sa(2,q.ha(a.g[0])),q.Sa(0,q.ha(a.g[1])),a.Cb);var b=[0,-a.b[2],0];q.e.ub(a.Cb,b);a.gb=[0,1,0];q.e.ub(a.Cb,a.gb);var c=q.oc(a.a,a.b,a.L,a.a.o.Oa);b[2]+=c[0]+a.va;a.i.za(b);a.i.sa(a.g);break;case "drone":a.g[1]=q.Ia(a.g[1],-90,90);a.b[2]=q.Ia(a.b[2],5,a.i.Fb);q.e.multiply(q.Sa(2,q.ha(a.g[0])),q.Sa(0,q.ha(a.g[1])),a.Cb);a.gb=[0,1,0];q.e.ub(a.Cb,a.gb);b=a.i.b;a.i.za([0,0,a.b[2]+q.oc(a.a,
[a.b[0]+b[0],a.b[1]+b[1]],a.L)[0]]);a.i.sa(a.g);break;case "manual":q.e.multiply(q.Sa(2,q.ha(a.g[0])),q.Sa(0,q.ha(a.g[1])),a.Cb),a.gb=[0,1,0],q.e.ub(a.Cb,a.gb),a.i.za([0,0,a.b[2]]),a.i.sa(a.g)}a.N=!0}function R(a){var b=a.i.b;return a.i.aa()[2]-q.oc(a.a,[a.b[0]+b[0],a.b[1]+b[1]],a.L)[0]}function Xa(a){var b=a.i.aa();b[0]+=a.b[0];b[1]+=a.b[1];return b}
function bb(a){if("manual"==a.a.q.wa)return!1;var b=Math.max(a.Ha,5/a.Ha*a.b[2]*0.1);if(R(a)-a.va<b){if(a.b[2]<b){var c=function(a,d,e){var l=0.5*(a+d);if(20<e)return l;this.b[2]=l;Q(this);return R(this)-this.va<b?c(a,l,e+1):c(l,d,e+1)}.bind(a);a.b[2]=c(a.b[2]+250,a.b[2],0)}else{var d=function(a,c,e){var l=0.5*(a+c);if(20<e)return l;this.g[1]=l;Q(this);return R(this)-this.va<b?d(a,l,e+1):d(l,c,e+1)}.bind(a);a.g[1]=d(-89,Math.min(-1,a.g[1]),0)}Q(a)}else{var e=0.5*a.qe;Math.max(e,20/e*a.b[2]*0.1)}return!1}
function cb(a){if("manual"==a.a.q.wa)return!1;var b=1E3,c=20,c=Math.max(20,0.1*a.b[2]);if(a.rc||-10<a.g[1]){var d=function(a,b,g){var k=0.5*(a+b);if(20<g)return k;this.g[1]=k;Q(this);return R(this)<c?d(a,k,g+1):d(k,b,g+1)}.bind(a);R(a)<c&&(a.g[1]=d(-89,Math.min(-1,a.g[1]),0),Q(a))}else for(;R(a)<c&&0<b;)a.b[2]+=0.01,Q(a),b--;return!1}
function db(a){var b=a.a.q;if("manual"==b.wa)return!1;switch(b.Va){case "aboveTerrainOnly":case "aboveTerrainByPixelSize":return bb(a);case "aboveTerrainOnlyOld":return cb(a);default:for(var c,b=!1,d=a.a.q,e=1E3;(c>q.Yc||0>R(a))&&0<e;){b=!0;if("observer"==d.wa)if(a.rc||-10<a.g[1])250>a.b[2]?a.b[2]+=0.3:a.g[1]-=0.3;else{var f=q.ha(a.g[0]),g=q.ha(-a.g[1]);c=0.5/Math.sin(g);g=c*Math.cos(g);f=[-Math.sin(f),Math.cos(f),0];!0!=a.Tc&&(a.b[0]+=g*f[0],a.b[1]+=g*f[1]);a.b[2]+=c}else a.b[2]+=0.5;Q(a);c=$a(a,
a.a.o.H);e--}return b}}
function Sa(a,b){a.wb=null!=b?b:!1;var c=a.a.q;if("drone"==c.wa&&!a.Me){var d=q.oc(a.a,a.b,a.L);if(!d[1])return;a.b[2]+=d[0];a.Me=!0}"aboveTerrainByPixelSize"!=c.Va&&(a.$=a.a.q.$,a.Ha=a.a.q.Ha);var e=!1,d=a.a.q;if("observer"==d.wa){if(a.b[2]<a.$){e=a.$-a.b[2];a.b[2]=a.$;var f=q.ha(a.g[0]),g=q.ha(-a.g[1]),k=0.5/Math.sin(g)*Math.cos(g),f=[-Math.sin(f),Math.cos(f),0];!0!=a.Tc&&(a.b[0]+=k*f[0],a.b[1]+=k*f[1]);if(0<a.va){var l=a.i,m=new oa(l.Lg,9,l.dc,l.Fb);m.za(l.aa());m.sa(l.oa());m.Sb=l.Sb;m.N=!0;m.update();
ab(a,a.a.o.H,m)>a.$&&(a.b[0]+=k*f[0]*e,a.b[1]+=k*f[1]*e,a.va-=Math.sin(g)*e,0>a.va&&(a.va=0))}e=!0}a.b[2]>d.ld&&(a.b[2]=d.ld,e=!0)}a.g[1]<d.nd&&(a.g[1]=d.nd,e=!0);a.g[1]>d.md&&(a.g[1]=d.md,e=!0);!0==e&&Q(a);if("aboveTerrainOnly"==c.Va||"aboveTerrainByPixelSize"==c.Va)db(a),a.m.clear(),Q(a),Ya(a,a.a.o.H),!0!=a.wb&&Wa(a);else{do a.m.clear(),Q(a),Ya(a,a.a.o.H),!0!=a.wb&&Wa(a);while(db(a))}a.L.trim(c.kd/10);a.Ua.trim(c.kd);a.rc=!1}
h.update=function(){if(!0!=this.w){if(null==this.ja||"hidden"!=this.ja.style.visibility){var a=this.ja.getBoundingClientRect();this.B[0]==a.width&&this.B[1]==a.height||this.ff();null!=this.hf&&this.hf();this.L.update();this.Ua.update();!0==this.Jf&&(this.$a=this.ce=this.de=0,this.Pb=[],this.Hc=this.Ic=this.Jc=0,this.nc++,10<=this.nc&&(a=Date.now(),null!=this.Sd&&(this.Dd=0.5*(1E3/(a-this.Sd)*this.nc+this.Dd)),this.Sd=a));a=performance.now();if("aboveTerrainByPixelSize"==this.a.q.Va){var b=this.B[0]/
2;this.$=qa(this.i)[0]*this.fe*b*2;this.Ha=0.5*this.$}!0==this.N&&(b=this.m,b.h.viewport(0,0,b.h.ke,b.h.je),Sa(this));if(!0==this.Jf&&(this.ed++,this.Xc+=performance.now()-a,100<=this.ed&&(this.qf=this.Xc/this.ed,this.ed=this.Xc=0),null!=this.wf&&10<=this.nc&&(this.nc=0,!0==this.N))){var a="FPS: "+Math.round(this.Dd)+"<br/>Render time: "+Math.round(1E3*this.qf)+"<br/>Tile cache: "+Math.round(this.Ua.size()/1048576)+"MB<br/>Metatile cache: "+Math.round(this.L.size()/1048576)+"MB<br/>GPU cache: "+Math.round(this.Hd.size()/
1048576)+"MB<br/>- used: "+Math.round(this.Jc/1048576)+"MB<br/>- used textures: "+Math.round(this.Ic/1048576)+"MB<br/>- used meshes: "+Math.round(this.Hc/1048576)+"MB<br/>Polygons: "+this.$a+"<br/>",b="Tiles: "+(this.de+this.ce)+"<br/>",c;for(c in this.Pb)b+="LOD"+c+": "+this.Pb[c]+"<br/>";this.wf.innerHTML="<table style='width:305px'><tr><td>"+a+"</td><td>"+b+"</td></tr></table>"}this.N=!1}window.rf(this.update.bind(this))}};
h.Q=function(a){var b=ra(this.i),c=this.i.aa(),d=Xa(this),e=[0,0,0,1],e=q.e.Rc(b,[a[0]-d[0]+c[0],a[1]-d[1]+c[1],a[2]-d[2]+c[2],1]);return 0!=e[3]?(a=[0,0,0],a[0]=0.5*(e[0]/e[3]+1)*this.B[0],a[1]=0.5*(-(e[1]/e[3])+1)*this.B[1],a[2]=e[2]/e[3],a):[0,0,0]};
h.Gc=function(a,b){if(null==this.i)return[0,0,1];var c=[2*a/this.B[0]-1,1-2*b/this.B[1],1],d=[c[0],c[1],-1,1],e=q.e.create(),e=q.e.inverse(qa(this.i)),c=[0,0,0,0];q.e.Rc(e,d,c);c[2]=-1;c[3]=0;d=q.e.create();d=q.e.inverse(pa(this.i));e=[0,0,0,0];q.e.Rc(d,c,e);return e=q.ea.normalize([e[0],e[1],e[2]])};
h.Ib=function(a,b){this.fd=!0;var c=this.m.h;if(!0==this.fd){var d=this.bc;xa(this.m,this.lb);var e=[this.B[0],this.B[1]],f=d,g=d;c.clearColor(1,1,1,1);c.enable(c.DEPTH_TEST);c.viewport(0,0,d,d);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);this.B=[f,g];Sa(this,!0);f=e[0];g=e[1];c.clearColor(0,0,0,1);xa(this.m,null);d=this.i;d.Sb=f/g;d.N=!0;this.B=[f,g];this.m.resize(this.B,!0);this.fd=!1}if(c.checkFramebufferStatus(c.FRAMEBUFFER)!=c.FRAMEBUFFER_COMPLETE)return[0,0,0,0];g=f=0;f=Math.floor(this.bc/
this.B[0]*a);g=Math.floor(this.bc/this.B[1]*b);c=this.lb;g=this.bc-g-1;null!=c.R?(c.m.bindTexture(c),xa(c.m,c),d=c.h,e=new Uint8Array(4),d.readPixels(f,g,1,1,d.RGBA,d.UNSIGNED_BYTE,e),xa(c.m,null),f=e):f=void 0;c=1/255*f[0]+f[1]+255*f[2]+65025*f[3];f=!(255==f[0]&&255==f[1]&&255==f[2]&&255==f[3]);g=this.Gc(a,b);d=Xa(this);this.Mc=[d[0]+g[0]*c,d[1]+g[1]*c,d[2]+g[2]*c];return[this.Mc[0],this.Mc[1],this.Mc[2],f]};
h.Zc=function(){this.fd=!0;var a=this.m.h,b=this.B[0],c=this.B[1],d=new Uint8Array(b*c*4);a.readPixels(0,0,b,c,a.RGBA,a.UNSIGNED_BYTE,d);for(var a=new Uint8Array(b*c*4),e=0,f=0;f<c;f++){index2_=(c-1-f)*b*4;for(var g=0;g<b;g++)a[e]=d[index2_],a[e+1]=d[index2_+1],a[e+2]=d[index2_+2],a[e+3]=d[index2_+3],e+=4,index2_+=4}d=document.createElement("canvas");d.width=b;d.height=c;e=d.getContext("2d");b=e.createImageData(b,c);b.data.set(a);e.putImageData(b,0,0);window.open(d.toDataURL("image/jpeg"))};function eb(a,b,c,d){this.a=a;this.J=b;this.W=c;this.ca=d;this.na=this.W.size()+d.naturalWidth*d.naturalHeight*3;this.Ve=c.fileSize();this.Qe=d.naturalWidth*d.naturalHeight*3}eb.prototype.K=function(){null!=this.W&&(this.W.K(),this.W=null);this.ca=null};
eb.prototype.Wb=function(a,b){var c=v(this.a.o,this.J.n),d=c/2+this.J.v-a[0],c=c/2+this.J.A-a[1],e=this.W.j,f=b;null!=f?(f[0]=w(e,0),f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=w(e,1),f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=w(e,2),f[11]=0,f[12]=e.k[0]+d,f[13]=e.k[1]+c,f[14]=e.k[2],f[15]=1):(f=q.e.create(),q.e.multiply(q.Bb(e.k[0]+d,e.k[1]+c,e.k[2]),q.$c(w(e,0),w(e,1),w(e,2)),f));return f};eb.prototype.size=function(){return this.na};q.Nf=na;
q.Of=function(a,b,c,d){this.a=a;this.J=b;this.gc=c;this.fc=d;this.zd=this.Md=this.We=!1;this.vc=function(){!0==this.zd?null!=this.fc&&this.fc(this.J):!0==this.We&&!0==this.Md&&null!=this.gc&&this.gc(this.J,new eb(this.a,this.J,this.W,this.ca))}.bind(this);this.ca=new Image;this.ca.onload=function(){!0!=this.a.w&&(this.Md=!0,this.vc())}.bind(this);this.ca.onerror=function(){!0!=this.a.w&&(this.zd=!0,this.vc())}.bind(this);this.ca.crossOrigin="anonymous";!0==q.Yd?this.Md=!0:this.ca.src=ea(this.a.o,
this.J);this.W=new Fa;this.Bg=function(){!0!=this.a.w&&(this.We=!0,this.vc())}.bind(this);this.Ag=function(){!0!=this.a.w&&(this.zd=!0,this.vc())}.bind(this);this.W.load(da(this.a.o,this.J),this.Bg,this.Ag)};function t(a,b,c,d){this.a=a;this.n=null!=b?b:0;this.v=null!=c?c:0;this.A=null!=d?d:0}function z(a,b){var c=v(a.a.o,a.n),d=a.v+c/2,c=a.A+c/2;switch(b){case 0:return new t(a.a,a.n+1,a.v,a.A);case 1:return new t(a.a,a.n+1,d,a.A);case 2:return new t(a.a,a.n+1,a.v,c);case 3:return new t(a.a,a.n+1,d,c)}}t.prototype.parent=function(){var a=v(this.a.o,this.n),b=this.a.o.H;return new t(this.a,this.n-1,b.v+((this.v-b.v)/a&-2)*a,b.A+((this.A-b.A)/a&-2)*a)};
t.prototype.isEqual=function(a){return this.n==a.n&&this.v==a.v&&this.A==a.A};function V(a,b,c,d,e,f){this.ma=[];this.X=[];this.Ca=[];this.he=this.q=this.o=this.c=null;this.w=!1;this.ja=null;this.Lc=f;"string"===typeof a?this.ja=document.getElementById(a):"object"===typeof a&&(this.ja=a);null==this.ja?null!=d&&d(!1,"DOM element does not exist"):null!=b&&fb(this,b,c,d,e)}
function fb(a,b,c,d,e){if(null==b||""==b)null!=d&&d(!1,"Map config does not exist");else{var f="";"string"===typeof b&&(f=b.split("?")[0].split("/").slice(0,-1).join("/")+"/");var g=null,k=null,l=function(){null==g||null==k&&null!=c||(this.o=new aa(this,g,f),this.q=new ha(k),this.he=e,null!=this.c&&(this.c.K(),this.c=null),this.c=new La(this,this.ja,this.Eg.bind(this),this.Lc),null!=d&&d(!0))}.bind(a),m=function(a){g=a;l()}.bind(a),n=function(a){k=a;l()}.bind(a),p=function(a){null!=d&&d(!1,a+" config not found")}.bind(a);
null!=c&&"string"===typeof c&&q.Nc(c,n,p.bind(a,"browser"));"string"===typeof b&&q.Nc(b,m,p.bind(a,"map"));"object"===typeof b&&(g=b);"object"===typeof c&&(k=c);null==g&&null==k||l()}}h=V.prototype;h.K=function(){this.c.K();this.w=!0};h.ad=function(a){if(!0!=this.w&&null!=this.c&&null!=this.c.i&&this.q.wa!=a){if("manual"==a){var b=q.uh(this.c.b[0],this.c.b[1]);b[0]>this.c.b[2]&&(this.c.b[2]=b[0]+100)}this.q.wa=a;Q(this.c);this.ma=[];this.Ca=[];this.X=[]}};h.De=function(){return this.q.wa};
h.za=function(a,b,c){!0!=this.w&&null!=this.c&&(this.c.b=[a,b,c],Q(this.c))};h.aa=function(){return!0==this.w||null==this.c?[0,0,0]:[this.c.b[0],this.c.b[1],this.c.b[2]]};h.sa=function(a,b,c){!0!=this.w&&null!=this.c&&(this.c.g=[a,b,c],Q(this.c))};h.oa=function(){return!0==this.w||null==this.c?[0,0,0]:this.c.g};h.Ug=function(a,b){if(null!=this.c&&null!=this.c.i){var c=this.c.i;c.Ae=a;c.dc=20;c.Fb=b;c.N=!0;Q(this.c)}};h.Vg=function(a){!0!=this.w&&null!=this.c&&null!=this.c.i&&(this.q.Va=a,Q(this.c))};
h.dg=function(){return this.q.Va};h.Ib=function(a,b){return null==this.c?[0,0,0,!1]:this.c.Ib(a,b,"all")};h.Q=function(a,b,c){return null==this.c?[0,0,0]:this.c.Q([a,b,c])};h.ph=function(){return[[0,0],[1,0],[1,1],[0,1]]};h.Gc=function(a,b){if(null==this.c)return[0,0,0,!1];var c=this.c.Gc(a,b);return[Xa(this.c),c]};h.Ce=function(){if(null==this.c)return[[0,0,0],[0,1,0]];var a=this.c.gb;return[Xa(this.c),[a[0],a[1],a[2]]]};h.Fd=function(a,b){if(!0!=this.w&&null!=this.c)return q.oc(this,[a,b],this.c.L)};
h.kf=function(a,b){if(!0!=this.w&&null!=this.c){var c=R(this.c)/800;a*=c;b*=c;var d=q.ha(this.oa()[0]),c=[-Math.sin(d),Math.cos(d)],d=[Math.cos(d),Math.sin(d)];this.c.b[0]+=c[0]*b-d[0]*a;this.c.b[1]+=c[1]*b-d[1]*a;0<this.q.hb[0]&&this.ma.push([c[0]*b-d[0]*a,c[1]*b-d[1]*a]);Q(this.c)}};h.rotate=function(a,b,c){!0!=this.w&&null!=this.c&&(null==c&&(c=0),this.c.g[0]+=0.3*-a,this.c.g[1]+=0.3*-b,this.c.g[2]+=0.3*c,0<this.q.hb[1]&&this.X.push([0.3*-a,0.3*-b,0.3*c]),this.c.rc=!0,Q(this.c))};
h.zoom=function(a){!0!=this.w&&null!=this.c&&(a=1+0.001*a,this.c.b[2]*=a,0<this.q.hb[2]&&this.Ca.push([a]),Q(this.c))};h.Zc=function(){!0!=this.w&&null!=this.c&&this.c.Zc()};
h.O=function(a,b){if(!0!=this.w&&null!=this.c){switch(a){case "cameraHeightOffset":this.c.va=b;break;case "drawOnlyHeightmap":this.c.Jd=b;break;case "noForwardMovement":this.c.Tc=b;break;case "texelSize":this.c.fe=b*q.Af;break;case "drawBBoxes":this.c.qd=b;break;case "drawWireframe":this.c.Ub=b;break;case "drawLods":this.c.td=b;break;case "drawPositions":this.c.vd=b;break;case "drawTexelSize":this.c.wd=b;break;case "drawFaceCount":this.c.sd=b;break;case "drawDistance":this.c.rd=b;break;case "drawMaxLod":this.c.ud=
b;break;case "drawTextureSize":this.c.xd=b;break;case "minDistance":this.c.$=b,this.c.qe=b,this.c.Ha=0.5*b}Q(this.c)}};
h.I=function(a){if(!0!=this.w&&null!=this.c){switch(a){case "cameraHeightOffset":return this.c.va;case "drawOnlyHeightmap":return this.c.Jd;case "noForwardMovement":return this.c.Tc;case "minDistance":return this.c.$;case "texelSize":return this.c.fe;case "drawBBoxes":return this.c.qd;case "drawWireframe":return this.c.Ub;case "drawLods":return this.c.td;case "drawPositions":return this.c.vd;case "drawTexelSize":return this.c.wd;case "drawFaceCount":return this.c.sd;case "drawDistance":return this.c.rd;
case "drawMaxLod":return this.c.ud;case "drawTextureSize":return this.c.xd}return null}};
h.Eg=function(){if(!0!=this.w&&null!=this.c){var a=!1,b=this.q.hb[0],c=this.q.hb[1],d=this.q.hb[2];0<this.X.length&&0==this.ma.length&&0==this.Ca.length&&(this.c.rc=!0);for(var e=0;e<this.ma.length;e++)this.ma[e][0]*=b,this.ma[e][1]*=b,this.c.b[0]+=this.ma[e][0],this.c.b[1]+=this.ma[e][1],0.01>Math.abs(this.ma[e][0])+Math.abs(this.ma[e][1])&&(this.ma.splice(e,1),e--),a=!0;for(e=0;e<this.Ca.length;e++)this.Ca[e][0]+=(1-this.Ca[e][0])*(1-d),this.c.b[2]*=this.Ca[e][0],this.c.b[2]=Math.min(this.c.b[2],
4E5),0.001>Math.abs(1-this.Ca[e][0])&&(this.Ca.splice(e,1),e--),a=!0;for(e=0;e<this.X.length;e++)this.X[e][0]*=c,this.X[e][1]*=c,this.X[e][2]*=c,this.c.g[0]+=this.X[e][0],this.c.g[1]+=this.X[e][1],this.c.g[2]+=this.X[e][2],0.01>Math.abs(this.X[e][0])+Math.abs(this.X[e][1])+Math.abs(this.X[e][2])&&(this.X.splice(e,1),e--),a=!0;!0==a&&Q(this.c);null!=this.he&&this.he(this.c.N)}};
q.re=function(){var a=document.createElement("canvas");if(null==a)return!1;a.width=1024;a.height=768;if(null==a.getContext)return!1;var b=null;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(c){return!1}return b?!0:!1};q.Browser=V;V.prototype.setControlMode=V.prototype.ad;V.prototype.getControlMode=V.prototype.De;V.prototype.setPosition=V.prototype.za;V.prototype.getPosition=V.prototype.aa;V.prototype.setOrientation=V.prototype.sa;V.prototype.getOrientation=V.prototype.oa;
V.prototype.setCamera=V.prototype.Ug;V.prototype.setCameraConstrainMode=V.prototype.Vg;V.prototype.getCameraConstrainMode=V.prototype.dg;V.prototype.hitTest=V.prototype.Ib;V.prototype.project=V.prototype.Q;V.prototype.setOption=V.prototype.O;V.prototype.getOption=V.prototype.I;V.prototype.getScreenRay=V.prototype.Gc;V.prototype.getCameraVector=V.prototype.Ce;V.prototype.getTerrainHeight=V.prototype.Fd;V.prototype.saveScreenshot=V.prototype.Zc;V.prototype.visibleArea=V.prototype.ph;
V.prototype.pan=V.prototype.kf;V.prototype.rotate=V.prototype.rotate;V.prototype.zoom=V.prototype.zoom;V.prototype.kill=V.prototype.K;q.checkSupport=q.re;q.loadJSON=q.Nc;q.me=function(a,b,c){this.t=a;this.a=a.a;this.ua={b:[0,0,0],g:[0,0,0],Xa:1,P:0};this.T={b:[0,0,0],g:[0,0,0],Xa:1,P:0};this.b=[0,0,0];this.g=[0,0,0];this.Rd=[0,0,0];this.Xa=1;this.P=0;this.cc="direct";this.Y=this.Gf=0;this.Ad=!0;this.ze=b;this.If=c};function gb(a,b,c,d){c[0]%=360;a.b=b;a.g=c;a.P=null!=d?d:0;a.ua={b:a.b,g:a.g,Xa:a.Xa,P:null!=d?d:0}}
function hb(a,b,c,d,e){var f=null;e&&(a.b=b,a.g=c,a.Xa=f,a.P=null!=d?d:0);a.ua={b:a.b,g:a.g,Xa:a.Xa,P:a.P};a.T={b:b,g:c,Xa:f,P:null!=d?d:0};e?(a.Ad=!0,a.a.za(a.b[0],a.b[1],a.b[2]),a.a.sa(a.g[0],a.g[1],a.g[2]),a.a.O("cameraHeightOffset",a.P)):(b=a.T.b[0]-a.ua.b[0],c=a.T.b[1]-a.ua.b[1],f=Math.sqrt(b*b+c*c),500>f?(a.Y=1E3,a.cc="direct"):2E3>f?(a.Y=2E3,a.cc="direct"):(a.cc="fly2",a.Y=f/100,300>a.Y?a.Y=3E3:6E3>a.Y&&(a.Y=6E3),1E4<a.Y&&(a.Y=1E4),a.Y*=1.8),a.Gf=(new Date).getTime(),a.Ad=!1,a.qc())}
q.me.prototype.qc=function(){if(!0!=this.Ad){var a=(new Date).getTime()-this.Gf;if(a>=this.Y){var b=this.g[0]>this.Rd[0];this.b[0]=this.T.b[0];this.b[1]=this.T.b[1];this.b[2]=this.T.b[2];this.g[0]=this.T.g[0];this.g[1]=this.T.g[1];this.g[2]=this.T.g[2];this.P=this.T.P;this.a.za(this.b[0],this.b[1],this.b[2]);this.a.sa(this.g[0],this.g[1],this.g[2]);this.a.O("cameraHeightOffset",this.P);this.a.c.Wd=1;null!=this.ze&&this.ze(b)}else{switch(this.cc){case "direct":var b=a/this.Y,c=this.ua.b,d=this.T.b;
this.b=[c[0]+(d[0]-c[0])*b,c[1]+(d[1]-c[1])*b,c[2]+(d[2]-c[2])*b];var a=this.ua.g,e=this.T.g,c=e[0]-a[0],d=e[1]-a[1],e=e[2]-a[2];180<Math.abs(c)&&(c=0<c?-(360-c):360-Math.abs(c));this.Rd=this.g;this.g=[a[0]+c*b,a[1]+d*b,a[2]+e*b];a=this.ua.P;c=this.T.P;this.P=a+(c-a)*b;break;case "fly":case "fly2":c=b=a/this.Y;c=c*c*(3-2*c);b=c*c*(3-2*c);"fly2"==this.cc?(c=e=Math.min(1,a/(this.Y-2700)),c=c*c*(3-2*c),e=c*c*(3-2*c)):e=factor2;var c=this.ua.b,d=this.T.b,f=this.T.b[0]-this.ua.b[0],g=this.T.b[1]-this.ua.b[1];
this.b=[c[0]+(d[0]-c[0])*e,c[1]+(d[1]-c[1])*e,c[2]+(d[2]-c[2])*b+Math.sin(Math.PI*b)*Math.min(28E4,0.5*Math.sqrt(f*f+g*g))];this.b[2]=Math.min(48E4,this.b[2]);e=[0,-90,0];e[0]=180/Math.PI*Math.atan2(d[1]-c[1],d[0]-c[0])-90;2700>=a?(b=a/2700,a=this.ua.g):a>=this.Y-2700?(b=(a-(this.Y-2700))/2700,a=e,e=this.T.g):(b=0,a=e);c=e[0]-a[0];d=e[1]-a[1];e=e[2]-a[2];180<Math.abs(c)&&(c=0<c?-(360-c):360-Math.abs(c));this.Rd=this.g;this.g=[a[0]+c*b,a[1]+d*b,a[2]+e*b];a=this.ua.P;c=this.T.P;this.P=a+(c-a)*b}this.a.za(this.b[0],
this.b[1],this.b[2]);this.a.sa(this.g[0],this.g[1],this.g[2]);this.a.O("cameraHeightOffset",this.P);this.a.c.Wd=1;null!=this.If&&this.If();window.setTimeout(this.qc.bind(this),1E3/60)}}};function W(a){this.t=a;this.a=this.t.a;this.fb=this.t.fb;this.C=this.t.C;this.od=this.pd=!1;this.Ya="Geographic";this.Ma="position";this.f={D:0};this.Zb=!0;this.Yb="+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84";this.Ie="UTM 33N";this.gg="WGS84";this.Gd=this.Ie;this.l=this.La=null;this.He=[0,0,0,!1];this.Xb=!1;this.xa={};this.Pd=!1;this.Td=!0;this.Wa=null;this.Za=this.Mb=this.Da=this.ta=this.ib=this.Rb=this.mb=this.Ld=this.nb=this.da=!1;this.Lb=this.Kb=this.tb=this.sb=0;this.Kd=!1;this.Ob="info";this.Qd();
this.t.Zd("location-changed",this.Ue.bind(this));this.t.Zd("flight-update",this.$f.bind(this))}h=W.prototype;h.$f=function(){ib(this)};
h.Ue=function(a,b,c){"undefined"==typeof b&&(b=this.t.Ed());if(this.Wa!=b){this.Wa=b;if(-1==b){if(1<=this.t.Dc()){var d=this.t.Fc();X("vadstena-engine-info-panel-title","innerHTML",d.titleOut);X("vadstena-engine-info-panel-texts","innerHTML","");X("vadstena-engine-info-panel-like","innerHTML","")}c=document.getElementById("vadstena-engine-credits");if(null!=c){for(;c.firstChild;)c.removeChild(c.firstChild);c.innerHTML=d.creditsOut;Y("vadstena-engine-logo","none")}}else{d=this.t.Ee(b);if(null==d)return;
1<=this.t.Dc()&&!0!=c&&this.t.Ta(this.Wa,!1,!0);null!=d.title&&X("vadstena-engine-info-panel-title","innerHTML",d.title);null!=d.htmlBody&&X("vadstena-engine-info-panel-texts","innerHTML",d.htmlBody);null!=d.likeURL&&""!=d.likeURL?X("vadstena-engine-info-panel-like","innerHTML","<iframe src='//www.facebook.com/plugins/like.php?href="+encodeURIComponent(d.likeURL)+"&amp;width&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=35' scrolling='no' frameborder='0' style='border:none; overflow:hidden; height:35px; margin-bottom: -20px; margin-top: 15px; float:left;' allowTransparency='true'></iframe>"):
X("vadstena-engine-info-panel-like","innerHTML","");c=document.getElementById("vadstena-engine-credits");if(null!=c){for(;c.firstChild;)c.removeChild(c.firstChild);null!=d.credits&&null!=d.credits.htmlTemplate&&!0!=this.C.Eb.hideCredits?(c.innerHTML=q.vf(d.credits.htmlTemplate,{title:d.title,country:null!=d.country?d.country.title:"",generatedBy:d.credits.generatedBy,aerialImaginery:d.credits.aerialImagery,homepage:q.oe}),Y("vadstena-engine-logo","none")):Y("vadstena-engine-logo","block")}}c=this.t.Ec();
null!=c&&1<c.length?Y("vadstena-engine-info-panel-buttons","block"):Y("vadstena-engine-info-panel-buttons","none")}};h.Qd=function(){jb(this);kb(this,"view");if(null!=this.C.Aa.wsmc){var a=this.C.Aa.wsmc;this.Kf=!1;this.Db=new WebSocket(decodeURIComponent(a),["soap","xmpp"]);this.Db.onopen=this.Kg.bind(this);this.Db.onerror=this.Ig.bind(this);this.Db.onmessage=this.Jg.bind(this);this.Lf=""}};
function lb(a,b,c){if(!1==b)alert("Vadstena3D initialization failed. Reason: "+c);else{b=a.a.o.json;null!=b&null!=b.version&&2<=parseInt(b.version,10)?a.Yb=b.srs:(a.C.Eb.hideGis=!0,a.tc());b=a.a.aa();c=a.a.oa();var d=a.a.I("cameraHeightOffset"),e=a.C.Eb;!0==a.t.Bd&&(null!=e.forcePositonX&&(b[0]=e.forcePositonX),null!=e.forcePositonY&&(b[1]=e.forcePositonY),null!=e.forceDistance&&(b[2]=e.forceDistance),null!=e.forceHeightOffset&&(d=e.forceHeightOffset),null!=e.forceOrientationX&&(c[0]=e.forceOrientationX),
null!=e.forceOrientationY&&(c[1]=e.forceOrientationY),null!=e.forceAutorotate&&a.t.ia(e.forceAutorotate),a.t.Bd=!1);a.a.za(b[0],b[1],b[2]);a.a.sa(c[0],c[1],c[2]);a.a.O("cameraHeightOffset",d);X("vadstena-engine-tools","onmousedown",function(){this.da=!0}.bind(a));X("vadstena-engine-info-panel","onmousedown",function(){this.da=!0}.bind(a));X("vadstena-engine-stats-panel","onmousedown",function(){this.da=!0}.bind(a));X("vadstena-engine-link-panel","onmousedown",function(){this.da=!0}.bind(a));X("vadstena-engine-gis-panel",
"onmousedown",function(){this.da=!0}.bind(a));X("vadstena-engine-gis-panel","onmouseup",function(){!0!=this.Da&&(this.nb=!0)}.bind(a));X("vadstena-engine-tools","ondblclick",function(){this.mb=!0}.bind(a));X("vadstena-engine-tools","ontouchend",function(){this.mb=this.nb=!0}.bind(a));X("vadstena-engine-gis-panel","ontouchend",function(){this.mb=this.nb=!0}.bind(a));X("vadstena-engine-toolbar-bottons","onmousedown",function(){this.da=!0}.bind(a));X("vadstena-engine-toolbar-bottons","onmouseup",function(){!0!=
this.Da&&(this.nb=!0)}.bind(a));X("vadstena-engine-toolbar-bottons","ondblclick",function(){this.mb=!0}.bind(a));X("vadstena-engine-toolbar-bottons","ontouchstart",function(){this.da=!0}.bind(a));X("vadstena-engine-toolbar-bottons","ontouchend",function(){this.mb=this.nb=!0}.bind(a));X("vadstena-engine-toolbar-view","onmousedown",function(){this.da=!0}.bind(a));X("vadstena-engine-toolbar-length","onmousedown",function(){this.da=!0}.bind(a));X("vadstena-engine-toolbar-distance","onmousedown",function(){this.da=
!0}.bind(a));X("vadstena-engine-toolbar-position","onmousedown",function(){this.da=!0}.bind(a));X("vadstena-engine-toolbar-stats","onmousedown",function(){this.da=!0}.bind(a));X("vadstena-engine-toolbar-link","onmousedown",function(){this.da=!0}.bind(a));mb(a)}}
h.Uc=function(){if(null!=this.a){var a=document.getElementById("vadstena-engine-compass"),b=document.getElementById("vadstena-engine-compass2"),c=document.getElementById("vadstena-engine-compass3"),d=this.a.oa(),d="rotateX("+0.7*(d[1]+90)+"deg) rotateZ("+(d[0]-45)+"deg)";null!=a&&null!=b&&null!=c&&(a.style.transform=d,a.style.webkitTransform=d,a.style.msTransform=d,b.style.transform=d,b.style.webkitTransform=d,b.style.msTransform=d,c.style.transform=d,c.style.webkitTransform=d,c.style.msTransform=
d)}a=this.t.Ec();null!=a&&1<a.length&&1<=this.t.Dc()&&(a=nb(this.t,this.a.aa()),this.Ue(0,a));switch(this.Ob){case "gis":Z(this);break;case "location":ob(this)}};
h.Tf=function(a,b){switch(a){case "show-menu":pb();break;case "hide-menu":qb();break;case "menu-tab-selected":rb(this,b);break;case "gis-button":switch(b){case "position":sb(this);break;case "length":tb(this);break;case "distance":ub(this);break;case "projected":this.Ya="Projected";this.Gd=this.Ie;vb(this);Z(this);break;case "geographic":this.Ya="Geographic";this.Gd=this.gg;vb(this);Z(this);break;case "clear":X("vadstena-engine-gis-panel-texts","value","");wb(this);wb(this);break;case "remove-last":xb(this)}break;
case "info-button":switch(b){case "next":this.t.Ta(this.t.Fe(),!this.ta);break;case "previous":this.t.Ta(this.t.Ge(),!this.ta)}break;case "link-button":switch(b){case "autorotate":this.Td=!this.Td,ob(this)}break;case "toolbar-button":kb(this,b)}};function Y(a,b){var c=document.getElementById(a);null!=c?c.style.display=b:console.log("element not found: "+a)}function yb(a){var b=document.getElementById(a);if(null!=b)return b.style.display;console.log("element not found: "+a);return""}
function X(a,b,c){var d=document.getElementById(a);null!=d?d[b]=c:console.log("element not found: "+a)}function zb(a){var b=document.getElementById("vadstena-engine-gis-panel-texts");null!=b?b.value+=a:console.log("element not found: vadstena-engine-gis-panel-texts")}
h.tc=function(){var a=this.C.Eb,b=!0==a.hideNavigationControls?"none":"block";Y("vadstena-engine-compass-main",b);Y("vadstena-engine-plus",b);Y("vadstena-engine-minus",b);a.hideToolPanel&&Ab();a.closeToolPanel&&qb();a.hideToolbar&&this.Ne();a.hideInfo&&(this.Pd=!0,Bb());a.hideLink&&(Y("vadstena-engine-toolbar-break","none"),Y("vadstena-engine-toolbar-link","none"));a.hideGis&&(Y("vadstena-engine-toolbar-position","none"),Y("vadstena-engine-toolbar-length","none"),Y("vadstena-engine-toolbar-distance",
"none"));a.hideCredits&&(Y("vadstena-engine-credits","none"),Y("vadstena-engine-logo","block"));a.hideGis&&a.hideLink&&this.Ne()};function mb(a){X("vadstena-engine-compass-main","onmousedown",a.Fg.bind(a));X("vadstena-engine-plus","onclick",a.Gg.bind(a));X("vadstena-engine-minus","onclick",a.Hg.bind(a));X("vadstena-engine-compass","ondragstart",function(){return!1});X("vadstena-engine-compass2","ondragstart",function(){return!1});X("vadstena-engine-compass3","ondragstart",function(){return!1});X("vadstena-engine-compass-frame","ondragstart",function(){return!1});X("vadstena-engine-compass-frame2","ondragstart",function(){return!1});
X("vadstena-engine-compass-frame3","ondragstart",function(){return!1});X("vadstena-engine-plus","ondragstart",function(){return!1});X("vadstena-engine-minus","ondragstart",function(){return!1})}W.prototype.Fg=function(){this.od=!0};
W.prototype.Gg=function(){null!=this.a&&setTimeout(function(){this.a.zoom(-5);setTimeout(function(){this.a.zoom(-10);setTimeout(function(){this.a.zoom(-10);setTimeout(function(){this.a.zoom(-10);setTimeout(function(){this.a.zoom(-10);setTimeout(function(){this.a.zoom(-10)}.bind(this),60)}.bind(this),60)}.bind(this),60)}.bind(this),60)}.bind(this),60)}.bind(this),60)};
W.prototype.Hg=function(){null!=this.a&&setTimeout(function(){this.a.zoom(5);setTimeout(function(){this.a.zoom(10);setTimeout(function(){this.a.zoom(10);setTimeout(function(){this.a.zoom(10);setTimeout(function(){this.a.zoom(10);setTimeout(function(){this.a.zoom(10)}.bind(this),60)}.bind(this),60)}.bind(this),60)}.bind(this),60)}.bind(this),60)}.bind(this),60)};function Cb(){Y("vadstena-engine-canvas-2d","none");Y("vadstena-engine-gis-panel","none")}function sb(a){a.Ma="position";a.f={D:0,G:!0};vb(a);Z(a)}function tb(a){a.Ma="length";a.f={D:0,G:!0};vb(a);Z(a)}function ub(a){a.Ma="distance";a.f={s:[],D:0,G:!0};vb(a);Z(a)}function wb(a){switch(a.Ma){case "position":sb(a);break;case "length":tb(a);break;case "distance":ub(a)}}
function xb(a){switch(a.Ma){case "position":a.f={D:0,G:!0};Z(a);break;case "length":0<a.f.D&&(a.f.D--,Z(a));break;case "distance":a.f.s.pop(),0==a.f.s.length&&(a.f.D=0),vb(a),Z(a)}}
function vb(a){X("vadstena-engine-gis-panel-button-projected","className","vadstena-engine-button-left");X("vadstena-engine-gis-panel-button-geographic","className","vadstena-engine-button-right");switch(a.Ya){case "Projected":X("vadstena-engine-gis-panel-button-projected","className","vadstena-engine-button-left-pressed");break;case "Geographic":X("vadstena-engine-gis-panel-button-geographic","className","vadstena-engine-button-right-pressed")}X("vadstena-engine-gis-panel-button-remove-last","className",
"vadstena-engine-button");X("vadstena-engine-gis-panel-coord-system","innerHTML","Coordinate system: "+a.Gd)}
function Db(a,b,c,d,e){a.l.font="12px Arial";var f=a.l.measureText(d).width;a.l.fillStyle=!0==e?"rgba(252,233,168,0.8)":"rgba(180,180,180,0.8)";a.l.strokeStyle="rgba(0,0,0,0.9)";e=a.l;var f=f+10,g=5,k=!0;"undefined"==typeof k&&(k=!0);"undefined"===typeof g&&(g=5);e.beginPath();e.moveTo(b+g,c);e.lineTo(b+f-g,c);e.quadraticCurveTo(b+f,c,b+f,c+g);e.lineTo(b+f,c+20-g);e.quadraticCurveTo(b+f,c+20,b+f-g,c+20);e.lineTo(b+g,c+20);e.quadraticCurveTo(b,c+20,b,c+20-g);e.lineTo(b,c+g);e.quadraticCurveTo(b,c,
b+g,c);e.closePath();k&&e.stroke();e.fill();a.l.fillStyle="#000000";a.l.fillText(d,b+5,c+15)}function Eb(a,b,c,d,e){if(!0==e||null==e)a.l.beginPath(),a.l.arc(b,c,5,0,2*Math.PI,!1),a.l.lineWidth=5,a.l.strokeStyle="rgba(0,0,0,0.5)",a.l.stroke();if(!0==d||null==d)a.l.beginPath(),a.l.arc(b,c,5,0,2*Math.PI,!1),a.l.lineWidth=1,a.l.strokeStyle="#ff0000",a.l.stroke()}
function Fb(a,b,c,d){var e=a.a.o.json;if(null!=e&&!0!=e.verticalAdjustment)return d;e=Gb(a.Yb).inverse([b,c]);a=Gb(a.Yb).inverse([b+1E3,c]);b=e[0]+186;0>b&&(b=0);359<b&&(b=359);b="+proj=utm +zone="+Math.floor(b/6)+" +ellps=WGS84 +datum=WGS84";e=Gb(b).forward([e[0],e[1]]);b=Gb(b).forward([a[0],a[1]]);a=e[0]-b[0];e=e[1]-b[1];return Math.sqrt(a*a+e*e)/1E3*d}
function Hb(a,b,c,d){var e="";"Projected"==a.Ya&&(e="x:"+b.toFixed(1)+" y:"+c.toFixed(1)+" a:"+d.toFixed(1)+"m");"Geographic"==a.Ya&&(e="",e=0>pos2[1]?e+(c.toFixed(7)+"\u00b0S "):e+(c.toFixed(7)+"\u00b0N "),e=0>pos2[0]?e+(b.toFixed(7)+"\u00b0W "):e+(b.toFixed(7)+"\u00b0E "),e+=" "+d.toFixed(1)+"m");return e}function Ib(a){var b="";return b=1E3<a?b+((a/1E3).toFixed(2)+"km"):b+(a.toFixed(2)+"m")}
function Z(a){if(null!=a.a){null==a.La&&(a.La=document.getElementById("vadstena-engine-canvas-2d"),null!=a.f&&(a.l=a.La.getContext("2d")),vb(a));var b=document.getElementById("vadstena-engine");null!=b&&(b=b.getBoundingClientRect(),a.La.width!=b.width&&(a.La.width=b.width),a.La.height!=b.height&&(a.La.height=b.height));a.l.clearRect(0,0,a.La.width,a.La.height);b=a.a.Ib(a.sb,a.tb,"all");a.He=b;var c=a.a.Q(b[0],b[1],b[2]);switch(a.Ma){case "position":if(!0!=a.f.G){var d=a.a.Q(a.f.Ga[0],a.f.Ga[1],a.f.Ga[2]);
Eb(a,d[0],d[1]);Db(a,Math.round(d[0]),Math.round(d[1]),a.f.pc,!0)}break;case "length":if(!0==a.f.G)break;var d=a.a.Q(a.f.Ga[0],a.f.Ga[1],a.f.Ga[2]),e=a.a.Q(a.f.xb[0],a.f.xb[1],a.f.xb[2]);1!=a.f.D&&2!=a.f.D||Eb(a,d[0],d[1]);2==a.f.D&&Eb(a,e[0],e[1]);2==a.f.D&&(a.l.beginPath(),a.l.moveTo(d[0],d[1]),a.l.lineTo(e[0],e[1]),a.l.lineCap="round",a.l.lineWidth=5,a.l.strokeStyle="rgba(0,0,0,0.5)",a.l.stroke(),a.l.beginPath(),a.l.arc(e[0],e[1],5,0,2*Math.PI,!1),a.l.moveTo(d[0],d[1]),a.l.lineTo(e[0],e[1]),a.l.lineCap=
"butt",a.l.lineWidth=1,a.l.strokeStyle="#ff0000",a.l.stroke());2==a.f.D&&Db(a,Math.round(e[0]),Math.round(e[1]),a.f.pc,!0);break;case "distance":if(0==a.f.D)break;for(var f=0,g=a.f.s.length;f<g;f++)d=a.a.Q(a.f.s[f][0],a.f.s[f][1],a.f.s[f][2]),Eb(a,d[0],d[1],!1,!0);f=0;for(g=a.f.s.length-1;f<g;f++)d=a.a.Q(a.f.s[f][0],a.f.s[f][1],a.f.s[f][2]),e=a.a.Q(a.f.s[f+1][0],a.f.s[f+1][1],a.f.s[f+1][2]),a.l.beginPath(),a.l.moveTo(d[0],d[1]),a.l.lineTo(e[0],e[1]),a.l.lineWidth=5,a.l.strokeStyle="rgba(0,0,0,0.5)",
a.l.stroke();f=0;for(g=a.f.s.length;f<g;f++)d=a.a.Q(a.f.s[f][0],a.f.s[f][1],a.f.s[f][2]),Eb(a,d[0],d[1],!0,!1);f=0;for(g=a.f.s.length-1;f<g;f++)d=a.a.Q(a.f.s[f][0],a.f.s[f][1],a.f.s[f][2]),e=a.a.Q(a.f.s[f+1][0],a.f.s[f+1][1],a.f.s[f+1][2]),a.l.beginPath(),a.l.moveTo(d[0],d[1]),a.l.lineTo(e[0],e[1]),a.l.lineWidth=1,a.l.strokeStyle="#ff0000",a.l.stroke();d=a.a.Q(a.f.s[g][0],a.f.s[g][1],a.f.s[g][2]);1<a.f.s.length&&Db(a,Math.round(d[0]),Math.round(d[1]),a.f.pc,!0)}if(!0==a.Zb&&!0!=a.Da){var k=Math.floor(c[0]),
l=Math.floor(c[1]);a.l.fillStyle="rgba(0,0,0,0.4)";a.l.fillRect(k-40,l-1,80,3);a.l.fillRect(k-1,l-40,3,80);a.l.fillStyle="#ffffff";a.l.fillRect(k-40,l,80,1);a.l.fillRect(k,l-40,1,80)}pos2=Gb(a.Yb).inverse([b[0],b[1]]);c="";"Projected"==a.Ya&&(c=Hb(a,b[0],b[1],Fb(a,b[0],b[1],b[2])));"Geographic"==a.Ya&&(c=Hb(a,pos2[0],pos2[1],Fb(a,b[0],b[1],b[2])));Db(a,k+20,l+17,c)}}var Gb=window.proj4;function jb(a){document.onmousedown=a.ae.bind(a);document.oncontextmenu=function(){return!1};document.onmouseup=a.Nb.bind(a);document.onmousemove=a.ef.bind(a);document.ondblclick=a.cf.bind(a);document.onselectstart=function(){return!1};var b=document.getElementById("vadstena-engine");a.kb=b;null!=b&&(b.addEventListener("DOMMouseScroll",a.vb.bind(a),!1),b.addEventListener("mousewheel",a.vb.bind(a),!1));b=document.getElementById("vadstena-engine-canvas-2d");null!=b&&(b.onmouseover=function(){this.Zb=
!0}.bind(a),b.onmouseout=function(){this.Zb=!1}.bind(a));document.onkeyup=a.$d.bind(a);document.onkeypress=a.yg.bind(a);document.onkeydown=a.xg.bind(a);document.ontouchstart=a.Dg.bind(a);document.ontouchmove=a.Cg.bind(a);document.ontouchend=a.gf.bind(a)}h=W.prototype;
h.cf=function(a,b){if(null!=this.t&&null!=this.fb&&null!=this.a&&(!0!=this.Da||!0==b))if(!0==this.mb)this.mb=!1;else{var c=this.a.Ib(this.sb,this.tb,"all"),d=this.a.Fd(c[0],c[1]),e=this.a.aa(),f=this.a.oa(),g=this.a.Fd(e[0],e[1]),k=this.a.Ce(),l=k[0],m=c[0]-l[0],n=c[1]-l[1],p=c[2]-l[2],m=Math.sqrt(m*m+n*n+p*p),m=-(l[2]-c[2])/k[1][2],g=-(l[2]-(g[0]+this.a.I("cameraHeightOffset")))/k[1][2],m=0>m?0>g?20:g:m;f[0]%=360;f[1]%=360;f[2]%=360;gb(this.fb,[e[0],e[1],e[2]],[f[0],f[1],f[2]],this.a.I("cameraHeightOffset"));
hb(this.fb,[c[0],c[1],m],f,c[2]-d[0],!1);this.t.ia(0);this.t.Gb=!1;this.t.cd=!0}};h.ae=function(a,b){if(!0!=this.Da||!0==b){var c=!1,d=a||window.event;d.which?c=3==d.which:d.button&&(c=2==d.button);!0==c?this.Mb=!0:(this.Za=!0,"gis"==this.Ob&&null!=this.a&&Z(this));this.Rb=d.altKey;this.ib=d.ctrlKey;this.ta=d.shiftKey}};
h.Nb=function(a,b){if(!0!=this.Da||!0==b){var c=!1,d=a||window.event;d.which?c=3==d.which:d.button&&(c=2==d.button);if(!0==c)this.Mb=!1;else if(this.Za=!1,!0!=this.nb&&"gis"==this.Ob&&null!=this.a&&(!1!=this.Zb||!0==this.Da)){var d=this.He,e=Gb(this.Yb).inverse([d[0],d[1]]),c="";switch(this.Ya){case "Projected":c=Hb(this,d[0],d[1],Fb(this,d[0],d[1],d[2]));break;case "Geographic":c=Hb(this,e[0],e[1],Fb(this,d[0],d[1],d[2]))}switch(this.Ma){case "position":!0!=this.Xb&&(this.f.G=!1,zb("\nPosition:\n"+
c+"\n"),this.f.Ga=d.slice(),this.f.pc=c);break;case "length":if(!0!=this.Xb)if(this.f.G=!1,0==this.f.D||2==this.f.D)zb("\nDistance:\np1: "+c+"\n"),this.f.D=1,this.f.Ga=d.slice(),this.f.xb=d.slice();else if(1==this.f.D){this.f.xb=d.slice();var d=this.f.xb[0]-this.f.Ga[0],e=this.f.xb[1]-this.f.Ga[1],f=this.f.xb[2]-this.f.Ga[2],g=Math.sqrt(d*d+e*e+f*f),k=Math.atan2(d,e),k=k/Math.PI*180;0>k&&(k=360+k);zb("p2: "+c+"\n");zb("    dx: "+Ib(Math.abs(d))+" dy: "+Ib(Math.abs(e))+" dz: "+Ib(Math.abs(f))+"\n");
zb("    L: "+Ib(g)+" azimuth: "+k.toFixed(2)+"\u00b0\n");this.f.pc="L: "+Ib(g)+" azimuth: "+k.toFixed(2)+"\u00b0";this.f.D=2}break;case "distance":if(!0!=this.Xb){if(0==this.f.D)zb("\nTrack\np1: "+c+"\n"),this.f.D++,this.f.s=[],this.f.s.push(d.slice());else{this.f.s.push(d.slice());for(var l=this.f.s.length-1,m=g=0,n=0;n<l;n++)d=this.f.s[n+1][0]-this.f.s[n][0],e=this.f.s[n+1][1]-this.f.s[n][1],f=this.f.s[n+1][2]-this.f.s[n][2],k=Math.atan2(d,e),k=k/Math.PI*180,0>k&&(k=360+k),g=Math.sqrt(d*d+e*e+f*
f),m+=Math.sqrt(d*d+e*e+f*f);zb("p"+l+": "+c+"\n");zb("    azimuth: "+k.toFixed(2)+"\n    L:= "+Ib(m)+" l"+l+": "+Ib(g)+"\n");this.f.pc="L: "+Ib(m)}vb(this)}}k=document.getElementById("vadstena-engine-gis-panel-texts");null!=k&&(k.scrollTop+=1E5);this.Xb=!1;Z(this)}this.nb=this.da=this.od=!1}};
h.ef=function(a,b){if(!0!=this.Da||!0==b){var c=a.clientX,d=a.clientY;this.Kb=c-this.sb;this.Lb=d-this.tb;this.sb=c;this.tb=d;if(!0!=this.da&&null!=this.a){if(!0==this.od)this.a.rotate(0.8*this.Kb,0.8*this.Lb),this.t.ia(0),ib(this);else if(!0==this.Za&&!0!=this.Rb&&!0!=this.ib&&!0!=this.ta&&(this.a.kf(0.5*this.Kb,0.5*this.Lb),this.t.ia(0),ib(this)),!0==this.Mb||!0==this.Za&&(!0==this.Rb||!0==this.ib||!0==this.ta))this.a.rotate(0.4*this.Kb,0.4*this.Lb),this.t.ia(0),ib(this);"gis"==this.Ob&&(!0==this.Za&&
(this.Xb=!0),Z(this))}}};h.vb=function(a,b){if(!0!=this.Da||!0==b)if(a.preventDefault&&a.preventDefault(),a.returnValue=!1,!0==this.Ld)this.Ld=!1;else{var c=0,c=a.wheelDelta,d=a.detail,c=d?c?c/d/40*(0<=d?1:-1):-d/3:c/120;!0==isNaN(c)&&(c=0);c=0>c?1:-1;null!=this.a&&(!0==this.ta?this.a.rotate(0,0,5*c):"observer"==this.a.De()?this.a.zoom(17.5*c):this.a.zoom(7*c),this.t.ia(0),ib(this))}};
h.xg=function(a){"undefined"==typeof a&&(a=window.event);this.Rb=a.altKey;this.ib=a.ctrlKey;this.ta=a.shiftKey;this.$d(a,!0)};h.yg=function(a){this.$d(a,!0)};
h.$d=function(a,b){"undefined"==typeof a&&(a=window.event);if(a){var c;c=window.event?window.event.keyCode:a.which?a.which:a.charCode;if(!0==this.ta&&!0==this.ib)switch(c){case 68:case 100:a.preventDefault&&a.preventDefault()}if(!0==this.ta&&!0!=b&&null!=this.a){switch(c){case 76:case 108:pb();kb(this,"link");done_();break;case 71:case 103:pb();kb(this,"position");done_();break;case 65:case 97:this.t.ia(1)}if(!0==this.ib)switch(c){case 68:case 100:this.pd=!0}if(!0==this.pd)switch(c){case 49:this.a.ad("manual");
done_();break;case 50:this.a.ad("drone");done_();break;case 51:this.a.ad("observer");done_();break;case 48:this.a.O("noForwardMovement",!this.a.I("noForwardMovement"));break;case 84:case 116:var d=this.a.Ib(this.sb,this.tb,"all");console.log("hit pos: "+d[0]+" "+d[1]+" "+d[2]+" "+d[3]+" d "+d[4]);var e=this.a;!0!=e.w&&null!=e.c&&(e.c.rb=d,Sa(e.c),e.c.rb=null);break;case 72:case 104:this.we=!this.we;this.a.O("drawOnlyHeightmap",this.we);break;case 80:case 112:this.a.Zc(d);break;case 83:case 115:pb();
kb(this,"stats");break;case 66:case 98:this.a.O("drawBBoxes",!this.a.I("drawBBoxes"));break;case 87:case 119:d=this.a.I("drawWireframe")+1;this.a.O("drawWireframe",2<d?0:d);break;case 70:case 102:this.a.O("drawWireframe",3!=this.a.I("drawWireframe")?3:0);break;case 77:case 109:this.a.O("drawMaxLod",!this.a.I("drawMaxLod"))}}if(!0==this.pd&&!0==this.a.I("drawBBoxes")&&!0!=this.ta&&!0!=b&&null!=this.a)switch(c){case 76:case 108:this.a.O("drawLods",!this.a.I("drawLods"));break;case 80:case 112:this.a.O("drawPositions",
!this.a.I("drawPositions"));break;case 84:case 116:this.a.O("drawTextureSize",!this.a.I("drawTextureSize"));break;case 83:case 115:this.a.O("drawTexelSize",!this.a.I("drawTexelSize"));break;case 70:case 102:this.a.O("drawFaceCount",!this.a.I("drawFaceCount"));break;case 68:case 100:this.a.O("drawDistance",!this.a.I("drawDistance"))}}if("gis"==this.Ob)switch(c){case 27:switch(this.Ma){case "length":this.f.D=0;break;case "distance":wb(this)}break;case 8:switch(this.Ma){case "length":this.f.D=0;break;
case "distance":xb(this)}}this.Rb=a.altKey;this.ib=a.ctrlKey;this.ta=a.shiftKey};h.Re=function(){return this.ta};h.ng=function(){this.Ld=!0};W.prototype.isShiftDown=W.prototype.Re;W.prototype.ignoreWheel=W.prototype.ng;W.prototype.Dg=function(a){if(!0!=this.Kd){this.Da=!0;this.la="down";this.Qc=a.touches.length;this.pa=0;var b=a.touches[0],c=this.kb.getBoundingClientRect();a=b.clientX-c.left;b=b.clientY-c.top;"down"==this.la&&(this.sb=a,this.tb=b,this.Lb=this.Kb=0);document.ontouchend=this.gf.bind(this);this.ae({button:1},!0)}};
W.prototype.Cg=function(a){a.preventDefault();if(!0!=this.Kd&&""!=this.la){a.touches.length>this.Qc&&(this.Qc=a.touches.length);var b=a.touches[0],c=this.kb.getBoundingClientRect(),d=b.clientX-c.left,b=b.clientY-c.top;if(2==a.touches.length){if(!0!=this.Mb){var e=a.touches[1],f=e.clientX-c.left,e=e.clientY-c.top,f=f-d,g=e-b,e=0;!0!=isNaN(f)&&!0!=isNaN(g)&&(e=Math.sqrt(f*f+g*g));this.pa=e;this.ae({button:2},!0)}!0==this.Za&&this.Nb({button:1},!0)}else 1==a.touches.length&&(this.pa=0,"pinch"==this.la&&
(this.la="drag"),!0!=this.Za&&this.Nb({button:1},!0),!0==this.Mb&&this.Nb({button:2},!0));if("down"==this.la)this.sb=d,this.tb=b,this.Lb=this.Kb=0,this.la="drag";else if("drag"==this.la||"pinch"==this.la)1<a.touches.length&&(e=a.touches[1],f=e.clientX-c.left,e=e.clientY-c.top,f-=d,g=e-b,e=0,!0!=isNaN(f)&&!0!=isNaN(g)&&(e=Math.sqrt(f*f+g*g)),!0!=isNaN(e)&&(40<Math.abs(e-this.pa)&&"drag"==this.la||20<Math.abs(e-this.pa)&&"pinch"==this.la)&&(this.la="pinch",a=Math.abs(e-this.pa),60<a?(this.vb({wheelDelta:6*
(e-this.pa)},!0),this.vb({wheelDelta:6*(e-this.pa)},!0)):40<a&&this.vb({wheelDelta:6*(e-this.pa)},!0),this.vb({wheelDelta:6*(e-this.pa)},!0),this.vb({wheelDelta:6*(e-this.pa)},!0),this.pa=e)),"drag"==this.la&&this.ef({clientX:d,clientY:b},!0)}};W.prototype.gf=function(){if(!0!=this.Kd){this.la="";!0==this.Za&&this.Nb({button:1},!0);!0==this.Mb&&this.Nb({button:2},!0);var a=(new Date).getTime();1==this.Qc&&300>a-this.qg&&this.cf(0,!0);this.Qc=0;this.qg=a;this.pa=0;document.ontouchend=null}};W.prototype.Kg=function(){this.Kf=!0};W.prototype.Ig=function(){};
W.prototype.Jg=function(a){a=a.data;if(null!=this.a&&null!=a&&""!=a&&null!=this.Db){a=a.split(" ");var b=this.a.aa(),c=this.a.oa(),d=this.a.I("cameraHeightOffset");null!=a[0]&&(b[0]=parseFloat(a[0]));null!=a[1]&&(b[1]=parseFloat(a[1]));null!=a[2]&&(b[2]=parseFloat(a[2]));null!=a[3]&&(c[0]=parseFloat(a[3]));null!=a[4]&&(c[1]=parseFloat(a[4]));null!=a[6]&&(d=parseFloat(a[6]));this.a.za(b[0],b[1],b[2]);this.a.sa(c[0],c[1],c[2]);this.a.O("cameraHeightOffset",d);this.t.ia(0)}};
function ib(a){if(null!=a.a&&null!=a.Db){var b=a.a.aa(),c=a.a.oa(),d=a.a.I("cameraHeightOffset"),b=""+b[0].toFixed(3)+" "+b[1].toFixed(3)+" "+b[2].toFixed(3)+" "+c[0].toFixed(4)+" "+c[1].toFixed(4)+" 0 "+(null!=d?d:0).toFixed(3);b!=a.Lf&&(a.Lf=b,null==a.Db&&!0==a.Kf||a.Db.send(b))}};function Jb(){Y("vadstena-engine-link-panel","none")}
function ob(a){if(null!=a.a){var b=a.t.Fc(),c=a.a.aa(),d=a.a.oa(),e=a.a.I("cameraHeightOffset"),b=null!=b.shareLink?b.shareLink+"?":"",b=b+("x="+Math.round(c[0])+"&"),b=b+("y="+Math.round(c[1])+"&"),b=b+("d="+Math.round(c[2])+"&"),b=b+("rx="+Math.round(d[0]%360)+"&"),b=b+("ry="+Math.round(d[1]%360)+"&"),b=b+("ho="+Math.round(e)+"&");!0==a.Td?(b+="rotate=1",X("vadstena-engine-link-panel-autorotate-img","className","vadstena-engine-checkbox selected")):(b+="rotate=0",X("vadstena-engine-link-panel-autorotate-img",
"className","vadstena-engine-checkbox"));X("vadstena-engine-link-panel-text","innerHTML",b)}}function Kb(){Y("vadstena-engine-stats-panel","none")}function Bb(){Y("vadstena-engine-info-panel","none")}function pb(){Y("vadstena-engine-tools","block");Y("vadstena-engine-tools-button","none")}function qb(){Y("vadstena-engine-tools","none");Y("vadstena-engine-tools-button","block")}
function rb(a,b){Bb();Jb();Kb();Cb();a.Ob=b;switch(b){case "info":!0!=a.Pd&&Y("vadstena-engine-info-panel","block");break;case "gis":a.t.ia(0);a.Zb=!1;Y("vadstena-engine-canvas-2d","block");Y("vadstena-engine-gis-panel","block");break;case "location":a.t.ia(0);ob(a);Y("vadstena-engine-link-panel","block");break;case "stats":Y("vadstena-engine-stats-panel","block")}}function Ab(){Y("vadstena-engine-tools","none");Y("vadstena-engine-tools-button","none")}
W.prototype.Ne=function(){Y("vadstena-engine-toolbar","none")};
function kb(a,b){Bb();Jb();Kb();Cb();X("vadstena-engine-toolbar-view","className","");X("vadstena-engine-toolbar-length","className","");X("vadstena-engine-toolbar-distance","className","");X("vadstena-engine-toolbar-position","className","");X("vadstena-engine-toolbar-stats","className","");X("vadstena-engine-toolbar-link","className","");switch(b){case "length":case "distance":case "position":Y("vadstena-engine-toolbar-length","inline-block"),Y("vadstena-engine-toolbar-distance","inline-block"),
Y("vadstena-engine-toolbar-position","inline-block")}switch(b){case "view":rb(a,"info");X("vadstena-engine-toolbar-view","className","selected");break;case "length":rb(a,"gis");tb(a);X("vadstena-engine-toolbar-length","className","selected");break;case "distance":rb(a,"gis");ub(a);X("vadstena-engine-toolbar-distance","className","selected");break;case "position":rb(a,"gis");sb(a);X("vadstena-engine-toolbar-position","className","selected");break;case "stats":rb(a,"stats");Y("vadstena-engine-toolbar-break",
"inline-block");Y("vadstena-engine-toolbar-stats","inline-block");X("vadstena-engine-toolbar-stats","className","selected");break;case "link":rb(a,"location"),Y("vadstena-engine-toolbar-break","inline-block"),Y("vadstena-engine-toolbar-link","inline-block"),X("vadstena-engine-toolbar-link","className","selected")}"view"==b&&!0==a.Pd?Ab():pb()}
W.prototype.mg=function(){this.xa={};this.xa.mh="none"!=yb("vadstena-engine-tools");this.xa.lh="none"!=yb("vadstena-engine-tools-button");this.xa.tg="none"!=yb("vadstena-engine-navigation");this.xa.nh="none"!=yb("vadstena-engine-toolbar");this.xa.Vf="none"!=yb("vadstena-engine-credits");Y("vadstena-engine-tools","none");Y("vadstena-engine-tools-button","none");Y("vadstena-engine-navigation","none");Y("vadstena-engine-toolbar","none");Y("vadstena-engine-credits","none")};
W.prototype.Wg=function(){Y("vadstena-engine-tools",this.xa.mh?"block":"none");Y("vadstena-engine-tools-button",this.xa.lh?"block":"none");Y("vadstena-engine-navigation",this.xa.tg?"block":"none");Y("vadstena-engine-toolbar",this.xa.nh?"block":"none");Y("vadstena-engine-credits",this.xa.Vf?"block":"none")};q.Interface=W;W.prototype.showInterfacePanels=W.prototype.Wg;W.prototype.hideInterfacePanels=W.prototype.mg;W.prototype.isShiftDown=W.prototype.Re;q.ne=function(a,b,c){this.kb=a;this.Ja=this.Jb=1;this.sc=this.Od=0;this.Zf=b;this.Yf=c;this.qc()};
function Lb(a,b,c){for(a.sc=c;a.kb.firstChild;)a.kb.removeChild(a.kb.firstChild);for(var d="",e=0;e<c;e++)d+='<table id="vadstena-engine-gallery-'+e+'"><tr><td><img src="'+b+(e+1)+'.jpg?"></td></tr></table>';a.kb.innerHTML=d;a.Jb=1;a.Ja=1;a.Od=(new Date).getTime();for(b=0;b<a.sc;b++)element_=document.getElementById(Mb(b)),null!=element_&&(element_.style.visibility="hidden",element_.style.zIndex="0");Nb(a,0,!0)}
q.ne.prototype.qc=function(){if(0<this.sc){if(1>this.Ja){this.Ja+=this.Yf;1<this.Ja&&(this.Ja=1);var a=document.getElementById(Mb(this.Jb));null!=a&&Ob(a,this.Ja)}this.Od+this.Zf<(new Date).getTime()&&Nb(this,this.Jb+1>=this.sc?0:this.Jb+1)}window.setTimeout(this.qc.bind(this),1E3/60)};
function Ob(a,b){var c=navigator.userAgent.toLowerCase();-1!=c.indexOf("msie")?-1!=c.indexOf("msie 8")?(b=Math.round(100*b),a.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+b+")"):-1!=c.indexOf("msie 7")?(b=Math.round(100*b),a.style.filter="alpha(opacity="+b+")"):a.style.opacity=b:a.style.opacity=b}function Mb(a){return"vadstena-engine-gallery-"+a}
function Nb(a,b,c){for(var d=null,e=0;e<a.sc;e++)d=document.getElementById(Mb(e)),null!=d&&(d.style.visibility="hidden",d.style.zIndex="0");d=document.getElementById(Mb(a.Jb));null!=d&&(d.style.zIndex="1",d.style.visibility="visible",Ob(d,1));a.Ja=!0==c?1:0;d=document.getElementById(Mb(b));null!=d&&(d.style.visibility="visible",d.style.zIndex="2",Ob(d,a.Ja));a.Od=(new Date).getTime();a.Jb=b};window.VadstenaInterfaceCommand_=function(){};q.oe="https://www.melown.com/maps/";
function $(a){this.qb=[];this.Ud=0;this.U=this.Oc=null;this.wc="";this.jd=0;this.cd=this.Gb=!1;this.Bd=!0;for(var b=this.C={},c={},d=window.location.search.substring(1).split("&"),e=0;e<d.length;e++){var f=d[e].split("=");"undefined"===typeof c[f[0]]?c[f[0]]=f[1]:"string"===typeof c[f[0]]?c[f[0]]=[c[f[0]],f[1]]:c[f[0]].push(f[1])}b.Aa=c;"1"==this.C.Aa.notextures&&(q.Yd=!0);this.q={};null!=this.C.Aa.cache&&(this.q.cacheSize=1048576*this.C.Aa.cache);null!=this.C.Aa.gpucache&&(this.q.gpuCacheSize=1048576*
this.C.Aa.gpucache);b=document.getElementById("vadstena-engine");null!=b&&(c='\x3c!-- 3D MAP --\x3e<div id="vadstena-engine-canvas-3d"></div><canvas id="vadstena-engine-canvas-2d"></canvas>\x3c!-- GALLERY --\x3e<div id="vadstena-engine-gallery"></div>\x3c!-- LOGO SMALL --\x3e<a id="vadstena-engine-logo" href="'+q.oe+'">3D: Melown Maps</a>\x3c!-- MENU BUTTON --\x3e<div id="vadstena-engine-tools-button"><img onclick="VadstenaInterfaceCommand_(\'show-menu\');" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NEQzMzNCMUEyQzMzMTFFNEExMzlCRTI3NkI2NjNBNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NEQzMzNCMUIyQzMzMTFFNEExMzlCRTI3NkI2NjNBNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0RDMzM0IxODJDMzMxMUU0QTEzOUJFMjc2QjY2M0E0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0RDMzM0IxOTJDMzMxMUU0QTEzOUJFMjc2QjY2M0E0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pp/Ui4oAAALZSURBVHjazJhLaFNBFIYbo+jKCKIt7tRWVNBFqIIi2bUq6MKCGnEnUomPPrZuBBfupLX1AUHQjVrblejCtqLiE7S4EKmC1ZWIVYS2K7W28Rv4A9fcm2ZmkkAPfNyQdu75c2bOmTMTy+VyNfPBFpb7gmw2W9b41tZWdyE4XcSjGZqgEephmf48AZ9gBIZhEKYrGhEEGGdtcBJeydEAjElAjQStlcBjcA0uQ1fgf4raAgsRaR7vYQlshj1wAZ7DOPwW5vML6IG9sBFMBD9A2jsiCIjL4XI4CE8cp/8HnIb7kIEUnIIZ64hIRB+YlDrsISJoZuwhCeiHuMvUmHn9pl8wW6EMNe/6qiiXFkI09vOog84qlIt2TXV6TiGISGixXYG/VRAyq3f3BNI+MiIdcB0eeTgx9eWW5Zq5Kl/hrFGxOgGbPEXctElTWTeMwjn4UxiRZhWrcUcROwMiHliO+Q4v5TM0NU2qmC62SyIOOIjI26B+REhIo/YJFxE3wGTZQ4/pfAPJqMpar73DxnZLRAs89sygj9AQJWQpTFmKMNOxrwwRxiYhYb3pRbUQ8AXeVbLABIVMKSqlrEUL09SDVWX4TigqISFjWielLKfyb/qRZ7DaU0iD1klIyIgyx9bOwCV4Chs8hCSVOSEhw6olLnYezmpLSHpU46EoIebLrVDr2j9rqkyB2mE5ZiVs15j/hdBNTyvUHR5hNpvdEfUcNmZ8XMzvM1GtYrd6zCGPHfiuKGWmZTwK64q2AURlUt16phJnniLlIiMfE3N2aIgZUJvYVQUhpk38qX7YqmftVLvY61l9o6xXBbDdunkmKjPqL2La3FJlCEhpMcfVLtgfJ/JiwJzs7sBtdVN1DgJWaEy/3nG8mAirTQ8xfaqcv+At3NNi26aas1jU6rs2Zc+ozr7ro9ZEocVcriUCh3DDFlhTcAj/DK9dDuH524BYufcjlbqWiM2Xi5p/AgwAwM6/AB42QCMAAAAASUVORK5CYII="></div>\x3c!-- CREDITS --\x3e<div id="vadstena-engine-credits"></div>',
c+='\x3c!-- TOOLBAR --\x3e<div id="vadstena-engine-toolbar"><div id="vadstena-engine-toolbar-bottons"><div id="vadstena-engine-toolbar-view" title="View" onclick="VadstenaInterfaceCommand_(\'toolbar-button\', \'view\');"></div><div id="vadstena-engine-toolbar-position" title="Position" onclick="VadstenaInterfaceCommand_(\'toolbar-button\', \'position\');"></div><div id="vadstena-engine-toolbar-length"  title="Distance" onclick="VadstenaInterfaceCommand_(\'toolbar-button\', \'length\');"></div><div id="vadstena-engine-toolbar-distance" title="Track" onclick="VadstenaInterfaceCommand_(\'toolbar-button\', \'distance\');"></div><div id="vadstena-engine-toolbar-break" class="break"></div><div id="vadstena-engine-toolbar-stats" title="Statistics" onclick="VadstenaInterfaceCommand_(\'toolbar-button\', \'stats\');"></div><div id="vadstena-engine-toolbar-link" title="Link" Statistic onclick="VadstenaInterfaceCommand_(\'toolbar-button\', \'link\');"></div></div></div>\x3c!-- TOOLS PANEL --\x3e<div id="vadstena-engine-tools" class="vadstena-engine-tools">\x3c!-- INFO PANEL --\x3e<div id="vadstena-engine-info-panel"><h3><img id="vadstena-engine-tools-close" onclick="VadstenaInterfaceCommand_(\'hide-menu\');" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzlDMkU3MEQyQzMzMTFFNDhBOTlFRjU0QkQ1MzIwMDEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzlDMkU3MEUyQzMzMTFFNDhBOTlFRjU0QkQ1MzIwMDEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozOUMyRTcwQjJDMzMxMUU0OEE5OUVGNTRCRDUzMjAwMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozOUMyRTcwQzJDMzMxMUU0OEE5OUVGNTRCRDUzMjAwMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv+NYboAAALESURBVHjazJhNSFRRFMdnptRWNoJotCsTEheCiRHYxyYt0IVKai5djBjq2EKEFhZC7gI/KGGgduVHCwndaFGpFYi4aBEqfqw0UloMrdLBxv/Bv/CcmTfv3jsP8sAPHnPfve9/7z3nnnPHG41GPSfBTodCof8qIBAIHArR7JcGKsBtUALygJ9tYbAGFsE0iagO7FN8Tz72BPwEzWAddIIicJbIcxfbWsAm6LYITVlIA1gG6aAQVIEB8A1sg10iz1/ZVklhZ8ASqHf0kSRtp8AgyAJ1YFZzG3+BR2CKK3QdBMG+zoqIiDF2um8gwmozoBFIeI5wbGUh/fSHNpeC4x/HklXqUxUi+5nNZXTbOkAOtzqpED+dbYizcNv2OfZAbDT5Eih+yX11MtnvcgMxn8Gr2BW3CpHwfGC3hwlMBL82FNPPb6UlEiIDzoMdxcHeM6Le8LTVMTlzFqyTsAqpYMzr2Ac6nomYaTshV5gndO0juEcxdzT6LfKbcUIuMWl5DMXUUsxdxT6rID+RED8zqKlJNFTTgVXE/AGZutlX1X6ALSkzdDtahYRVU7aNnWdOEgeuUXg/k6sSJ2SNfmJiF8AX8BY8ZIJzsnz6SZyQY16sYQVgDjwHjzX6HYtSq5Apg7OgGHwCPeCZZt9yniVxQuTHq8yOKlZG8bIVuhV4Lii1E7IHXjDxqZjUF01g2GA7g9zKiF2pKAlvhTN1ysD1ho59ixO4nKwMkBBuZ43p9hlzVIK28BthpwptFPxmqnbb+pjdx1Rr1iAPqEGXBPg41jk7H/QlKenquJTijDdSEHGTydDLO5LWdeJIjFRR77iUvRqh7eHse1lSjoNWOxGqSW+EHr7HpDZBZ7vG8yCD5PI3aZsE38Ffnryjqdz0YqNJ7r5PLZdwWeaLMZfwDZaAQywJlC/huv8GRDjbSbfDyXtS/qg5EGAAYcKcR24KUtAAAAAASUVORK5CYII="><span id="vadstena-engine-info-panel-title"></span></h3><div id="vadstena-engine-info-panel-texts"></div><div id="vadstena-engine-info-panel-like"></div><div id="vadstena-engine-info-panel-buttons" class="vadstena-engine-info-panel-buttons"><span class="vadstena-engine-info-panel-button" onclick="VadstenaInterfaceCommand_(\'info-button\', \'previous\');">&nbsp;<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAATCAYAAACgADyUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUMxMkFGRTEyNDg3MTFFNDk5NDlGNTM3OTQxODczNjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUMxMkFGRTIyNDg3MTFFNDk5NDlGNTM3OTQxODczNjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1QzEyQUZERjI0ODcxMUU0OTk0OUY1Mzc5NDE4NzM2NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1QzEyQUZFMDI0ODcxMUU0OTk0OUY1Mzc5NDE4NzM2NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqHQ4kMAAABySURBVHjaYvz//z8DOYCJgUwwSDUyMjKuAmIXojUCFSsB8RkgMxRDEhSq2DAQpIGkobgDQx6HplVQDSDbjLGqQdOgBFWM1RZ8GmdCNaXh00Q9G8n2I8WhisPpLshyeBMAUME9IDYBMldjJI4RkK0AAgwAX1oWYHWeFXMAAAAASUVORK5CYII=">&nbsp;Previous</span>&nbsp;<span class="vadstena-engine-info-panel-button" onclick="VadstenaInterfaceCommand_(\'info-button\', \'next\');">Next&nbsp;<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAATCAYAAACgADyUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzZDQjQ5Q0IyNDg3MTFFNDk1ODFFNjQyQzE3RUFFRDEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzZDQjQ5Q0MyNDg3MTFFNDk1ODFFNjQyQzE3RUFFRDEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NkNCNDlDOTI0ODcxMUU0OTU4MUU2NDJDMTdFQUVEMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NkNCNDlDQTI0ODcxMUU0OTU4MUU2NDJDMTdFQUVEMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvX2hrYAAABxSURBVHjaYvz//z8DOYCJgUwwwBoZGRldgHgVuTaGAjWfAWIlvDpBoYqMgaADJAzFaejycHVYBRkYjIH4DFTzKqI1YrEdZIgS0RqhmtOgmmfSzkay/EhWqAKBCy6noWMWLFG7GigRRijlMI6AbAUQYACZjBKpOxA89gAAAABJRU5ErkJggg=="></span></div></div>',
c+='\x3c!-- GIS PANEL --\x3e<div id="vadstena-engine-gis-panel"><h3><img id="vadstena-engine-tools-close" onclick="VadstenaInterfaceCommand_(\'hide-menu\');" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzlDMkU3MEQyQzMzMTFFNDhBOTlFRjU0QkQ1MzIwMDEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzlDMkU3MEUyQzMzMTFFNDhBOTlFRjU0QkQ1MzIwMDEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozOUMyRTcwQjJDMzMxMUU0OEE5OUVGNTRCRDUzMjAwMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozOUMyRTcwQzJDMzMxMUU0OEE5OUVGNTRCRDUzMjAwMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv+NYboAAALESURBVHjazJhNSFRRFMdnptRWNoJotCsTEheCiRHYxyYt0IVKai5djBjq2EKEFhZC7gI/KGGgduVHCwndaFGpFYi4aBEqfqw0UloMrdLBxv/Bv/CcmTfv3jsP8sAPHnPfve9/7z3nnnPHG41GPSfBTodCof8qIBAIHArR7JcGKsBtUALygJ9tYbAGFsE0iagO7FN8Tz72BPwEzWAddIIicJbIcxfbWsAm6LYITVlIA1gG6aAQVIEB8A1sg10iz1/ZVklhZ8ASqHf0kSRtp8AgyAJ1YFZzG3+BR2CKK3QdBMG+zoqIiDF2um8gwmozoBFIeI5wbGUh/fSHNpeC4x/HklXqUxUi+5nNZXTbOkAOtzqpED+dbYizcNv2OfZAbDT5Eih+yX11MtnvcgMxn8Gr2BW3CpHwfGC3hwlMBL82FNPPb6UlEiIDzoMdxcHeM6Le8LTVMTlzFqyTsAqpYMzr2Ac6nomYaTshV5gndO0juEcxdzT6LfKbcUIuMWl5DMXUUsxdxT6rID+RED8zqKlJNFTTgVXE/AGZutlX1X6ALSkzdDtahYRVU7aNnWdOEgeuUXg/k6sSJ2SNfmJiF8AX8BY8ZIJzsnz6SZyQY16sYQVgDjwHjzX6HYtSq5Apg7OgGHwCPeCZZt9yniVxQuTHq8yOKlZG8bIVuhV4Lii1E7IHXjDxqZjUF01g2GA7g9zKiF2pKAlvhTN1ysD1ho59ixO4nKwMkBBuZ43p9hlzVIK28BthpwptFPxmqnbb+pjdx1Rr1iAPqEGXBPg41jk7H/QlKenquJTijDdSEHGTydDLO5LWdeJIjFRR77iUvRqh7eHse1lSjoNWOxGqSW+EHr7HpDZBZ7vG8yCD5PI3aZsE38Ffnryjqdz0YqNJ7r5PLZdwWeaLMZfwDZaAQywJlC/huv8GRDjbSbfDyXtS/qg5EGAAYcKcR24KUtAAAAAASUVORK5CYII="><span id="vadstena-engine-info-panel-title">Measurements</h3><div id="vadstena-engine-gis-panel-coords-buttons">Geodetic datum: WGS84</div><br/><span>Measurements log:</span><textarea id="vadstena-engine-gis-panel-texts" rows="10" cols="39" readonly></textarea><div id="vadstena-engine-gis-panel-coords-buttons"><span class="vadstena-engine-button" id="vadstena-engine-gis-panel-button-clear" onclick="VadstenaInterfaceCommand_(\'gis-button\', \'clear\');">Clear</span><span class="vadstena-engine-button-disabled" id="vadstena-engine-gis-panel-button-remove-last" onclick="VadstenaInterfaceCommand_(\'gis-button\', \'remove-last\');">Remove Last Point</span></div></div>',
c+='\x3c!-- LINK PANEL --\x3e<div id="vadstena-engine-link-panel"><h3><img id="vadstena-engine-tools-close" onclick="VadstenaInterfaceCommand_(\'hide-menu\');" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzlDMkU3MEQyQzMzMTFFNDhBOTlFRjU0QkQ1MzIwMDEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzlDMkU3MEUyQzMzMTFFNDhBOTlFRjU0QkQ1MzIwMDEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozOUMyRTcwQjJDMzMxMUU0OEE5OUVGNTRCRDUzMjAwMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozOUMyRTcwQzJDMzMxMUU0OEE5OUVGNTRCRDUzMjAwMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv+NYboAAALESURBVHjazJhNSFRRFMdnptRWNoJotCsTEheCiRHYxyYt0IVKai5djBjq2EKEFhZC7gI/KGGgduVHCwndaFGpFYi4aBEqfqw0UloMrdLBxv/Bv/CcmTfv3jsP8sAPHnPfve9/7z3nnnPHG41GPSfBTodCof8qIBAIHArR7JcGKsBtUALygJ9tYbAGFsE0iagO7FN8Tz72BPwEzWAddIIicJbIcxfbWsAm6LYITVlIA1gG6aAQVIEB8A1sg10iz1/ZVklhZ8ASqHf0kSRtp8AgyAJ1YFZzG3+BR2CKK3QdBMG+zoqIiDF2um8gwmozoBFIeI5wbGUh/fSHNpeC4x/HklXqUxUi+5nNZXTbOkAOtzqpED+dbYizcNv2OfZAbDT5Eih+yX11MtnvcgMxn8Gr2BW3CpHwfGC3hwlMBL82FNPPb6UlEiIDzoMdxcHeM6Le8LTVMTlzFqyTsAqpYMzr2Ac6nomYaTshV5gndO0juEcxdzT6LfKbcUIuMWl5DMXUUsxdxT6rID+RED8zqKlJNFTTgVXE/AGZutlX1X6ALSkzdDtahYRVU7aNnWdOEgeuUXg/k6sSJ2SNfmJiF8AX8BY8ZIJzsnz6SZyQY16sYQVgDjwHjzX6HYtSq5Apg7OgGHwCPeCZZt9yniVxQuTHq8yOKlZG8bIVuhV4Lii1E7IHXjDxqZjUF01g2GA7g9zKiF2pKAlvhTN1ysD1ho59ixO4nKwMkBBuZ43p9hlzVIK28BthpwptFPxmqnbb+pjdx1Rr1iAPqEGXBPg41jk7H/QlKenquJTijDdSEHGTydDLO5LWdeJIjFRR77iUvRqh7eHse1lSjoNWOxGqSW+EHr7HpDZBZ7vG8yCD5PI3aZsE38Ffnryjqdz0YqNJ7r5PLZdwWeaLMZfwDZaAQywJlC/huv8GRDjbSbfDyXtS/qg5EGAAYcKcR24KUtAAAAAASUVORK5CYII="><span id="vadstena-engine-info-panel-title">Link to this map</h3><textarea id="vadstena-engine-link-panel-text" name="name" cols="40" rows="4" readonly></textarea><div class="vadstena-engine-link-panel-autorotate" id="vadstena-engine-link-panel-autorotate" onclick="VadstenaInterfaceCommand_(\'link-button\', \'autorotate\');"><span id="vadstena-engine-link-panel-autorotate-img" class="vadstena-engine-checkbox"></span><span>Autorotate</span></div></div>\x3c!-- STATS PANEL --\x3e<div id="vadstena-engine-stats-panel"><h3><img id="vadstena-engine-tools-close" onclick="VadstenaInterfaceCommand_(\'hide-menu\');" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzlDMkU3MEQyQzMzMTFFNDhBOTlFRjU0QkQ1MzIwMDEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzlDMkU3MEUyQzMzMTFFNDhBOTlFRjU0QkQ1MzIwMDEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozOUMyRTcwQjJDMzMxMUU0OEE5OUVGNTRCRDUzMjAwMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozOUMyRTcwQzJDMzMxMUU0OEE5OUVGNTRCRDUzMjAwMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv+NYboAAALESURBVHjazJhNSFRRFMdnptRWNoJotCsTEheCiRHYxyYt0IVKai5djBjq2EKEFhZC7gI/KGGgduVHCwndaFGpFYi4aBEqfqw0UloMrdLBxv/Bv/CcmTfv3jsP8sAPHnPfve9/7z3nnnPHG41GPSfBTodCof8qIBAIHArR7JcGKsBtUALygJ9tYbAGFsE0iagO7FN8Tz72BPwEzWAddIIicJbIcxfbWsAm6LYITVlIA1gG6aAQVIEB8A1sg10iz1/ZVklhZ8ASqHf0kSRtp8AgyAJ1YFZzG3+BR2CKK3QdBMG+zoqIiDF2um8gwmozoBFIeI5wbGUh/fSHNpeC4x/HklXqUxUi+5nNZXTbOkAOtzqpED+dbYizcNv2OfZAbDT5Eih+yX11MtnvcgMxn8Gr2BW3CpHwfGC3hwlMBL82FNPPb6UlEiIDzoMdxcHeM6Le8LTVMTlzFqyTsAqpYMzr2Ac6nomYaTshV5gndO0juEcxdzT6LfKbcUIuMWl5DMXUUsxdxT6rID+RED8zqKlJNFTTgVXE/AGZutlX1X6ALSkzdDtahYRVU7aNnWdOEgeuUXg/k6sSJ2SNfmJiF8AX8BY8ZIJzsnz6SZyQY16sYQVgDjwHjzX6HYtSq5Apg7OgGHwCPeCZZt9yniVxQuTHq8yOKlZG8bIVuhV4Lii1E7IHXjDxqZjUF01g2GA7g9zKiF2pKAlvhTN1ysD1ho59ixO4nKwMkBBuZ43p9hlzVIK28BthpwptFPxmqnbb+pjdx1Rr1iAPqEGXBPg41jk7H/QlKenquJTijDdSEHGTydDLO5LWdeJIjFRR77iUvRqh7eHse1lSjoNWOxGqSW+EHr7HpDZBZ7vG8yCD5PI3aZsE38Ffnryjqdz0YqNJ7r5PLZdwWeaLMZfwDZaAQywJlC/huv8GRDjbSbfDyXtS/qg5EGAAYcKcR24KUtAAAAAASUVORK5CYII="><span id="vadstena-engine-info-panel-title">Render statistics</h3><p id="vadstena-engine-render-stats"></p></div></div>',
c+='\x3c!-- NAVIGATION CONTROLS --\x3e<div id="vadstena-engine-navigation">\x3c!-- ZOOM BUTTONS --\x3e<img id="vadstena-engine-plus" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTAyOUNBMDJCQjNCMTFFM0JDQjQ5NURBODEzRTcxRTkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTAyOUNBMDNCQjNCMTFFM0JDQjQ5NURBODEzRTcxRTkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5MDI5Q0EwMEJCM0IxMUUzQkNCNDk1REE4MTNFNzFFOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5MDI5Q0EwMUJCM0IxMUUzQkNCNDk1REE4MTNFNzFFOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pul3mzIAAANGSURBVHja7FlLTxNRGJ0WpNJoDSILDQ9t5NG4w52QVowGF8Z/YDfqyo0/xY0rWeFfYKExAdvYpd2Z4WEaQKILfEQwlNbSeq6em0wmM7cznUeniSc5+RrozHf6zTf3zncm1mq1tF5DXOtB9KTofp9++CQ4DV4GR8ABMAHWwDq4D+6COvgRPJEHx2IxR0mMbRzz0NMZcB681sGxH8B34keEJToN3mOUlZ4CJ8AL4CDYB54Gj1nVKvgN3AY3wSaPrYArEF4JUvQD8Do/n2WlR8Gki3McgXus9CH/9h7CX/ot+gz4ELzCKi6wuqc83Au/wS1wlVdjB3wB8b/8ED0EPuGlvwgugud8XAx+gq/BL+BX8DmE//AiWrTAU3CYlb3JnvUbouffst9F7z+D8EM70e3W6UcUPAPeDkiwxvPeYZ5h5u1oc8lzRRAtkfPYv073jBzzTaCyebeixSYxy5tukctXGBB57jLvLISn3Yi+z7jg803nBCnm1bgfOBKd4caR4s3XDUwzfxrVzjgRPc94I4Q+VvX3HD9n24mO81lCxDEvWbPZ7F96wCh1ZFDtPpXoScYpl1tzEEiyTTRzm8Yt+lmuHlGA1DGjEj3OeD4ioocYx1SiRwyXJgpImnRZik74ONH4OVklVOPWgNWXVMjlctZPQNWq8v+FQsHJ6RMmXZaVrjPWIlLpmkmXZaVr/FUNp9W2q5hcox1W1A4NqyKaK71vGImigCOTLkvRu4zfIyJaTjCfVKJ1xu2IiJY61lWitxg3I9AiIv+GQY+t6Car3eSY303sST2YF0/a2WJFPoOU+Fzd0UZTLBa9rholg562z9M6nZ8Dw+UJGxvMX0GVdafj1grjGg8OEwfMa9ThSLSodJnOzyvtnycXBo6ZT+Qt23l8KgthmVaVcH4Kht0pKDSYR+TbgeDlTnwPgSU6PmKdfEMnKAhUef515ltSfdmtl3eJPkjK5x4WXt5nzScvT0K4po/pOIkh8xbntn6P7SA2jUBcUyPydJ6kqTKnde5PlwwrU1nVw15Fa5r9mwAxhArzcJBXQL5zaWhdfhNgntyzhgneDXTudHrYL4okRI9fpfhxDqEJDhN1Vjsyb7e6hv9vbMPCHwEGAPd0FDaYMbMfAAAAAElFTkSuQmCC"><img id="vadstena-engine-minus" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUREMDE5NURCQjNCMTFFMzhBQzJFQkIxMjY5Q0I0QjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUREMDE5NUVCQjNCMTFFMzhBQzJFQkIxMjY5Q0I0QjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5REQwMTk1QkJCM0IxMUUzOEFDMkVCQjEyNjlDQjRCMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5REQwMTk1Q0JCM0IxMUUzOEFDMkVCQjEyNjlDQjRCMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhZ6YaAAAAMZSURBVHja7JlLTxRBEMeHVQ6Ie5BlwWgEA5hwwEAiiSNETIwnLnrzET+Bn8YPYXzc8MTFmCjB4O56INnDJoIRDZt1YPGwIAedWav0P9pMel47j56NVvJPTyY9U7/pVE93Vfe0222t2yyndaEdj+nDh0lDpAIpj/eyfkAtUpNkQGYUhz0RwuMMaYx0toNnt0kfSPW0oHlEp0hFYaRHSBNoT5H60KdKOiR9JX0ibaC18OwO+hhJQl8mncf1CdI8aZo0G+IdFdI6aZX0Dfc+kt7GDc0jN0caxMgukBYxsp0aj/gy6RVGvokPOYwD+iTpGlqGvk26GuPPYIX0jLRL2sdH7EeB5hC4TuonjZLuIRziNg6Xx6Qt0gHppRA6oaFv4DfGcfwgYjj4WYP0EPHNofKik8VFBzCHxP2EgdlOw88g/OphoYsIhxxieCqlxY793IXfUfxeA0NfRLsQ86QLYvPwq7kNVs5lpSti8i0q2l7cgv8ieHyhx9BeSSGOveJ7DtfjftA57CW4nVG8mZsGB4/0MS/oYbQjIZfmJGwWk1HkkkLbs3UiI1vnCw4uKXQB7bmMQNvb3gEv6Lysk0IbcHBJM5deWScf25TNcA/bEK79wjDv4JJC27N0MiiBrut/gC3LCvLIL9BSqRSk76SDSwptokMtKLhp/k73EsrqawKXK/R3QLeCvrVcLicZ0y2By3Ui2p32MjIR9xxcUugm2s8Zgd6WDaIT2pDMcJX23sElhf4iJJ0VxcAVpF8ilxTaQgHFQt6m0tYFHtNva7qJ9g3yNhXWgH+RxxO6jsoPZ8VLiqCX4H9Hk5TO3NKtKtrXKKCkaavwK3IEgjYwCTimnrg9nIBV4c+CfyNsCWEN/22u/DxKIb4b8LMLv2v/VIWJTazlcXZ8B2l+nDH8FJMullqebX0ALSCk+CNuImuOEg7PtYSqpke2z0Ky2Y80n7P2SyHe8U77W58+wL0trxiOCm0nmX4nAXnsx2vYoSk9CXBWosZlFaAAVsdKl9qZiyZJ0Ya0o6dbvbhvYgOfmdMtZdaVh5//odOynwIMAFn66fVJ7Ib5AAAAAElFTkSuQmCC">\x3c!-- COMPASS --\x3e<div id="vadstena-engine-compass-main"><div id="vadstena-engine-compass-frame"><img id="vadstena-engine-compass" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABjCAYAAACPO76VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODRDNjZFNDJCQjNCMTFFM0IyN0ZCQTZFQTAwNzEzNDUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODRDNjZFNDNCQjNCMTFFM0IyN0ZCQTZFQTAwNzEzNDUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4NEM2NkU0MEJCM0IxMUUzQjI3RkJBNkVBMDA3MTM0NSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4NEM2NkU0MUJCM0IxMUUzQjI3RkJBNkVBMDA3MTM0NSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pgg3VBcAAAzUSURBVHja7F1bbBTXGf7tNdiAbTAXYxscMJe04GDLwVwKNDgNhaogRB+4qKgtzUMrISEhIXjiLsT9gQd4oQ8lPFRtEdACoWCCuASRBCelJBASEnM1xsbgGwYbg03PN/4PHI93vTO7s7tnxv6kX7Pe9Y7H/zf/5fxnzn/iXr16Rd3QA3HdZHST0Q2XktFTSLKQNCGpQlKEJLL4WFqFvGRp5uMTIfVCaoQ08PvdZNgEFJ8uZIiQQQ6fu0rIfSEPmaBuMvygv5CRQrJN78cLyeLPQc4AIX2ZsB5Cegn5qZBqIff47oc8F1In5DErH5+XswWpwHdK+fMuTQYUOUrIaJPy3xLyEyYnV0iGQ3+vQsg1Vv73Qu6ayPlByI9CGrsSGf34bs5SCMgRksfKL4jSdVxmcr4WckshBhb0nZBaL5ORysrO5J+ThExmmRBjD3FJyBdCPhfSxO89YLLqvUQGsp18IcP5Z2RD04X8jC1EJ8AiPhNyjrMx4LaQK0Ja3E7GGBaZon4gZCbHBZ2BeHJKyCdKSnydxXVk+Nj1ZHFMeEfIbCGFLhuHfSnkYyFXOaYgnpREykoiQQbSz2lMCFLS+WwNbkaxkAOcAoOIC5w2a03GOCVVRXa0UMO4EE48+QdnXzIV/kZXMibwoA0WMU/Ib8mb+JuQf7GF3GO3pQ0Z8ZwZDeZMaYmQIvI2zgrZxxlXJWdgrbEmA0T8nOMEyPijBmOGaAEW8VcmA/Hj03AJCYeMOA7UKOYNFfJ7IeOpa+ErIfuFlFFbERKB/VU4d3aomMhEoID3oVUijhw5QqWlpV4hYzz/77LCPDFcNxMK3uULQJ3pdzzCtoSmpiaqqanxknXksw7SWCfvRpOMd7i0gTL2n63EiKqqKrp+vW3w2qtXL3r27JnX3BV08CfWyXDWUcTJgCW8zenrEqtmWVlZSSUlbRlg7969qbGxkTyIiawTH+soLZJk4Hen8OtfC3nfikuSBMjXHrUMifdZN8Tpvq2bPcEm8yh7j7E6oNu8eTNt3LjRIEMS0LdvXzp27BhdvnyZfD6f8RkIeu+99ygvL88LhEA3mKS6zjr73GkyQICc/kStqaedq+vTp89ry8jNzTVIAl68eEFPnz41iEpOTvaKdfRkHe1WdHfdKTJ8fMJ4/iP5wVJX3OX9+vVrRwaC+KFDhwwrgMAiBg4cSCNGjGj3ux7KsKCrv7DubpCFSm+8xRMDKAIGrb6WlZXRkydt8zJwQy9fvqT4+HhasmQJZWVlUWJiIjU0NNCdO3fo1q1brtEuLLi52dbTPjMV3eU7YRmpnKolKoGpUyQlJb2OD7AAKD09Pd1wTyDFjbh48SJduHCBVq1aZfervxLyLesQcaQ+HDJy+TiDLE4Mwf3gLgLGjh1LR48epefPnxvpbGtrK8XFxdH69euNoxusYefOnXTu3Dk6cOBAKKcoZN19zLr8LFQy4Mjx8EAKn9AS1NR1zpw5rnX6sIZNmzbRw4cPacOGDTRgwIBQTwXdnVd0WhsKGXJSqIhszFmDjOPHj9OlS5deB2vI9OnTKSMjwzXWAIsGpk2bRrNnzw7nlG+xDo+yTgOmuoGqtkkcI3DcSG0PlFkGLEOmrPL1yJEjKS0tzTXWYATM1FTDPYVhFRKojK6ltseA/kMBHpQLZBly6nSyXSJk3IC4KVNSrUFixYoVThBBrEPo8iy1PUX5jZ3UdjR/Nok8DgTn+fPndyDCAfdkxiTW6Wg7MaM/H3MozPq8zsBYaNu2bXTixImO+bxwT2vWrHH6T05knZayjqutWIZ0S3letwZ/RADLly93yj2ZkWfScVDLyGaScruSNUhMnjyZ5s6dG6lLgE7/zTouCUaGrNZhxFjgNWvYsmULPXr0KODvoFi5du3aSF5GAev2Juu6oTMy0k3ZVJewBtU9oXQTYbzNZKQHI2NIZz7Ni9aguqd58+ZF47JGKLq+2RkZeMLB5/Z4YccaouSezHHDR37WK6pkyAkj1KMyuoI1RNk9SWSwjstY583+yEg2jTNchbq6OsMaiouLbX0viu7JPJYrY51X+xtnpJnihmtw+vRpY9xgl4gouycVQ00672AZqXwc4CZr2Lp1K506dSqk70fZPfmrcqQGIiOFj33dYg1wS9XVoS3hjpF7IpOOUwKRkWSKHdoCAfrgwYMhfz+G7skcn5PUN+P9ZFM9dLcISUSoU7cxdE8SiSaddyDDx8deumdMAOZLMAeBCqsdTJo0KZbuyWwZvmBkaLsGD8Faxohly5YZU7l79uyxTAgIXL16tQ7/yshgZMhVN9U6EgH3JLOmCRMmGKksMGbMGMuEgMDMzExtXbBKxks+3tPdPZmDrxVCVAI1gFwt1BKMDO2aZG3fvr2de/J3d3dGiD8CY4yGYGRIEl7odNWoNZ08edLS3R2IEA3d03N/N75KhiRBm5UsqL5iTGHn7gYhixYt0tU9mS2jKdCgD8+BDtIpgCNOyOqrlbvbXB7R0D1JyFYXdYHIkKseH+ninuR8hJW721weARF4wkPT7OmRSecdyJD9lcrd5J78FQtBHr6jcRpbbtJ5BzKkH6t1i3vyZw34fQ1jhBm1Jp13IEMGcLRfQHPFjFi7p8LCQr+Kdak1SFSwjjtkruY58CoO4tdiQYbqnvDkur/ShYutQeIajy+qzB+YybjPZGCE+EEs3dPSpUtp6NChnVoD5iQQpAcPHkwuwk1F152S8ZCPP8TSPRUUFLQbK5itAfMRKINrUH0NBTdMug5Ihgwot6mt72tBLNzTunXrjLkKKB8kgAzVGhAbYjwfESous247BG9/ZAAoFGazbyuIlXtCCWTHjh1UW1vrBWuQwGLLVgpQjPVHRimT8XU0ru78+fPt3NOsWbNo5cqVdObMGa9Yg4orio4tkSHLIVikjU7IEVujgRVDCMrSPU2dOpUWLFjgNWuQuMQ6pUAlp0DLyBDA8fDzF5EkA9Omcv0csHv3bi9ag0QJu6iAyVEgMn5kMrAyEwstHX8QGosZ1aVbsu2RbtaARmXoHIeWG3KtonxtA3BLFxXd2iKjkesnaN7yqdNkwD1hVakZOloDGgqADNwsUpBsFBUV0cyZlnsnQ4dNrNNGu2QA3zEZZ4X8ghzsX252T5gMgjVEcMVQyMDa9YULF7Z7D60rHj+23PD5LusQ+L6zX0wIUsx6wK/RoP3DSLgnrCrFKDpCa+hCAtbGo6UGjuh3guQCDWhGjRpldH2Ai0LDGouA7p6wLmtCJUPWUTL5hFgcWOiUe4I1YJ21w8t7HQEGnGhRAaDfCa4bloyH50AGYobFbnJfsu6kLikcMup5xDhcyIlwyZDuSUdrkGUXjPplPywZrMeNG2e8J5MMtc1fEEBnmO++QxY2RbHSc+iKciwOxz2h/oQ7bteuXdoRAeTk5NCwYcOMjA6Bu7y8nPbt22dYR0JCArW0tD3MkZKS0q6IGQDFiu7+Z+XvW+nEhitAWzd0FEOfH5RI8+26JwQ9h/pwOIr6+nqjGRnu9uzsbKMznIobN24Y1w8CJNA5LkiycYV11cq6a3GKDOITysfYDzAxlvsU9ujRI5TGWVHB7du3jZIMXBDiAO5+dI9bvHix0bAMzczMZARBM73Za6OcbOxGY6cXOlwaOovhMXbcFn8gj+Lw4cPGHMmUKVNo7969NGPGDMNiECdAThB8JOQIjytOkI1m9Xb61OGkspMYOoud8SoZaiNktc2fBSLOsG6IQtjGwW7TQOTJshPlPnJwIw+doHaTw9y6xZnEEtZJC+vIdsP3hBCu9SrHi+FskiB0vNcso6KiwniNJxQt4CvWRQMPBa6G8ncTQrze/9KbRTX7+Tz5XiEDHeMsuCQ1c9rPI+xK1k1og80wNjOBRWAzk4HUvZkJaiOYqrxAYewu4+Q2P5mcYXWlbX4+YouI+TY/KiFdbQOsc0xEHWm0AZYKuTUc4sdvhCzyKBF/x1CE2hYXabc1nIruTRM1IoOo43aiC4T80uVE4DHGf5LLthOVMG+0C4vBXLobN9o9zhbgyo12VahbUKMrwAwWN2xB/QmLXH/n2i2ozVZi3py9iFNi3drvlXKKepY8uDm7CixBzeXxCIAhLjbUmqjB2ASuBw+Z4XEaOYWH8QOmSuujdRHRJON1tYEzrExlnJLD1jOWotfCFQ8hf8t3/S1lnPCAM6eo7+wYCzIkUNsaRe3btsZzPAFZI9iSnFq0U8F3+k1W9l3TQA2pKh4wi9nS61iSoaI/x49sP6N7uQvaEE6bMeOYzAlBmpIM3OW7GQG3gUfHSD/v05tZN/Mo+R6T81gHJehChopkLq2AhEEOn7uKSakkP+sjuskIjp5MUBonASkc/HtypibbBLWwNHMQfsLBt4YV36z7P+oGMroMusnQCP8XYACgtQtbAKLiKwAAAABJRU5ErkJggg=="></div><div id="vadstena-engine-compass-frame2"><img id="vadstena-engine-compass2" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABjCAYAAACPO76VAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABG9JREFUeNrtnM9LFGEcxkeEPCQVmbkh7EXoEgW6noIQzQwKoQ5Lkgh7SA8iddlCQfAQFApdghAxooJCsEMe9JAEek8i81YQCIEYQvgHZM9L37Fpmpl9Z3d+rs8DDw7unuaz3+ddX+d9DIOiKIqiKIqiKIqiKIqiKIqiKIqiKMpTQ0NDyqNwTq7/MRUNAKsfwL2EER+MLHxBru/BA4QR3zR0wY/lWmmEMKKHcVh+tsEv5PoGPE4Y0cP4LD9b4AW57oC/whvwB3gZfgN3886FG1EmjAZ41WEa6uAm+DTcyLsXPAz11fWkDUYtvAVPwHfgAnwdbmVMhQtjDj4jN3gNPiTXF+E8fAsuwvfhQScIuVwuMusK762H69IGYwY+LwDew+3wcZkOQ2fhThoMvK8TnkrjZEzCV+RGF2XhXoE/wuvwJ7jGK5aSAkOm4Qm8DTemEcYYfNNtCnTWiCTAkGn4Bu/B+bSuGcPwF3gJfg1Pww/l661uLMQGwzINe+L5tH+1PSpbIOdkG0TtRWWSDsM2Dco/UhlPQSpqGA7TsJfqeEorDLjHNg3pj6cUwjgCzzpAYDxFDENNw6YLCOU+Uggfhtc0mH5LAuHDKDUNyjtwhgTCg6EzDab7effDg6EzDYynkGH4mQbGU4gw/EwD4ykkGMfgZz4hMJ5CgHEV/l4GCMZTgDDUNDwvAwLjKeD1odxp2I8nP/92JQx3P6oAwn48EUYw64N5U3+VG09+H0ggDOc1woymn/Bl2WH1A2KhnKdDCON/WxfrgvzurA8gCmAzYVQOwxpPi7bXdIEUyn1uijDc46nZ4T2lgCxW8hAbYfz1U69PtwYQN4AE4BNGT6lPtwaQQqWPdxLGn93XzVKfbgff1QVI6cOY1Ywnt+2RkgApPRh+48m+PaJA9Ab1FPpBhuEnnpw2Cxd1I40qDUM3npymoRDG+YyDCsMaT0thTANh6MGwxtMunA1jGghDD4Y1ngY1pkH9T+JUFMfIDhoMazy9g2s8pmHHug1OGMHCcIunBvilwzRkoj5geZBgOMXTNXgrjGkgDHcYl2zxdAJ+FeY0EIYziHrLQRUVT7ejmAbCcIZhPbq1G9U06MIo97RuGkF0ejy50Z9LwDlwuekZOSB6QQ6MZuUAaVXGU+TT4BNGixydnpaj1EtytHq4GuPJPEPXF/HBSkcYOmUCUjowVo3xNK8OM8YBwgNGjdRqrEvNxorUbhTldVXHMVlN8aSmIR8XBDsMjymolSKadimmMaSoZqZa4mnePNqbMBiDUr1UlCqmvFQzGVLVtCbXqsJpLu3xtG1vHYgThMMUtEopWUFKyiaktKzWVmamys1G0xxPU04H3RMAo1Fq+Zqkps8OaFVq/aww0vt3hleDWQJgdEth5bIUWG5IoWWHvL5gNgJZYVABy2PRHpfKV0MqYNts1bC8eRHCGJEyZEPKkbvYwRsfjAGpCTdkGyRLAPHB6JUCfU5DAmDkpJ+XN4miKIqiKIqiKIqiKIqiKIqiKIpKpn4DKrVAiBFUfdUAAAAASUVORK5CYII="></div><div id="vadstena-engine-compass-frame3"><img id="vadstena-engine-compass3" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGMAAABjCAYAAACPO76VAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABG9JREFUeNrtnM9LFGEcxkeEPCQVmbkh7EXoEgW6noIQzQwKoQ5Lkgh7SA8iddlCQfAQFApdghAxooJCsEMe9JAEek8i81YQCIEYQvgHZM9L37Fpmpl9Z3d+rs8DDw7unuaz3+ddX+d9DIOiKIqiKIqiKIqiKIqiKIqiKIqiKMpTQ0NDyqNwTq7/MRUNAKsfwL2EER+MLHxBru/BA4QR3zR0wY/lWmmEMKKHcVh+tsEv5PoGPE4Y0cP4LD9b4AW57oC/whvwB3gZfgN3886FG1EmjAZ41WEa6uAm+DTcyLsXPAz11fWkDUYtvAVPwHfgAnwdbmVMhQtjDj4jN3gNPiTXF+E8fAsuwvfhQScIuVwuMusK762H69IGYwY+LwDew+3wcZkOQ2fhThoMvK8TnkrjZEzCV+RGF2XhXoE/wuvwJ7jGK5aSAkOm4Qm8DTemEcYYfNNtCnTWiCTAkGn4Bu/B+bSuGcPwF3gJfg1Pww/l661uLMQGwzINe+L5tH+1PSpbIOdkG0TtRWWSDsM2Dco/UhlPQSpqGA7TsJfqeEorDLjHNg3pj6cUwjgCzzpAYDxFDENNw6YLCOU+Uggfhtc0mH5LAuHDKDUNyjtwhgTCg6EzDab7effDg6EzDYynkGH4mQbGU4gw/EwD4ykkGMfgZz4hMJ5CgHEV/l4GCMZTgDDUNDwvAwLjKeD1odxp2I8nP/92JQx3P6oAwn48EUYw64N5U3+VG09+H0ggDOc1woymn/Bl2WH1A2KhnKdDCON/WxfrgvzurA8gCmAzYVQOwxpPi7bXdIEUyn1uijDc46nZ4T2lgCxW8hAbYfz1U69PtwYQN4AE4BNGT6lPtwaQQqWPdxLGn93XzVKfbgff1QVI6cOY1Ywnt+2RkgApPRh+48m+PaJA9Ab1FPpBhuEnnpw2Cxd1I40qDUM3npymoRDG+YyDCsMaT0thTANh6MGwxtMunA1jGghDD4Y1ngY1pkH9T+JUFMfIDhoMazy9g2s8pmHHug1OGMHCcIunBvilwzRkoj5geZBgOMXTNXgrjGkgDHcYl2zxdAJ+FeY0EIYziHrLQRUVT7ejmAbCcIZhPbq1G9U06MIo97RuGkF0ejy50Z9LwDlwuekZOSB6QQ6MZuUAaVXGU+TT4BNGixydnpaj1EtytHq4GuPJPEPXF/HBSkcYOmUCUjowVo3xNK8OM8YBwgNGjdRqrEvNxorUbhTldVXHMVlN8aSmIR8XBDsMjymolSKadimmMaSoZqZa4mnePNqbMBiDUr1UlCqmvFQzGVLVtCbXqsJpLu3xtG1vHYgThMMUtEopWUFKyiaktKzWVmamys1G0xxPU04H3RMAo1Fq+Zqkps8OaFVq/aww0vt3hleDWQJgdEth5bIUWG5IoWWHvL5gNgJZYVABy2PRHpfKV0MqYNts1bC8eRHCGJEyZEPKkbvYwRsfjAGpCTdkGyRLAPHB6JUCfU5DAmDkpJ+XN4miKIqiKIqiKIqiKIqiKIqiKIpKpn4DKrVAiBFUfdUAAAAASUVORK5CYII="></div></div></div>',
b.innerHTML=c);!1==q.re()?this.Vb=new q.ne(document.getElementById("vadstena-engine-gallery"),4500,0.07):this.a=new V("vadstena-engine-canvas-3d",null,this.q,null,null,"1"==this.C.Aa.screenshots);this.fb=new q.me(this,this.bf.bind(this),this.ug.bind(this));this.ob=new W(this);window.VadstenaInterfaceCommand_=this.ob.Tf.bind(this.ob);this.Se=this.Bc=(new Date).getTime();this.tf(a)}h=$.prototype;
h.tf=function(a){var b=this.C.Aa;this.C.Eb=null!=a?a:{};this.C.Aa=b;a=this.C.Aa;b=this.C.Eb;null!=a.controls&&(b.hideNavigationControls="0"==a.controls);null!=a["tool-panel"]&&(b.hideToolPanel="0"==a["tool-panel"]);null!=a["close-tool-panel"]&&(b.closeToolPanel="0"==a["close-tool-panel"]);null!=a.toolbar&&(b.hideToolbar="0"==a.toolbar);null!=a.info&&(b.hideInfo="0"==a.info);null!=a["link-tool"]&&(b.hideLink="0"==a["link-tool"]);null!=a["gis-tool"]&&(b.hideGis="0"==a["gis-tool"]);null==a.credits&&
(b.hideCredits="0"==a.credits);null!=a.x&&(b.forcePositonX=parseInt(a.x,10));null!=a.y&&(b.forcePositonY=parseInt(a.y,10));null!=a.d&&(b.forceDistance=parseInt(a.d,10));null!=a.ho&&(b.forceHeightOffset=parseInt(a.ho,10));null!=a.rx&&(b.forceOrientationX=parseInt(a.rx,10));null!=a.ry&&(b.forceOrientationY=parseInt(a.ry,10));null!=a.rotate&&(b.forceAutorotate=parseFloat(a.rotate));null!=this.Vb&&(b.hideNavigationControls=!0,b.hideToolbar=!0);this.tc()};
h.bd=function(a,b){if(null!=a&&(this.Bd=!0,this.Oc=a,this.U=a.locations,null!=this.U)){var c=this.C.Eb;null!=c.forcePositonX&&null!=c.forcePositonY&&(b=nb(this,[c.forcePositonX,c.forcePositonY,null!=c.forceDistance?c.forceDistance:300,null!=c.forceHeightOffset?c.forceHeightOffset:0]));if(null!=b)switch(typeof b){case "number":this.Ta(b);break;case "string":this.uf(b);break;default:this.Ta(0)}else this.Ta(0)}};h.Cc=function(){return this.Wf};h.Ed=function(){return this.Wa};
h.uf=function(a,b){if(null==this.Oc||null==this.U)return!1;this.Ta(Pb(this,a),b);return-1!=Pb(this,a,!0)};
h.Ta=function(a,b,c){if(null==this.Oc||null==this.U)return!1;var d=!0;a>=this.U.length&&(a=this.U.length-1,d=!1);0>a&&(a=0,d=!1);this.Wa=a;this.Wf=this.U[this.Wa];if(!0==c)return null!=this.Vb&&(c=this.Cc(),null!=c&&Lb(this.Vb,c.galleryImageTemplateURL,c.galleryImageCount)),d;this.ia(0);c=this.Cc();if(null!=c)if(null!=this.Vb)Lb(this.Vb,c.galleryImageTemplateURL,c.galleryImageCount);else{var e=!1;this.wc!=c.mapConfigTemplateURL&&(e=!0,this.wc=c.mapConfigTemplateURL,fb(this.a,this.wc,this.q,this.vg.bind(this),
this.Uc.bind(this)));var f=this.a.aa(),g=this.a.oa(),k=this.a.I("cameraHeightOffset");gb(this.fb,[f[0],f[1],f[2]],[g[0],g[1],g[2]],k);null!=c.position&&null!=c.position.x&&(f[0]=c.position.x);null!=c.position&&null!=c.position.y&&(f[1]=c.position.y);null!=c.distance&&(f[2]=c.distance);null!=c.orientation&&null!=c.orientation.x&&(g[0]=c.orientation.x);null!=c.orientation&&null!=c.orientation.y&&(g[1]=c.orientation.y);k=null!=c.heightOffset?c.heightOffset:0;hb(this.fb,f,g,k,e||!b);e||!b?(null!=c.autorotate&&
this.ia(c.autorotate),this.Gb=!1):(this.a.O("texelSize",0.01),this.Gb=!0,this.cd=!1)}Qb(this,"location-changed",{J:this.U[a].accessToken,p:a});return d};h.Ee=function(a){return null==this.U||a>=this.U.length||0>a?null:this.U[a]};h.fg=function(a){if(null==this.U)return null;a=Pb(this,a,!0);return 0>a?null:this.U[a]};h.Ec=function(){return this.U};h.Fc=function(){return this.Oc};h.Dc=function(){return!0==this.Gb?0.5:1};h.Fe=function(){var a=this.Wa+1;a>=this.U.length&&(a=0);return a};
h.Ge=function(){var a=this.Wa-1;0>a&&(a=this.U.length-1);0>a&&(a=0);return a};h.ia=function(a){this.jd=0.001*a;Rb(this)};h.cg=function(){return this.a};h.eg=function(){return this.ob};h.Zd=function(a,b){if(null!=b)return this.Ud++,this.qb.push({sg:a,rg:b,J:this.Ud}),function(a){this.removeListener(a)}.bind(this,this.Ud)};h.vg=function(a,b){this.Ta(this.Ed(),!1);this.bf();lb(this.ob,a,b);!0==a?Qb(this,"initialized",{}):Qb(this,"error",{xh:b})};
h.Uc=function(a){this.Bc=(new Date).getTime();Rb(this);!0==a&&this.ob.Uc();this.Se=this.Bc;!0==a&&Qb(this,"update",{})};h.ug=function(){Qb(this,"flight-update",{})};h.bf=function(){var a=this.Cc();null!=a&&!0!=this.cd&&null!=a.autorotate&&this.ia(a.autorotate);this.cd=this.Gb=!1;this.Uc();Qb(this,"flight-finished",{})};function Rb(a){if(0!=a.jd&&null!=a.a){var b=a.a.oa();b[0]=(b[0]+(a.Bc-a.Se)*a.jd)%360;a.a.sa(b[0],b[1],b[2]);ib(a.ob)}}h.tc=function(){this.ob.tc(this.C)};
function Pb(a,b,c){for(var d=0,e=a.U.length;d<e;d++)if(a.U[d].accessToken==b)return d;return!0==c?-1:0}
function nb(a,b){var c=a.Ec();if(null!=c&&0<c.length){var d=-1,e=99999999999,f=0,g=0.5,k=a.Fc();null!=k&&null!=k.texelSize&&(g=k.texelSize);for(var l=g,m=0,n=c.length;m<n;m++){var p=c[m];if(null!=p.position&&null!=p.position.x&&null!=p.position.y&&null!=p.radius&&p.mapConfigTemplateURL==a.wc){var r=[p.position.x,p.position.y,0],s=p.radius,u=r[0]-b[0],r=r[1]-b[1],u=u*u+r*r;u<s*s&&u<e&&(d=m,e=u,f=s);r=Math.min(s+2E4,40*s);p=null!=p.texelSize?p.texelSize:l;p<l&&u<r*r&&(u>s*s&&(u=Math.sqrt(u),p+=(u-s)/
(r-s)*(g-p)),p<l&&(l=p))}}!0!=a.Gb&&null!=k&&null!=k.texelSize&&a.a.I("texelSize")!=l&&a.a.O("texelSize",l);null!=k&&null!=k.outDistance&&(f>k.outDistance?b[2]>f&&(d=-1):b[2]>k.outDistance&&(d=-1));return d}return 0}function Qb(a,b,c){for(var d=0,e=a.qb.length;d<e;d++)a.qb[d].sg==b&&a.qb[d].rg(c)}h.removeListener=function(a){for(var b=0,c=this.qb.length;b<c;b++)if(this.qb[b].J==a){this.qb[b].splice(b,1);break}};q.Engine=$;$.prototype.setConfiguration=$.prototype.tf;$.prototype.setLocations=$.prototype.bd;
$.prototype.getCurrentLocation=$.prototype.Cc;$.prototype.getCurrentLocationIndex=$.prototype.Ed;$.prototype.setCurrentLocationById=$.prototype.uf;$.prototype.setCurrentLocationByIndex=$.prototype.Ta;$.prototype.getLocationByIndex=$.prototype.Ee;$.prototype.getLocationById=$.prototype.fg;$.prototype.getLocations=$.prototype.Ec;$.prototype.getLocationsData=$.prototype.Fc;$.prototype.getFlightProgress=$.prototype.Dc;$.prototype.getNextLocationIndex=$.prototype.Fe;
$.prototype.getPreviousLocationIndex=$.prototype.Ge;$.prototype.setAutorotate=$.prototype.ia;$.prototype.getBrowser=$.prototype.cg;$.prototype.getInterface=$.prototype.eg;$.prototype.on=$.prototype.Zd;window.startEngine=function(){function a(){d.bd(null,0)}var b=window.VadstenaEngineType_,c={hideNavigationControls:!1,hideToolPanel:!1,closeToolPanel:!1,hideToolbar:!1,hideInfo:!1,hideLink:!1,hideGis:!1,hideCredits:!1};"webexport"==b&&(c.hideInfo=!0);var d=new $(c),c=function(a){d.bd(a,0)}.bind(this);"webexport"==b?(b=window.VadstenaEngineMapPath_,null==b&&(b="./mapConfig.json"),c={},c.mapConfigTemplateURL=b,b={},b.locations=[c],d.bd(b,0)):(b=window.VadstenaEngineLocationsPath_,null==b&&(b="demo-examples.json"),
q.Nc(b,c,a.bind(this)))};
    </script>
</head>
<body style = "padding: 0; margin: 0;" onload="startEngine()">
    <div id="vadstena-engine" style="width:100%; height:100%;"></div>
</body>
</html>